<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es">
<head>
<!-- 2026-02-16 lun 08:15 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Apuntes de Recuperación de Información Web</title>
<meta name="author" content="Eduardo Alcaraz" />
<meta name="generator" content="Org Mode" />
<style type="text/css">
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { }
</style>
<link rel="stylesheet" type="text/css" href="src/readtheorg_theme/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="src/readtheorg_theme/css/readtheorg.css"/>
<script type="text/javascript" src="src/lib/js/jquery.min.js"></script>
<script type="text/javascript" src="src/lib/js/bootstrap.min.js"></script>
<script type="text/javascript" src="src/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="src/readtheorg_theme/js/readtheorg.js"></script>
<style> #content{max-width:1800px;}</style>
<style>pre.src {background-color: #303030; color: #e5e5e5;}</style>
<script>
  window.MathJax = {
    tex: {
      ams: {
        multlineWidth: '85%'
      },
      tags: 'ams',
      tagSide: 'right',
      tagIndent: '.8em'
    },
    chtml: {
      scale: 1.0,
      displayAlign: 'center',
      displayIndent: '0em'
    },
    svg: {
      scale: 1.0,
      displayAlign: 'center',
      displayIndent: '0em'
    },
    output: {
      font: 'mathjax-modern',
      displayOverflow: 'overflow'
    }
  };
</script>

<script
  id="MathJax-script"
  async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>
</head>
<body>
<div id="content" class="content">
<h1 class="title">Apuntes de Recuperación de Información Web</h1>
<div id="table-of-contents" role="doc-toc">
<h2>&Iacute;ndice</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#orgc85f147">Instalación de requerimientos</a>
<ul>
<li><a href="#orgfbaf483">Verificación de Python</a></li>
<li><a href="#orgdff86c3">Creación del entorno virtual</a></li>
<li><a href="#org0ed47b5">Activación del entorno virtual</a>
<ul>
<li><a href="#org23ef876">GNU/Linux y macOS</a></li>
<li><a href="#orgb84dcf5">Windows – Símbolo del sistema (CMD)</a></li>
<li><a href="#orga024909">Windows – PowerShell</a></li>
<li><a href="#orgdb8c55f">Windows – Git Bash</a></li>
</ul>
</li>
<li><a href="#org8e0c6f3">Actualización del gestor de paquetes</a></li>
<li><a href="#org3fafb2d">Instalación de dependencias</a></li>
<li><a href="#org84e7009">Verificación de la instalación</a></li>
<li><a href="#orgc066cbd">Desactivación del entorno virtual</a></li>
</ul>
</li>
<li><a href="#org68c59bd">Manual de Entornos Virtuales en Python</a>
<ul>
<li><a href="#orgcb7001d">Introducción</a></li>
<li><a href="#orgb15dddc">Flujo de Trabajo Básico</a>
<ul>
<li><a href="#orgf80c181">1. Creación del entorno</a></li>
<li><a href="#org43b6bfe">2. Activación</a></li>
</ul>
</li>
<li><a href="#org571112a">Gestión de paquetes</a></li>
<li><a href="#orgc8b7bbc">El archivo de Requerimientos</a></li>
<li><a href="#org15ecf03">Exportar dependencias</a></li>
<li><a href="#org9f61800">Instalar desde el archivo</a></li>
<li><a href="#orgaa395e0">Tips de Limpieza</a></li>
<li><a href="#org7a92081">Entornos Virtuales Python (Edición Windows)</a></li>
<li><a href="#orgc70eff1">Requisitos Previos</a></li>
<li><a href="#orgf2218d0">Flujo de Trabajo en Windows</a>
<ul>
<li><a href="#org6640092">1. Crear el Entorno Virtual</a></li>
<li><a href="#orgf1be784">2. El Paso Crítico: La Activación</a></li>
<li><a href="#orgc4f841d">3. Confirmación</a></li>
</ul>
</li>
<li><a href="#orgb51d6a2">Gestión de Librerías con PIP</a>
<ul>
<li><a href="#org19ed290">Instalación de paquetes</a></li>
<li><a href="#org785ca1b">Congelar dependencias (Compartir proyecto)</a></li>
<li><a href="#orgac13123">Instalar desde un archivo recibido</a></li>
</ul>
</li>
<li><a href="#orgbf29176">Uso de Entornos en Emacs (Windows)</a>
<ul>
<li><a href="#org7fc9737">Instalación del paquete pyvenv</a></li>
<li><a href="#orgb6d63fc">Cómo activarlo dentro de Emacs</a></li>
</ul>
</li>
<li><a href="#org727e220">Solución de Problemas Comunes en Windows</a></li>
<li><a href="#org0c2c207">Desactivación y Limpieza</a></li>
<li><a href="#org5053c80">Agregar a jupyter notebook</a></li>
</ul>
</li>
<li><a href="#orgfdc0e3a">Sistemas de recuperación de información</a>
<ul>
<li><a href="#org61bc72b">Introducción a los sistemas de recuperación de información (IRS)</a>
<ul>
<li><a href="#org967cada">Definición y alcance</a></li>
<li><a href="#orgc66c00f">Objetivo fundamental</a></li>
<li><a href="#orgef13a5b">Componentes típicos de un IRS</a></li>
<li><a href="#orgd620453">Aplicaciones</a></li>
<li><a href="#org15027ed">Ejemplo de flujo completo en un IRS</a></li>
</ul>
</li>
<li><a href="#org48cb67a">Interfaces de usuario para búsqueda</a>
<ul>
<li><a href="#org4cb5ad8">Funciones de la interfaz</a></li>
<li><a href="#org49f3045">Tipos de interfaces</a></li>
<li><a href="#org645e4da">Elementos de presentación de resultados</a></li>
<li><a href="#org4761dcb">Usabilidad y experiencia de usuario</a></li>
</ul>
</li>
<li><a href="#org455748c">Modelos de recuperación de información</a>
<ul>
<li><a href="#org321ba1c">Modelo booleano</a></li>
<li><a href="#org6af7e4c">Modelo vectorial</a></li>
<li><a href="#org79779fc">TF-IDF (Term Frequency - Inverse Document Frequency)</a></li>
<li><a href="#org6625600">Modelo probabilístico (BM25, etc.)</a></li>
<li><a href="#orgca90d4a">Modelos basados en lenguaje (Language Models)</a></li>
<li><a href="#orge02880f">Resumen comparativo</a></li>
</ul>
</li>
<li><a href="#org8c18245">Evaluación de la recuperación</a>
<ul>
<li><a href="#orgc13487b">Conjuntos de prueba (test collections)</a></li>
<li><a href="#org50444d5">Métricas principales</a></li>
<li><a href="#org53b4cee">Evaluación con usuarios</a></li>
<li><a href="#orgaea5f0b">Trade-off precisión vs. recall</a></li>
</ul>
</li>
<li><a href="#orgcbc3012">Referencias</a></li>
</ul>
</li>
<li><a href="#org9c24806">Ejemplos IRS — Recuperación de información con feeds RSS</a>
<ul>
<li><a href="#org9bbfc76">Un buscador introductorio con feeds RSS</a>
<ul>
<li><a href="#org422f84c">Hacks de búsqueda: encontrar páginas y URLs de feeds RSS</a></li>
<li><a href="#org24b8801">Consultas de ejemplo para probar en el buscador</a></li>
</ul>
</li>
<li><a href="#org5e9a442">Extraer datos de un feed RSS y guardarlos</a></li>
<li><a href="#orgaf1bdef">Limpieza de texto (normalización para el IRS)</a></li>
<li><a href="#org7091c86">Modelo booleano: búsqueda por palabras clave</a></li>
<li><a href="#orgd007395">Ranking simple (modelo tipo vectorial)</a></li>
<li><a href="#orga2e0324">Interfaz de resultados</a></li>
<li><a href="#org2418a05">Pipeline completo del IRS con RSS</a>
<ul>
<li><a href="#org1d88353">Relación IRS ↔ feeds RSS en el pipeline</a></li>
<li><a href="#orgf011bdf">Explicación del código</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org49a6ca9">Introducción a XPath</a>
<ul>
<li><a href="#org8c35551">¿Para qué sirve?</a></li>
<li><a href="#org363d134">Documento de ejemplo</a></li>
<li><a href="#org066189d">Sintaxis básica</a>
<ul>
<li><a href="#org335ba44">Rutas absolutas y relativas</a></li>
<li><a href="#orgc08f197">Seleccionar por etiqueta</a></li>
</ul>
</li>
<li><a href="#orga29f27b">Predicados</a>
<ul>
<li><a href="#org0518e33">Por posición</a></li>
<li><a href="#orgd36ae5c">Por atributo</a></li>
<li><a href="#org9e71e97">Por contenido de texto</a></li>
</ul>
</li>
<li><a href="#org9ae2815">Ejes</a>
<ul>
<li><a href="#orgc4ec090">Ejes más usados</a></li>
<li><a href="#org524526a">Ejemplos con ejes</a></li>
</ul>
</li>
<li><a href="#org96742a5">Funciones útiles</a>
<ul>
<li><a href="#org721911a">Funciones de texto</a></li>
<li><a href="#org7160c2a">Funciones numéricas</a></li>
<li><a href="#org87f3160">Funciones de tipo</a></li>
</ul>
</li>
<li><a href="#org7dcaa9e">Operadores y combinaciones</a>
<ul>
<li><a href="#orgd11eb90">Operadores lógicos</a></li>
<li><a href="#org9b919f8">Unión de conjuntos (|)</a></li>
<li><a href="#org58ca3df">Operadores de comparación</a></li>
</ul>
</li>
<li><a href="#orga2bae19">XPath en HTML (scraping)</a>
<ul>
<li><a href="#org3a76b7a">XPath útiles para HTML común</a></li>
</ul>
</li>
<li><a href="#org64ef0ba">XPath en Python (lxml)</a>
<ul>
<li><a href="#org104ece2">Cargar XML desde archivo</a></li>
<li><a href="#orgc9b64af">Ejecutar XPath</a></li>
<li><a href="#org378a98a">Namespaces (XML con prefijos)</a></li>
</ul>
</li>
<li><a href="#orgba093a5">Ejercicios prácticos</a></li>
<li><a href="#org745cc69">Referencia rápida</a></li>
<li><a href="#org4523f00">Dependencias</a></li>
</ul>
</li>
<li><a href="#orgcfba0d2">Ruta Crítica del Web Scraping y Aspectos de Seguridad</a>
<ul>
<li><a href="#orgd6fdd49">Introducción</a></li>
<li><a href="#orgda9f899">La ruta crítica: fases del proyecto de scraping</a>
<ul>
<li><a href="#org50cc13d">Diagrama de flujo general</a></li>
</ul>
</li>
<li><a href="#org5d83768">Fase 1: Legalidad y ética (puerta de entrada)</a>
<ul>
<li><a href="#org9ea664d">Antes de escribir código</a></li>
<li><a href="#orga4171d2">Ejemplo de robots.txt</a></li>
<li><a href="#orga2a6de7">Consecuencias de omitir esta fase</a></li>
</ul>
</li>
<li><a href="#org7c432e4">Fase 2: Buscar alternativas al scraping</a>
<ul>
<li><a href="#org6a6ac9b">Jerarquía de preferencia (orden recomendado)</a></li>
<li><a href="#org410966c">Antes de scrapear, preguntar</a></li>
<li><a href="#org734bda4">Motivos para preferir alternativas</a></li>
</ul>
</li>
<li><a href="#org4bc39c3">Fase 3: Planificación</a>
<ul>
<li><a href="#org7f1bb9b">Definir alcance</a></li>
<li><a href="#orgd206bc8">Estimar carga al servidor</a></li>
</ul>
</li>
<li><a href="#orge2e91c3">Fase 4: Análisis técnico</a>
<ul>
<li><a href="#org18aa0a4">Inspeccionar el sitio</a></li>
<li><a href="#org54d1a25">Contenido estático vs. dinámico</a></li>
<li><a href="#org10ed94a">Mapear la estructura</a></li>
<li><a href="#org39bd379">Detectando JSON oculto (Network)</a></li>
</ul>
</li>
<li><a href="#org4310cb2">Fase 5: Desarrollo</a>
<ul>
<li><a href="#org759cb87">Estructura recomendada del código</a></li>
<li><a href="#orgab51828">Manejo de errores</a></li>
</ul>
</li>
<li><a href="#org27bcbd5">Fase 6: Seguridad y robustez</a>
<ul>
<li><a href="#org216d439">Seguridad de las peticiones</a></li>
<li><a href="#org470b1b6">Seguridad de los datos extraídos</a></li>
<li><a href="#org90644e4">Protección del sitio objetivo (ética técnica)</a></li>
<li><a href="#org14eb2b1">Proxies y escalado (consideraciones)</a></li>
</ul>
</li>
<li><a href="#org74e27a0">Fase 7: Ejecución y mantenimiento</a>
<ul>
<li><a href="#orgf498f01">Logging</a></li>
<li><a href="#orgea73fa0">Monitoreo básico</a></li>
<li><a href="#orgad8ed19">Adaptación a cambios</a></li>
</ul>
</li>
<li><a href="#org26f651f">Checklist de seguridad resumido</a></li>
<li><a href="#org4cf8ffb">Riesgos y mitigaciones</a></li>
<li><a href="#org1d43fcc">Referencias</a></li>
</ul>
</li>
<li><a href="#orga9ba0fa">Web Scraping con XPath para Blogs Estáticos</a>
<ul>
<li><a href="#org8e53ea9">Introducción</a>
<ul>
<li><a href="#org1725ae5">Prerrequisitos</a></li>
</ul>
</li>
<li><a href="#org5c17893">Blogs estáticos vs. sitios dinámicos</a>
<ul>
<li><a href="#orgaaa4d20">¿Qué es un blog estático?</a></li>
<li><a href="#org2d2ffa5">¿Por qué son adecuados para scraping?</a></li>
</ul>
</li>
<li><a href="#orgb319767">Técnicas de scraping para blogs con XPath</a>
<ul>
<li><a href="#org7dcb90f">Paso 1: Inspeccionar la estructura HTML</a></li>
<li><a href="#org872cbcd">Paso 2: Obtener el HTML</a></li>
<li><a href="#org849bdca">Paso 3: Parsear y aplicar XPath</a></li>
<li><a href="#org0f9755d">Paso 4: Extraer todos los artículos de una página</a></li>
<li><a href="#org2e9c397">Paso 5: Paginación</a></li>
<li><a href="#org63ff749">XPath útiles para blogs (resumen)</a></li>
</ul>
</li>
<li><a href="#org28179e5">Consideraciones éticas y legales</a>
<ul>
<li><a href="#org6f493f3">Buenas prácticas</a></li>
<li><a href="#org9823bdd">Cuándo es más aceptable</a></li>
</ul>
</li>
<li><a href="#org6dea390">Por qué NO es adecuado hacer scraping en Amazon (y similares)</a>
<ul>
<li><a href="#org6ebd629">1. Términos de uso y condiciones</a></li>
<li><a href="#orgc275917">2. Contenido dinámico (JavaScript)</a></li>
<li><a href="#org6586829">3. Medidas anti-bot</a></li>
<li><a href="#org64ac299">4. Estructura cambiante</a></li>
<li><a href="#orgd8076ad">5. Alternativas legales y recomendadas</a></li>
<li><a href="#org54a539c">Resumen: Amazon vs. blog estático</a></li>
</ul>
</li>
<li><a href="#org0e299ab">Ejemplo completo: scraper para un blog estático</a></li>
<li><a href="#org9834725">Dependencias</a></li>
<li><a href="#orgba16d45">Referencias</a></li>
</ul>
</li>
<li><a href="#orgdb06e3a">Fuentes de Datos Gubernamentales y Abiertos: INEGI, datos.gob.mx y más</a>
<ul>
<li><a href="#org0680a56">Introducción</a></li>
<li><a href="#orge69dabb">INEGI (México)</a>
<ul>
<li><a href="#orgffd6579">Qué es INEGI</a></li>
<li><a href="#org9591e4c">API del Banco de Indicadores</a></li>
<li><a href="#orgf7969a6">API DENUE (Directorio Estadístico Nacional de Unidades Económicas)</a></li>
<li><a href="#org9af15e6">Datos Abiertos INEGI</a></li>
<li><a href="#orgdd395bb">Descarga Masiva INEGI</a></li>
<li><a href="#org2548060">Librería inegipy (Python)</a></li>
</ul>
</li>
<li><a href="#org6679242">datos.gob.mx (Plataforma Nacional de Datos Abiertos)</a>
<ul>
<li><a href="#orgf997731">Qué es datos.gob.mx</a></li>
<li><a href="#org888e160">API CKAN</a></li>
<li><a href="#org392deac">Descarga directa de archivos</a></li>
</ul>
</li>
<li><a href="#orgac69747">Otras fuentes gubernamentales de datos abiertos</a>
<ul>
<li><a href="#org517942e">México</a></li>
<li><a href="#org68f348b">España</a></li>
<li><a href="#org2e756f2">Internacional</a></li>
</ul>
</li>
<li><a href="#orgb2cdf28">Cuándo usar cada método</a></li>
<li><a href="#org944ac17">Buenas prácticas</a></li>
<li><a href="#org4f77077">Ejemplo completo: indicador INEGI + guardar CSV</a></li>
<li><a href="#org499947a">Resumen de enlaces</a></li>
<li><a href="#orgf5a28d3">Dependencias</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-orgc85f147" class="outline-2">
<h2 id="orgc85f147">Instalación de requerimientos</h2>
<div class="outline-text-2" id="text-orgc85f147">
</div>
<div id="outline-container-orgfbaf483" class="outline-3">
<h3 id="orgfbaf483">Verificación de Python</h3>
<div class="outline-text-3" id="text-orgfbaf483">
<p>
Antes de instalar las dependencias, verifique que el sistema cuente con Python
versión 3.9 o superior.
</p>

<div class="org-src-container">
<pre class="src src-bash">python --version
</pre>
</div>

<p>
En caso de que el comando anterior no esté disponible, intente:
</p>

<div class="org-src-container">
<pre class="src src-bash">python3 --version
</pre>
</div>
</div>
</div>
<div id="outline-container-orgdff86c3" class="outline-3">
<h3 id="orgdff86c3">Creación del entorno virtual</h3>
<div class="outline-text-3" id="text-orgdff86c3">
<p>
Se recomienda crear un entorno virtual para aislar las dependencias del proyecto
y evitar conflictos entre versiones de librerías.
</p>

<div class="org-src-container">
<pre class="src src-bash">python -m venv mlp_env
</pre>
</div>
</div>
</div>
<div id="outline-container-org0ed47b5" class="outline-3">
<h3 id="org0ed47b5">Activación del entorno virtual</h3>
<div class="outline-text-3" id="text-org0ed47b5">
<p>
La activación del entorno virtual depende del sistema operativo y del intérprete
de comandos utilizado.
</p>
</div>
<div id="outline-container-org23ef876" class="outline-4">
<h4 id="org23ef876">GNU/Linux y macOS</h4>
<div class="outline-text-4" id="text-org23ef876">
<div class="org-src-container">
<pre class="src src-bash"><span style="color: #fe8019;">source</span> mlp_env/bin/activate
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb84dcf5" class="outline-4">
<h4 id="orgb84dcf5">Windows – Símbolo del sistema (CMD)</h4>
<div class="outline-text-4" id="text-orgb84dcf5">
<p>
Si se utiliza el <b>Símbolo del sistema</b> (cmd.exe), ejecute:
</p>

<div class="org-src-container">
<pre class="src src-bat">mlp_env\Scripts\activate.bat
</pre>
</div>
</div>
</div>
<div id="outline-container-orga024909" class="outline-4">
<h4 id="orga024909">Windows – PowerShell</h4>
<div class="outline-text-4" id="text-orga024909">
<p>
Si se utiliza <b>Windows PowerShell</b>, ejecute:
</p>

<div class="org-src-container">
<pre class="src src-powershell">mlp_env\Scripts\Activate.ps1
</pre>
</div>

<p>
En caso de que la ejecución de scripts esté deshabilitada, habilítela
temporalmente con:
</p>

<div class="org-src-container">
<pre class="src src-powershell">Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope Process
</pre>
</div>

<p>
Posteriormente, vuelva a ejecutar el comando de activación.
</p>
</div>
</div>
<div id="outline-container-orgdb8c55f" class="outline-4">
<h4 id="orgdb8c55f">Windows – Git Bash</h4>
<div class="outline-text-4" id="text-orgdb8c55f">
<p>
Si se utiliza <b>Git Bash</b>, ejecute:
</p>

<div class="org-src-container">
<pre class="src src-bash"><span style="color: #fe8019;">source</span> mlp_env/Scripts/activate
</pre>
</div>

<p>
Una vez activado el entorno virtual, el nombre del entorno aparecerá entre
paréntesis al inicio de la línea de comandos.
</p>
</div>
</div>
</div>
<div id="outline-container-org8e0c6f3" class="outline-3">
<h3 id="org8e0c6f3">Actualización del gestor de paquetes</h3>
<div class="outline-text-3" id="text-org8e0c6f3">
<p>
Antes de instalar las librerías, se recomienda actualizar el gestor de paquetes
<code>pip</code>.
</p>

<div class="org-src-container">
<pre class="src src-bash">pip install --upgrade pip
</pre>
</div>
</div>
</div>
<div id="outline-container-org3fafb2d" class="outline-3">
<h3 id="org3fafb2d">Instalación de dependencias</h3>
<div class="outline-text-3" id="text-org3fafb2d">
<p>
Ejecute el siguiente comando para instalar los requerimientos del módulo
Perceptrón Multicapa <b>feedforward</b>.
</p>

<div class="org-src-container">
<pre class="src src-bash">pip install numpy matplotlib scikit-learn feedparser
</pre>
</div>
</div>
</div>
<div id="outline-container-org84e7009" class="outline-3">
<h3 id="org84e7009">Verificación de la instalación</h3>
<div class="outline-text-3" id="text-org84e7009">
<p>
Para verificar que las dependencias se instalaron correctamente, ejecute Python
en modo interactivo:
</p>

<div class="org-src-container">
<pre class="src src-bash">python
</pre>
</div>

<p>
Posteriormente, importe las librerías:
</p>

<div class="org-src-container">
<pre class="src src-python"><span style="color: #fb4934;">import</span> numpy
<span style="color: #fb4934;">import</span> matplotlib
<span style="color: #fb4934;">import</span> sklearn
<span style="color: #fb4934;">import</span> feedparser
<span style="color: #fe8019;">print</span><span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"Instalaci&#243;n de requerimientos completada correctamente"</span><span style="color: #fe8019;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgc066cbd" class="outline-3">
<h3 id="orgc066cbd">Desactivación del entorno virtual</h3>
<div class="outline-text-3" id="text-orgc066cbd">
<p>
Una vez finalizado el trabajo, el entorno virtual puede desactivarse con el
siguiente comando:
</p>

<div class="org-src-container">
<pre class="src src-bash">deactivate
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org68c59bd" class="outline-2">
<h2 id="org68c59bd">Manual de Entornos Virtuales en Python</h2>
<div class="outline-text-2" id="text-org68c59bd">
</div>
<div id="outline-container-orgcb7001d" class="outline-3">
<h3 id="orgcb7001d">Introducción</h3>
<div class="outline-text-3" id="text-orgcb7001d">
<p>
El uso de entornos virtuales es esencial para mantener las
dependencias de tus proyectos aisladas. En este manual aprenderás a
gestionarlos usando el módulo estándar <code>venv</code>.
</p>
</div>
</div>
<div id="outline-container-orgb15dddc" class="outline-3">
<h3 id="orgb15dddc">Flujo de Trabajo Básico</h3>
<div class="outline-text-3" id="text-orgb15dddc">
</div>
<div id="outline-container-orgf80c181" class="outline-4">
<h4 id="orgf80c181">1. Creación del entorno</h4>
<div class="outline-text-4" id="text-orgf80c181">
<p>
Para crear un entorno virtual, navega a la raíz de tu proyecto en la terminal (o dentro de un buffer de Emacs con <code>M-x shell</code>) y ejecuta:
</p>

<div class="org-src-container">
<pre class="src src-bash">python -m venv .venv
</pre>
</div>

<p>
<b>Nota:</b> El nombre <code>.venv</code> es una convención que hace que el directorio sea oculto en sistemas Unix.
</p>
</div>
</div>
<div id="outline-container-org43b6bfe" class="outline-4">
<h4 id="org43b6bfe">2. Activación</h4>
<div class="outline-text-4" id="text-org43b6bfe">
<p>
La activación depende de tu sistema operativo:
</p>
</div>
<ul class="org-ul">
<li><a id="org12accf2"></a>En Windows (PowerShell)<br />
<div class="outline-text-5" id="text-org12accf2">
<div class="org-src-container">
<pre class="src src-powershell">.\.venv\Scripts\Activate.ps1
</pre>
</div>
</div>
</li>
<li><a id="orgb5a6a1d"></a>En macOS / Linux<br />
<div class="outline-text-5" id="text-orgb5a6a1d">
<div class="org-src-container">
<pre class="src src-bash"><span style="color: #fe8019;">source</span> .venv/bin/activate
</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-org571112a" class="outline-3">
<h3 id="org571112a">Gestión de paquetes</h3>
<div class="outline-text-3" id="text-org571112a">
<p>
Una vez activado (verás el prefijo <code>(.venv)</code> en tu prompt), puedes instalar librerías:
</p>

<div class="org-src-container">
<pre class="src src-bash">pip install requests pandas
</pre>
</div>
</div>
</div>
<div id="outline-container-orgc8b7bbc" class="outline-3">
<h3 id="orgc8b7bbc">El archivo de Requerimientos</h3>
<div class="outline-text-3" id="text-orgc8b7bbc">
<p>
Es fundamental para la reproducibilidad del proyecto.
</p>
</div>
</div>
<div id="outline-container-org15ecf03" class="outline-3">
<h3 id="org15ecf03">Exportar dependencias</h3>
<div class="outline-text-3" id="text-org15ecf03">
<div class="org-src-container">
<pre class="src src-bash">pip freeze &gt; requirements.txt
</pre>
</div>
</div>
</div>
<div id="outline-container-org9f61800" class="outline-3">
<h3 id="org9f61800">Instalar desde el archivo</h3>
<div class="outline-text-3" id="text-org9f61800">
<div class="org-src-container">
<pre class="src src-bash">pip install -r requirements.txt
</pre>
</div>
</div>
</div>
<div id="outline-container-orgaa395e0" class="outline-3">
<h3 id="orgaa395e0">Tips de Limpieza</h3>
<div class="outline-text-3" id="text-orgaa395e0">
<p>
Para salir del entorno virtual:
</p>
<div class="org-src-container">
<pre class="src src-bash">deactivate
</pre>
</div>

<p>
Para borrar el entorno, simplemente elimina la carpeta:
</p>
<div class="org-src-container">
<pre class="src src-bash">rm -rf .venv  <span style="color: #928374;"># </span><span style="color: #928374;">En Linux/macOS
</span>rmdir /s /q .venv  <span style="color: #928374;"># </span><span style="color: #928374;">En Windows</span>
</pre>
</div>

<p>
&#x2014;
</p>
<blockquote>
<p>
"Keep your global Python clean, keep your projects isolated."
</p>
</blockquote>
</div>
</div>
<div id="outline-container-org7a92081" class="outline-3">
<h3 id="org7a92081">Entornos Virtuales Python (Edición Windows)</h3>
</div>

<div id="outline-container-orgc70eff1" class="outline-3">
<h3 id="orgc70eff1">Requisitos Previos</h3>
<div class="outline-text-3" id="text-orgc70eff1">
<ol class="org-ol">
<li>Tener instalado Python (descargado de <a href="https://www.python.org/">python.org</a> o la Microsoft Store).</li>
<li>Durante la instalación, asegúrate de marcar la casilla: <b><b>"Add Python to PATH"</b></b>.</li>
</ol>
</div>
</div>
<div id="outline-container-orgf2218d0" class="outline-3">
<h3 id="orgf2218d0">Flujo de Trabajo en Windows</h3>
<div class="outline-text-3" id="text-orgf2218d0">
</div>
<div id="outline-container-org6640092" class="outline-4">
<h4 id="org6640092">1. Crear el Entorno Virtual</h4>
<div class="outline-text-4" id="text-org6640092">
<p>
Abre tu terminal (PowerShell o CMD) en la carpeta de tu proyecto. El comando es el mismo para ambos:
</p>

<div class="org-src-container">
<pre class="src src-powershell">python -m venv venv
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf1be784" class="outline-4">
<h4 id="orgf1be784">2. El Paso Crítico: La Activación</h4>
<div class="outline-text-4" id="text-orgf1be784">
<p>
En Windows, la activación depende de qué terminal estés usando.
</p>
</div>
<ul class="org-ul">
<li><a id="orgfbffcef"></a>Opción A: PowerShell (Recomendado)<br />
<div class="outline-text-5" id="text-orgfbffcef">
<p>
Si es la primera vez que usas scripts en Windows, podrías recibir un error de seguridad. Primero, ejecuta esto como administrador (solo una vez):
</p>
<div class="org-src-container">
<pre class="src src-powershell">Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
</pre>
</div>

<p>
Luego, para activar el entorno:
</p>
<div class="org-src-container">
<pre class="src src-powershell">.\venv\Scripts\Activate.ps1
</pre>
</div>
</div>
</li>
<li><a id="orgdf25ee4"></a>Opción B: Símbolo del Sistema (CMD)<br />
<div class="outline-text-5" id="text-orgdf25ee4">
<div class="org-src-container">
<pre class="src src-cmd">.\venv\Scripts\activate.bat
</pre>
</div>
</div>
</li>
</ul>
</div>
<div id="outline-container-orgc4f841d" class="outline-4">
<h4 id="orgc4f841d">3. Confirmación</h4>
<div class="outline-text-4" id="text-orgc4f841d">
<p>
Sabrás que el entorno está activo porque el nombre <code>(venv)</code> aparecerá a la izquierda de la ruta en tu terminal:
#+example
(venv) C:\Proyectos\MiProyecto&gt;
#+example
</p>
</div>
</div>
</div>
<div id="outline-container-orgb51d6a2" class="outline-3">
<h3 id="orgb51d6a2">Gestión de Librerías con PIP</h3>
<div class="outline-text-3" id="text-orgb51d6a2">
</div>
<div id="outline-container-org19ed290" class="outline-4">
<h4 id="org19ed290">Instalación de paquetes</h4>
<div class="outline-text-4" id="text-org19ed290">
<p>
Una vez activo el entorno, instala lo que necesites:
</p>
<div class="org-src-container">
<pre class="src src-powershell">pip install pandas requests openpyxl
</pre>
</div>
</div>
</div>
<div id="outline-container-org785ca1b" class="outline-4">
<h4 id="org785ca1b">Congelar dependencias (Compartir proyecto)</h4>
<div class="outline-text-4" id="text-org785ca1b">
<p>
Para que otros participantes tengan exactamente lo mismo que tú:
</p>
<div class="org-src-container">
<pre class="src src-powershell">pip freeze &gt; requirements.txt
</pre>
</div>
</div>
</div>
<div id="outline-container-orgac13123" class="outline-4">
<h4 id="orgac13123">Instalar desde un archivo recibido</h4>
<div class="outline-text-4" id="text-orgac13123">
<p>
Si un compañero te pasa su <code>requirements.txt</code>:
</p>
<div class="org-src-container">
<pre class="src src-powershell">pip install -r requirements.txt
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgbf29176" class="outline-3">
<h3 id="orgbf29176">Uso de Entornos en Emacs (Windows)</h3>
<div class="outline-text-3" id="text-orgbf29176">
<p>
Para que Emacs en Windows gestione bien el entorno, añade esto a tu archivo de configuración (<code>init.el</code> o <code>.emacs</code>):
</p>
</div>
<div id="outline-container-org7fc9737" class="outline-4">
<h4 id="org7fc9737">Instalación del paquete pyvenv</h4>
<div class="outline-text-4" id="text-org7fc9737">
<div class="org-src-container">
<pre class="src src-elisp"><span style="color: #fe8019;">(</span><span style="color: #fb4934;">use-package</span> pyvenv
  <span style="color: #fe8019;">:ensure</span> t
  <span style="color: #fe8019;">:config</span>
  <span style="color: #b16286;">(</span>pyvenv-mode 1<span style="color: #b16286;">)</span><span style="color: #fe8019;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb6d63fc" class="outline-4">
<h4 id="orgb6d63fc">Cómo activarlo dentro de Emacs</h4>
<div class="outline-text-4" id="text-orgb6d63fc">
<ol class="org-ol">
<li>Presiona <code>M-x pyvenv-activate</code>.</li>
<li>Emacs te pedirá la ruta. Navega hasta la carpeta <code>venv</code> de tu proyecto.</li>
<li>Al seleccionarla, Emacs usará ese intérprete de Python para todos los scripts que ejecutes.</li>
</ol>
</div>
</div>
</div>
<div id="outline-container-org727e220" class="outline-3">
<h3 id="org727e220">Solución de Problemas Comunes en Windows</h3>
<div class="outline-text-3" id="text-org727e220">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">Error / Problema</td>
<td class="org-left">Solución</td>
</tr>

<tr>
<td class="org-left">:---</td>
<td class="org-left">:---</td>
</tr>

<tr>
<td class="org-left">"python" no se reconoce</td>
<td class="org-left">Reinstala Python y marca "Add to PATH" o usa el comando `py`.</td>
</tr>

<tr>
<td class="org-left">Error de "Execution Policy"</td>
<td class="org-left">Ejecuta `Set-ExecutionPolicy RemoteSigned -Scope CurrentUser`.</td>
</tr>

<tr>
<td class="org-left">No aparece el (venv)</td>
<td class="org-left">Asegúrate de usar el comando de activación correcto para tu terminal (.ps1 vs .bat).</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-org0c2c207" class="outline-3">
<h3 id="org0c2c207">Desactivación y Limpieza</h3>
<div class="outline-text-3" id="text-org0c2c207">
<p>
Para salir del entorno:
</p>
<div class="org-src-container">
<pre class="src src-powershell">deactivate
</pre>
</div>

<p>
Si quieres borrar el entorno por completo (para empezar de cero):
</p>
<div class="org-src-container">
<pre class="src src-powershell">rmdir /s /q venv
</pre>
</div>

<p>
&#x2014;
</p>
<div class="IMPORTANT" id="org8653bd1">
<p>
<b>Recordatorio:</b> Nunca incluyas la carpeta <code>venv</code> en tus archivos compartidos o en tu repositorio de Git. Solo comparte el código y el archivo <code>requirements.txt</code>.
</p>

</div>
</div>
</div>
<div id="outline-container-org5053c80" class="outline-3">
<h3 id="org5053c80">Agregar a jupyter notebook</h3>
<div class="outline-text-3" id="text-org5053c80">
<div class="org-src-container">
<pre class="src src-shell">pip install ipykernel
python -m ipykernel install --user --name=redes --display-name=<span style="color: #b8bb26;">"redes"</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgfdc0e3a" class="outline-2">
<h2 id="orgfdc0e3a">Sistemas de recuperación de información</h2>
<div class="outline-text-2" id="text-orgfdc0e3a">
</div>
<div id="outline-container-org61bc72b" class="outline-3">
<h3 id="org61bc72b">Introducción a los sistemas de recuperación de información (IRS)</h3>
<div class="outline-text-3" id="text-org61bc72b">
</div>
<div id="outline-container-org967cada" class="outline-4">
<h4 id="org967cada">Definición y alcance</h4>
<div class="outline-text-4" id="text-org967cada">
<p>
Un <b>Sistema de Recuperación de Información</b> (IRS, por sus siglas en inglés
<b>Information Retrieval System</b>) es un sistema software diseñado para almacenar,
representar y recuperar información relevante ante consultas de usuarios.
</p>
</div>
<ul class="org-ul">
<li><a id="org2e2c1a6"></a>Características principales<br />
<div class="outline-text-5" id="text-org2e2c1a6">
<ul class="org-ul">
<li>Almacena grandes volúmenes de documentos (texto, multimedia, metadatos).</li>
<li>Permite consultas en lenguaje natural o estructurado.</li>
<li>Devuelve un <b>ranking</b> o lista ordenada de documentos según relevancia.</li>
<li>La relevancia suele ser subjetiva y dependiente del contexto del usuario.</li>
</ul>
</div>
</li>
<li><a id="orgfbfa1b5"></a>Ejemplo de necesidad de información<br />
<div class="outline-text-5" id="text-orgfbfa1b5">
<pre class="example" id="org361bf9e">
Usuario: "Necesito saber cómo se calcula la precisión en un sistema de búsqueda
para poder comparar dos motores que estamos evaluando en mi empresa."

El IRS no busca la frase exacta "cómo se calcula la precisión"; busca documentos
que traten sobre *evaluación*, *precisión*, *sistemas de búsqueda* y los ordena
según qué tan bien satisfacen esa necesidad.
</pre>
</div>
</li>
</ul>
</div>
<div id="outline-container-orgc66c00f" class="outline-4">
<h4 id="orgc66c00f">Objetivo fundamental</h4>
<div class="outline-text-4" id="text-orgc66c00f">
<p>
El objetivo no es devolver <b>todos</b> los documentos que coincidan literalmente con
la consulta, sino aquellos que el usuario consideraría <b>útiles</b> o <b>relevantes</b>
para satisfacer su necesidad de información.
</p>
</div>
<ul class="org-ul">
<li><a id="org4774279"></a>Diferencia con bases de datos<br />
<div class="outline-text-5" id="text-org4774279">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Bases de datos</th>
<th scope="col" class="org-left">Recuperación de información</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Consultas exactas (SQL)</td>
<td class="org-left">Consultas por similitud/relevancia</td>
</tr>

<tr>
<td class="org-left">Coincidencia exacta</td>
<td class="org-left">Ranking y ordenación</td>
</tr>

<tr>
<td class="org-left">Datos estructurados</td>
<td class="org-left">Texto libre, documentos</td>
</tr>

<tr>
<td class="org-left">Respuesta determinista</td>
<td class="org-left">Respuesta aproximada, probabilista</td>
</tr>
</tbody>
</table>
</div>
</li>
</ul>
</div>
<div id="outline-container-orgef13a5b" class="outline-4">
<h4 id="orgef13a5b">Componentes típicos de un IRS</h4>
<div class="outline-text-4" id="text-orgef13a5b">
<ol class="org-ol">
<li><b>Índice</b> :: Estructura que permite localizar documentos sin escanear todo el corpus.</li>
<li><b>Motor de búsqueda</b> :: Algoritmos que comparan consulta vs. documentos.</li>
<li><b>Modelo de ranking</b> :: Criterio para ordenar resultados (TF-IDF, BM25, etc.).</li>
<li><b>Interfaz de usuario</b> :: Formulario de búsqueda, resultados, filtros.</li>
<li><b>Módulo de evaluación</b> :: Métricas para medir calidad (precisión, recall, etc.).</li>
</ol>
</div>
</div>
<div id="outline-container-orgd620453" class="outline-4">
<h4 id="orgd620453">Aplicaciones</h4>
<div class="outline-text-4" id="text-orgd620453">
<ul class="org-ul">
<li>Motores de búsqueda web (Google, Bing).</li>
<li>Búsqueda en bibliotecas digitales y repositorios.</li>
<li>Búsqueda en correo electrónico y documentos corporativos.</li>
<li>Sistemas de recomendación y búsqueda semántica.</li>
</ul>
</div>
</div>
<div id="outline-container-org15027ed" class="outline-4">
<h4 id="org15027ed">Ejemplo de flujo completo en un IRS</h4>
<div class="outline-text-4" id="text-org15027ed">
</div>
<ul class="org-ul">
<li><a id="org39d5b7b"></a>Corpus mínimo de ejemplo<br />
<div class="outline-text-5" id="text-org39d5b7b">
<p>
Se tienen 3 documentos (para ilustrar; en la realidad son millones):
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">ID</th>
<th scope="col" class="org-left">Documento</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">d1</td>
<td class="org-left">"La recuperación de información usa índices para buscar documentos de forma rápida."</td>
</tr>

<tr>
<td class="org-left">d2</td>
<td class="org-left">"Los modelos vectoriales calculan similitud entre consulta y documento."</td>
</tr>

<tr>
<td class="org-left">d3</td>
<td class="org-left">"La evaluación mide precisión y recall del sistema de búsqueda."</td>
</tr>
</tbody>
</table>
</div>
</li>
<li><a id="org07449ac"></a>Paso 1: Indexación<br />
<div class="outline-text-5" id="text-org07449ac">
<ul class="org-ul">
<li>Se extraen términos (tras eliminar stopwords y aplicar stemming): <code>recuperación</code>, <code>información</code>, <code>índices</code>, <code>documentos</code>, <code>modelos</code>, <code>vectoriales</code>, <code>similitud</code>, <code>consulta</code>, <code>evaluación</code>, <code>precisión</code>, <code>recall</code>, <code>búsqueda</code>.</li>
<li>Se construye un <b>índice invertido</b>: para cada término, lista de documentos que lo contienen.</li>
<li>Ejemplo: <code>precisión</code> \(\rightarrow\) [d3], <code>documentos</code> \(\rightarrow\) [d1], <code>recuperación</code> \(\rightarrow\) [d1], etc.</li>
</ul>
</div>
</li>
<li><a id="org089dd89"></a>Paso 2: Consulta<br />
<div class="outline-text-5" id="text-org089dd89">
<ul class="org-ul">
<li>Usuario escribe: "evaluación precisión búsqueda".</li>
</ul>
</div>
</li>
<li><a id="orge62026a"></a>Paso 3: Recuperación y ranking<br />
<div class="outline-text-5" id="text-orge62026a">
<ul class="org-ul">
<li>El motor obtiene candidatos del índice (p. ej. d3 contiene los tres términos) y aplica el modelo (TF-IDF o BM25) para puntuar cada documento.</li>
<li>Resultado ordenado: d3 (mayor puntuación), y posiblemente d1, d2 si comparten términos.</li>
</ul>
</div>
</li>
<li><a id="org2efc99f"></a>Paso 4: Presentación<br />
<div class="outline-text-5" id="text-org2efc99f">
<ul class="org-ul">
<li>Se muestra al usuario: título/snippet de d3 primero, luego los demás, para que pueda elegir el documento que le resulta relevante.</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-org48cb67a" class="outline-3">
<h3 id="org48cb67a">Interfaces de usuario para búsqueda</h3>
<div class="outline-text-3" id="text-org48cb67a">
</div>
<div id="outline-container-org4cb5ad8" class="outline-4">
<h4 id="org4cb5ad8">Funciones de la interfaz</h4>
<div class="outline-text-4" id="text-org4cb5ad8">
<p>
La interfaz de usuario en un IRS debe permitir:
</p>

<ol class="org-ol">
<li><b>Formular la consulta</b> (caja de búsqueda, operadores, filtros).</li>
<li><b>Ver resultados</b> ordenados y con información suficiente para decidir.</li>
<li><b>Refinar o reformular</b> la consulta (búsqueda iterativa).</li>
<li><b>Acceder al documento</b> completo cuando se considera relevante.</li>
</ol>
</div>
</div>
<div id="outline-container-org49f3045" class="outline-4">
<h4 id="org49f3045">Tipos de interfaces</h4>
<div class="outline-text-4" id="text-org49f3045">
</div>
<ul class="org-ul">
<li><a id="orgd01e615"></a>Interfaz de consulta por palabras clave<br />
<div class="outline-text-5" id="text-orgd01e615">
<ul class="org-ul">
<li>El usuario escribe términos (palabras clave).</li>
<li>Puede usar operadores: AND, OR, NOT, comillas para frases.</li>
<li>Ejemplo: <code>información AND (recuperación OR búsqueda)</code>.</li>
</ul>
</div>
<ul class="org-ul">
<li><a id="orgb6ca6b1"></a>Ejemplos de consultas booleanas<br />
<div class="outline-text-6" id="text-orgb6ca6b1">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Consulta</th>
<th scope="col" class="org-left">Interpretación</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">recuperación información</td>
<td class="org-left">documentos que contengan ambos términos (AND implícito)</td>
</tr>

<tr>
<td class="org-left">"recuperación de información"</td>
<td class="org-left">documentos con la frase exacta</td>
</tr>

<tr>
<td class="org-left">TF-IDF OR BM25</td>
<td class="org-left">documentos que contengan al menos uno de los dos</td>
</tr>

<tr>
<td class="org-left">evaluación NOT recall</td>
<td class="org-left">documentos sobre evaluación pero sin la palabra recall</td>
</tr>

<tr>
<td class="org-left">(precisión OR recall) AND métricas</td>
<td class="org-left">métricas y además precisión o recall</td>
</tr>
</tbody>
</table>
</div>
</li>
</ul>
</li>
<li><a id="org9d93841"></a>Interfaz de lenguaje natural<br />
<div class="outline-text-5" id="text-org9d93841">
<ul class="org-ul">
<li>Consultas en forma de pregunta o frase.</li>
<li>El sistema interpreta la intención (a veces con NLP).</li>
<li>Ejemplo: "¿Cómo se evalúa un sistema de recuperación?"</li>
</ul>
</div>
<ul class="org-ul">
<li><a id="orgd56e70f"></a>Ejemplo<br />
<div class="outline-text-6" id="text-orgd56e70f">
<pre class="example" id="orgd858176">
Usuario escribe: "recetas de pastel de chocolate sin gluten"

El sistema puede extraer: términos clave (recetas, pastel, chocolate, gluten),
negación (sin gluten) y devolver documentos que hablen de pastel de chocolate
y que mencionen "sin gluten" o recetas aptas para celíacos, aunque no aparezca
la frase exacta.
</pre>
</div>
</li>
</ul>
</li>
<li><a id="orgd60cad3"></a>Interfaz con filtros y facetas<br />
<div class="outline-text-5" id="text-orgd60cad3">
<ul class="org-ul">
<li>Filtros por fecha, autor, tipo de documento, idioma.</li>
<li>Facetas: categorías o atributos para restringir resultados.</li>
<li>Muy común en tiendas online y bibliotecas digitales.</li>
</ul>
</div>
<ul class="org-ul">
<li><a id="org98cc5f7"></a>Ejemplo (biblioteca digital)<br />
<div class="outline-text-6" id="text-org98cc5f7">
<pre class="example" id="orga7ef3c7">
Búsqueda: "recuperación de información"
Facetas mostradas al lado:
  Tipo de documento: Libro (120), Artículo (85), Tesis (12)
  Año: 2020-2024 (45), 2015-2019 (98), anterior (74)
  Idioma: Español (150), Inglés (67)

El usuario hace clic en "Artículo" y "2020-2024": la lista de resultados se
restringe a artículos de esos años, sin cambiar la consulta textual.
</pre>
</div>
</li>
</ul>
</li>
<li><a id="org9019653"></a>Interfaz de búsqueda por ejemplo (Query by Example)<br />
<div class="outline-text-5" id="text-org9019653">
<ul class="org-ul">
<li>El usuario proporciona un documento o fragmento como "ejemplo" de lo que busca.</li>
<li>El sistema busca documentos similares (búsqueda por similitud).</li>
</ul>
</div>
<ul class="org-ul">
<li><a id="org7eb6a7f"></a>Ejemplo<br />
<div class="outline-text-6" id="text-org7eb6a7f">
<pre class="example" id="orgcb011b1">
Usuario pega un párrafo de un artículo que le gustó:
"El modelo vectorial representa documentos como vectores en un espacio de términos.
La similitud coseno mide el ángulo entre el vector de la consulta y el del documento."

El sistema trata ese texto como una "consulta larga" o como documento de referencia,
calcula su vector (o embedding) y busca en el corpus los documentos más similares,
devolviendo por ejemplo artículos sobre modelos vectoriales, TF-IDF y similitud coseno.
</pre>
</div>
</li>
</ul>
</li>
</ul>
</div>
<div id="outline-container-org645e4da" class="outline-4">
<h4 id="org645e4da">Elementos de presentación de resultados</h4>
<div class="outline-text-4" id="text-org645e4da">
</div>
<ul class="org-ul">
<li><a id="org81169dc"></a>Lista de resultados (SERP)<br />
<div class="outline-text-5" id="text-org81169dc">
<ul class="org-ul">
<li>Título, URL, snippet o fragmento del documento.</li>
<li>Destacados (bold) de los términos de la consulta.</li>
<li>Paginación o scroll infinito.</li>
</ul>
</div>
</li>
<li><a id="org0fe3a77"></a>Snippets<br />
<div class="outline-text-5" id="text-org0fe3a77">
<ul class="org-ul">
<li>Fragmentos cortos del documento donde aparecen los términos.</li>
<li>Ayudan al usuario a juzgar relevancia sin abrir el documento.</li>
</ul>
</div>
</li>
<li><a id="org4756a89"></a>Agrupación y clustering<br />
<div class="outline-text-5" id="text-org4756a89">
<ul class="org-ul">
<li>Resultados agrupados por sitio, fecha o tema.</li>
<li>Reduce redundancia y facilita la exploración.</li>
</ul>
</div>
</li>
<li><a id="org47bbb1a"></a>Ejemplo de SERP (página de resultados)<br />
<div class="outline-text-5" id="text-org47bbb1a">
<pre class="example" id="orgb86063d">
Consulta: "evaluación recuperación información"

--- Resultado 1 ---
Título: Evaluación de sistemas de recuperación de información - Wikipedia
URL: https://es.wikipedia.org/wiki/...
Snippet: ... La evaluación de la recuperación de información utiliza métricas como
precisión, recall y F1. Se usan colecciones de prueba con juicios de relevancia ...

--- Resultado 2 ---
Título: Precisión y exhaustividad - Recuperación de información
URL: https://...
Snippet: ... Para evaluar un sistema de recuperación se definen la precisión (P) y
la exhaustividad (recall R). La precisión mide cuántos de los recuperados son
relevantes ...

--- Resultado 3 ---
...
</pre>
<p>
Los términos "evaluación", "recuperación", "información" aparecerían resaltados
en negrita en título y snippet para que el usuario juzgue la relevancia de un vistazo.
</p>
</div>
</li>
</ul>
</div>
<div id="outline-container-org4761dcb" class="outline-4">
<h4 id="org4761dcb">Usabilidad y experiencia de usuario</h4>
<div class="outline-text-4" id="text-org4761dcb">
<ul class="org-ul">
<li><b>Tiempo de respuesta</b>: resultados en milisegundos.</li>
<li><b>Claridad</b>: que el usuario entienda por qué aparece cada resultado.</li>
<li><b>Opciones de refinamiento</b>: sugerencias, "personas también buscaron", filtros.</li>
<li><b>Accesibilidad</b>: uso con teclado, lectores de pantalla, diseño responsive.</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org455748c" class="outline-3">
<h3 id="org455748c">Modelos de recuperación de información</h3>
<div class="outline-text-3" id="text-org455748c">
<p>
Un <b>modelo de recuperación</b> define cómo se representan documentos y consultas, y
cómo se calcula la relevancia o similitud entre ellos.
</p>
</div>
<div id="outline-container-org321ba1c" class="outline-4">
<h4 id="org321ba1c">Modelo booleano</h4>
<div class="outline-text-4" id="text-org321ba1c">
</div>
<ul class="org-ul">
<li><a id="orgd9d7c53"></a>Idea<br />
<div class="outline-text-5" id="text-orgd9d7c53">
<ul class="org-ul">
<li>Documentos y consultas como conjuntos de términos.</li>
<li>La consulta es una expresión booleana (AND, OR, NOT).</li>
<li>Un documento es "relevante" si satisface la expresión (verdadero/falso).</li>
</ul>
</div>
</li>
<li><a id="org0bfdbbc"></a>Limitaciones<br />
<div class="outline-text-5" id="text-org0bfdbbc">
<ul class="org-ul">
<li>No hay ranking: todos los documentos que coinciden son iguales.</li>
<li>No captura importancia de términos (frecuencia, rareza).</li>
<li>Demasiado rígido para el usuario promedio.</li>
</ul>
</div>
</li>
<li><a id="orgf2dfac7"></a>Ejemplo numérico (modelo booleano)<br />
<div class="outline-text-5" id="text-orgf2dfac7">
<p>
Corpus de 4 documentos (términos tras stemming):
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Doc</th>
<th scope="col" class="org-left">Términos presentes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">d1</td>
<td class="org-left">recuperación, información, índice, documento</td>
</tr>

<tr>
<td class="org-left">d2</td>
<td class="org-left">modelo, vectorial, similitud, documento</td>
</tr>

<tr>
<td class="org-left">d3</td>
<td class="org-left">evaluación, precisión, recall, búsqueda</td>
</tr>

<tr>
<td class="org-left">d4</td>
<td class="org-left">evaluación, información, índice</td>
</tr>
</tbody>
</table>

<p>
Consultas y resultados:
</p>
<ul class="org-ul">
<li>\(q_1\) = <code>recuperación AND información</code> \(\Rightarrow\) {d1} (solo d1 tiene ambos).</li>
<li>\(q_2\) = <code>evaluación OR precisión</code> \(\Rightarrow\) {d3, d4} (d3 tiene ambos; d4 tiene evaluación).</li>
<li>\(q_3\) = <code>documento NOT vectorial</code> \(\Rightarrow\) {d1} (d1 y d2 tienen "documento"; d2 tiene "vectorial", se excluye; d1 no tiene "vectorial", se incluye).</li>
</ul>

<p>
Todos los documentos devueltos se consideran "iguales"; no hay orden de preferencia.
</p>
</div>
</li>
</ul>
</div>
<div id="outline-container-org6af7e4c" class="outline-4">
<h4 id="org6af7e4c">Modelo vectorial</h4>
<div class="outline-text-4" id="text-org6af7e4c">
</div>
<ul class="org-ul">
<li><a id="org854faef"></a>Idea<br />
<div class="outline-text-5" id="text-org854faef">
<ul class="org-ul">
<li>Documentos y consultas como vectores en un espacio donde cada dimensión es un término.</li>
<li>Cada componente del vector es un peso (p. ej. TF-IDF).</li>
<li>Similitud = similitud coseno entre vector de consulta y vector del documento.</li>
</ul>
</div>
</li>
<li><a id="org0f480a6"></a>Fórmula de similitud coseno<br />
<div class="outline-text-5" id="text-org0f480a6">
<p>
\[
\text{sim}(q, d) = \frac{\vec{q} \cdot \vec{d}}{|\vec{q}| \, |\vec{d}|}
\]
</p>
</div>
</li>
<li><a id="org144a7cd"></a>Ventajas<br />
<div class="outline-text-5" id="text-org144a7cd">
<ul class="org-ul">
<li>Permite ranking (ordenar por similitud).</li>
<li>Simple y eficiente.</li>
<li>TF-IDF captura importancia de términos.</li>
</ul>
</div>
</li>
<li><a id="orgf361760"></a>Ejemplo: espacio de términos<br />
<div class="outline-text-5" id="text-orgf361760">
<p>
Supongamos vocabulario = {recuperación, información, evaluación}. Cada documento
y la consulta se representan como vectores de 3 dimensiones (pesos TF-IDF):
</p>

<ul class="org-ul">
<li>\(q\) = "recuperación información" \(\rightarrow\) \(\vec{q} = (0.8, 0.7, 0)\)</li>
<li>\(d_1\) = "recuperación de información e información" \(\rightarrow\) \(\vec{d_1} = (0.5, 0.9, 0)\)</li>
<li>\(d_2\) = "evaluación de la recuperación" \(\rightarrow\) \(\vec{d_2} = (0.6, 0, 0.8)\)</li>
</ul>

<p>
Similitud coseno: \(\text{sim}(q,d) = \frac{\vec{q}\cdot\vec{d}}{|\vec{q}||\vec{d}|}\).
</p>
<ul class="org-ul">
<li>\(\vec{q}\cdot\vec{d_1} = 0.8\cdot 0.5 + 0.7\cdot 0.9 = 0.4 + 0.63 = 1.03\) (alto).</li>
<li>\(\vec{q}\cdot\vec{d_2} = 0.8\cdot 0.6 + 0 + 0 = 0.48\) (menor).</li>
</ul>

<p>
Tras normalizar por las normas, \(d_1\) queda por encima de \(d_2\) en el ranking,
que es lo esperado porque \(d_1\) comparte ambos términos de la consulta.
</p>
</div>
</li>
</ul>
</div>
<div id="outline-container-org79779fc" class="outline-4">
<h4 id="org79779fc">TF-IDF (Term Frequency - Inverse Document Frequency)</h4>
<div class="outline-text-4" id="text-org79779fc">
</div>
<ul class="org-ul">
<li><a id="orgc2ed585"></a>Frecuencia de término (TF)<br />
<div class="outline-text-5" id="text-orgc2ed585">
<ul class="org-ul">
<li>Cuántas veces aparece el término en el documento.</li>
<li>Variantes: TF bruto, TF logarítmico (suavizado).</li>
</ul>
</div>
</li>
<li><a id="orgf15f05e"></a>Frecuencia inversa de documento (IDF)<br />
<div class="outline-text-5" id="text-orgf15f05e">
<ul class="org-ul">
<li>\(\text{IDF}(t) = \log \frac{N}{n_t}\), donde \(N\) = número de documentos, \(n_t\) = documentos que contienen \(t\).</li>
<li>Términos raros (en pocos documentos) tienen mayor IDF.</li>
</ul>
</div>
</li>
<li><a id="orgb77a6a3"></a>Peso TF-IDF<br />
<div class="outline-text-5" id="text-orgb77a6a3">
<p>
\[
w_{t,d} = \text{TF}(t,d) \times \text{IDF}(t)
\]
</p>
</div>
</li>
<li><a id="orgffd2a1a"></a>Ejemplo numérico TF-IDF<br />
<div class="outline-text-5" id="text-orgffd2a1a">
<p>
Corpus: 3 documentos. Término "recuperación":
</p>
<ul class="org-ul">
<li>En d1 aparece 3 veces; en d2 aparece 1 vez; en d3 no aparece.</li>
<li>\(N = 3\), \(n_{\text{recuperación}} = 2\) (está en d1 y d2).</li>
<li>\(\text{IDF}(\text{recuperación}) = \log \frac{3}{2} \approx 0.41\).</li>
</ul>

<p>
Para d1: \(\text{TF} = 3\) (o \(\log(1+3)\) si se suaviza). Peso \(\approx 3 \times 0.41 \approx 1.23\).
Para d2: \(\text{TF} = 1\). Peso \(\approx 1 \times 0.41 \approx 0.41\).
</p>

<p>
El término "recuperación" aporta más peso en d1 que en d2 porque es más frecuente
en d1; y aporta más que un término que aparezca en los 3 documentos (IDF menor).
</p>
</div>
</li>
</ul>
</div>
<div id="outline-container-org6625600" class="outline-4">
<h4 id="org6625600">Modelo probabilístico (BM25, etc.)</h4>
<div class="outline-text-4" id="text-org6625600">
</div>
<ul class="org-ul">
<li><a id="org424fcd4"></a>Idea<br />
<div class="outline-text-5" id="text-org424fcd4">
<ul class="org-ul">
<li>Estimar la probabilidad de que un documento sea relevante dada la consulta.</li>
<li>Ordenar por \(P(\text{relevante} \mid d, q)\).</li>
</ul>
</div>
</li>
<li><a id="orgb79fd4b"></a>BM25<br />
<div class="outline-text-5" id="text-orgb79fd4b">
<ul class="org-ul">
<li>Extensión del modelo probabilístico; muy usado en práctica.</li>
<li>Incorpora longitud del documento (penalización por documentos muy largos).</li>
<li>Parámetros: \(k_1\), \(b\) para ajustar saturación de TF y efecto de la longitud.</li>
</ul>
</div>
</li>
<li><a id="org04cd8d5"></a>Ejemplo intuitivo BM25<br />
<div class="outline-text-5" id="text-org04cd8d5">
<p>
Documento A: 50 palabras, "recuperación" aparece 2 veces.
Documento B: 500 palabras, "recuperación" aparece 10 veces.
</p>

<p>
En TF bruto, B tendría mayor TF. Pero BM25:
</p>
<ul class="org-ul">
<li>Satura el TF: 10 apariciones no aportan 5 veces más que 2 (crecimiento sublineal).</li>
<li>Penaliza por longitud: un documento muy largo tiene más probabilidad de contener
el término por casualidad; BM25 reduce el peso según la longitud respecto a la
media del corpus. Así, un documento corto y focalizado (A) puede rankear más alto.</li>
</ul>
</div>
</li>
</ul>
</div>
<div id="outline-container-orgca90d4a" class="outline-4">
<h4 id="orgca90d4a">Modelos basados en lenguaje (Language Models)</h4>
<div class="outline-text-4" id="text-orgca90d4a">
</div>
<ul class="org-ul">
<li><a id="org3b5fc48"></a>Idea<br />
<div class="outline-text-5" id="text-org3b5fc48">
<ul class="org-ul">
<li>Modelar cada documento como una distribución de probabilidad sobre términos (language model).</li>
<li>La consulta se "genera" con cierta probabilidad desde el modelo del documento.</li>
<li>Ranking por \(P(q \mid d)\) o variantes (e.g. mezcla con modelo de colección).</li>
</ul>
</div>
</li>
<li><a id="org3fdb8d0"></a>Ventajas<br />
<div class="outline-text-5" id="text-org3fdb8d0">
<ul class="org-ul">
<li>Base teórica sólida (probabilidad).</li>
<li>Permite suavizado (smoothing) para términos no vistos.</li>
</ul>
</div>
</li>
</ul>
</div>
<div id="outline-container-orge02880f" class="outline-4">
<h4 id="orge02880f">Resumen comparativo</h4>
<div class="outline-text-4" id="text-orge02880f">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Modelo</th>
<th scope="col" class="org-left">Ranking</th>
<th scope="col" class="org-left">Complejidad</th>
<th scope="col" class="org-left">Uso típico</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Booleano</td>
<td class="org-left">No</td>
<td class="org-left">Baja</td>
<td class="org-left">Sistemas legados</td>
</tr>

<tr>
<td class="org-left">Vectorial</td>
<td class="org-left">Sí</td>
<td class="org-left">Media</td>
<td class="org-left">General, TF-IDF</td>
</tr>

<tr>
<td class="org-left">Probabilístico</td>
<td class="org-left">Sí</td>
<td class="org-left">Media</td>
<td class="org-left">BM25 en Elasticsearch</td>
</tr>

<tr>
<td class="org-left">Language Model</td>
<td class="org-left">Sí</td>
<td class="org-left">Mayor</td>
<td class="org-left">Investigación, NLP</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="outline-container-org8c18245" class="outline-3">
<h3 id="org8c18245">Evaluación de la recuperación</h3>
<div class="outline-text-3" id="text-org8c18245">
<p>
La evaluación permite comparar sistemas o configuraciones y decidir mejoras.
</p>
</div>
<div id="outline-container-orgc13487b" class="outline-4">
<h4 id="orgc13487b">Conjuntos de prueba (test collections)</h4>
<div class="outline-text-4" id="text-orgc13487b">
</div>
<ul class="org-ul">
<li><a id="orgc4c88a9"></a>Componentes<br />
<div class="outline-text-5" id="text-orgc4c88a9">
<ol class="org-ol">
<li><b>Corpus</b>: conjunto de documentos.</li>
<li><b>Consultas</b> (topics): necesidades de información representativas.</li>
<li><b>Juicios de relevancia</b> (qrels): para cada par (consulta, documento), si el documento es relevante o no (idealmente por humanos).</li>
</ol>
</div>
</li>
<li><a id="org366e12b"></a>Ejemplos de colecciones<br />
<div class="outline-text-5" id="text-org366e12b">
<ul class="org-ul">
<li>Cranfield, TREC, CLEF, NTCIR: estándar en investigación.</li>
<li>En la industria: datos propios con juicios implícitos (clics, tiempo en página).</li>
</ul>
</div>
</li>
<li><a id="org63e48fd"></a>Ejemplo de colección mínima<br />
<div class="outline-text-5" id="text-org63e48fd">
<ul class="org-ul">
<li><b>Corpus</b>: 5 documentos d1, d2, d3, d4, d5.</li>
<li><b>Consulta</b>: "evaluación de la recuperación".</li>
<li><p>
<b>Juicios de relevancia</b> (qrels): un evaluador humano indica qué documentos son relevantes:
</p>
<ul class="org-ul">
<li>d1: no relevante.</li>
<li>d2: relevante.</li>
<li>d3: relevante.</li>
<li>d4: no relevante.</li>
<li>d5: relevante.</li>
</ul>
<p>
Total relevante = 3 (d2, d3, d5).
</p></li>
</ul>
</div>
</li>
</ul>
</div>
<div id="outline-container-org50444d5" class="outline-4">
<h4 id="org50444d5">Métricas principales</h4>
<div class="outline-text-4" id="text-org50444d5">
</div>
<ul class="org-ul">
<li><a id="orgb77a108"></a>Precisión (Precision)<br />
<div class="outline-text-5" id="text-orgb77a108">
<p>
\[
P = \frac{\text{documentos relevantes recuperados}}{\text{total de documentos recuperados}}
\]
</p>
<ul class="org-ul">
<li>"De lo que devolví, ¿cuánto era relevante?"</li>
</ul>
</div>
</li>
<li><a id="org08a75a6"></a>Recall (Exhaustividad)<br />
<div class="outline-text-5" id="text-org08a75a6">
<p>
\[
R = \frac{\text{documentos relevantes recuperados}}{\text{total de documentos relevantes en el corpus}}
\]
</p>
<ul class="org-ul">
<li>"De todo lo relevante, ¿cuánto recuperé?"</li>
</ul>
</div>
</li>
<li><a id="org4e42bdd"></a>F1 (F-measure)<br />
<div class="outline-text-5" id="text-org4e42bdd">
<ul class="org-ul">
<li>Media armónica de precisión y recall:</li>
</ul>
<p>
\[
F_1 = 2 \frac{P \cdot R}{P + R}
\]
</p>
</div>
</li>
<li><a id="org783f032"></a>Precisión en k (P@k)<br />
<div class="outline-text-5" id="text-org783f032">
<ul class="org-ul">
<li>Precisión considerando solo los primeros \(k\) resultados.</li>
<li>Útil cuando el usuario solo mira los primeros resultados (p. ej. P@10).</li>
</ul>
</div>
</li>
<li><a id="orgd5cba2a"></a>Ejemplo numérico: precisión, recall, F1, P@k<br />
<div class="outline-text-5" id="text-orgd5cba2a">
<p>
Con la colección anterior: 3 documentos relevantes (d2, d3, d5). Supongamos que
el sistema devuelve, en orden: [d2, d1, d3, d4, d5].
</p>

<ul class="org-ul">
<li><b>Recuperados</b>: 5. <b>Relevantes recuperados</b>: d2, d3, d5 \(\Rightarrow\) 3.</li>
<li>Precisión \(P = 3/5 = 0.6\) (de los 5 devueltos, 3 son relevantes).</li>
<li>Recall \(R = 3/3 = 1.0\) (recuperamos todos los relevantes).</li>
<li>\(F_1 = 2 \cdot \frac{0.6 \cdot 1}{0.6 + 1} = \frac{1.2}{1.6} \approx 0.75\).</li>
</ul>

<p>
P@k:
</p>
<ul class="org-ul">
<li>P@1 = 1/1 = 1 (el primero es relevante).</li>
<li>P@2 = 1/2 = 0.5 (de los dos primeros, uno es relevante).</li>
<li>P@3 = 2/3 \(\approx\) 0.67.</li>
<li>P@5 = 3/5 = 0.6.</li>
</ul>
</div>
</li>
<li><a id="orgab9ab0e"></a>Precisión promedia (AP) y MAP<br />
<div class="outline-text-5" id="text-orgab9ab0e">
<ul class="org-ul">
<li><b>Average Precision (AP)</b>: para una consulta, promedio de precisiones en cada punto de recall donde se recupera un documento relevante.</li>
<li><b>MAP (Mean Average Precision)</b>: media de AP sobre todas las consultas.</li>
<li>Muy usada en competiciones y literatura.</li>
</ul>
</div>
</li>
<li><a id="org9430e73"></a>Ejemplo: Average Precision (AP)<br />
<div class="outline-text-5" id="text-org9430e73">
<p>
Mismo ranking: [d2, d1, d3, d4, d5]; relevantes = {d2, d3, d5}.
</p>

<p>
En las posiciones 1, 2, 3, 4, 5 vamos marcando si el documento es relevante (R) o no (N):
pos 1: d2 R \(\rightarrow\) precisión hasta aquí = 1/1 = 1.0
pos 2: d1 N
pos 3: d3 R \(\rightarrow\) precisión hasta aquí = 2/3 \(\approx\) 0.67
pos 4: d4 N
pos 5: d5 R \(\rightarrow\) precisión hasta aquí = 3/5 = 0.6
</p>

<p>
AP = promedio de las precisiones en cada "hit" relevante:
\[
\text{AP} = \frac{1 + 2/3 + 3/5}{3} = \frac{1 + 0.67 + 0.6}{3} \approx 0.76
\]
Un ranking perfecto [d2, d3, d5, &#x2026;] tendría AP = 1.0.
</p>
</div>
</li>
<li><a id="org4617add"></a>NDCG (Normalized Discounted Cumulative Gain)<br />
<div class="outline-text-5" id="text-org4617add">
<ul class="org-ul">
<li>Tiene en cuenta la <b>posición</b> en el ranking: más relevante arriba es mejor.</li>
<li>El "gain" se descuenta según la posición (discounted).</li>
<li>NDCG normaliza por el DCG ideal (ranking perfecto).</li>
<li>Adecuado cuando hay grados de relevancia (no solo relevante/no relevante).</li>
</ul>
</div>
<ul class="org-ul">
<li><a id="org12b458e"></a>Ejemplo NDCG (intuitivo)<br />
<div class="outline-text-6" id="text-org12b458e">
<p>
Supongamos relevancia en escala 0–3: 0 = no relevante, 3 = muy relevante.
Ranking del sistema: pos1 rel=2, pos2 rel=0, pos3 rel=3, pos4 rel=1.
</p>

<p>
DCG suma el "gain" (relevancia) descontado por la posición: \(\frac{\text{rel}}{\log_2(\text{pos}+1)}\).
</p>
<ul class="org-ul">
<li>Pos 1: \(2/\log_2 2 = 2\)</li>
<li>Pos 2: \(0\)</li>
<li>Pos 3: \(3/\log_2 4 = 3/2 = 1.5\)</li>
<li>Pos 4: \(1/\log_2 5 \approx 0.43\)</li>
</ul>
<p>
DCG \(\approx 2 + 0 + 1.5 + 0.43 \approx 3.93\).
</p>

<p>
El DCG ideal ordenaría por relevancia descendente: [3, 2, 1, 0] \(\Rightarrow\) IDCG.
NDCG = DCG / IDCG (normalizado entre 0 y 1). Así se premia que los más relevantes
estén arriba en el ranking.
</p>
</div>
</li>
</ul>
</li>
</ul>
</div>
<div id="outline-container-org53b4cee" class="outline-4">
<h4 id="org53b4cee">Evaluación con usuarios</h4>
<div class="outline-text-4" id="text-org53b4cee">
<ul class="org-ul">
<li><b>Estudios de usabilidad</b>: tiempo para completar tareas, satisfacción, número de clics.</li>
<li><b>A/B testing</b>: comparar dos versiones del sistema con usuarios reales.</li>
<li><b>Juicios de relevancia</b>: coste humano; a veces se usan juicios implícitos (clics, dwell time).</li>
</ul>
</div>
</div>
<div id="outline-container-orgaea5f0b" class="outline-4">
<h4 id="orgaea5f0b">Trade-off precisión vs. recall</h4>
<div class="outline-text-4" id="text-orgaea5f0b">
<ul class="org-ul">
<li>Aumentar resultados mostrados \(\Rightarrow\) recall sube, precisión puede bajar.</li>
<li>Ser más estricto en el ranking \(\Rightarrow\) precisión sube, recall puede bajar.</li>
<li>Depende del dominio: en legal/medicina a veces se prioriza recall; en web comercial, precisión en los primeros resultados.</li>
</ul>
</div>
<ul class="org-ul">
<li><a id="org8860342"></a>Ejemplo<br />
<div class="outline-text-5" id="text-org8860342">
<pre class="example" id="orge2840b1">
Corpus: 100 documentos, 10 relevantes para la consulta.

- Si el sistema devuelve solo los 5 primeros y los 5 son relevantes:
  P = 5/5 = 1.0, R = 5/10 = 0.5 (precisión perfecta, recall bajo).

- Si devuelve 50 documentos y 10 son relevantes:
  P = 10/50 = 0.2, R = 10/10 = 1.0 (recall perfecto, precisión baja).

- Objetivo típico: devolver unos 10–20 resultados con varios relevantes arriba,
  equilibrando P y R (p. ej. P@10 alto y recall razonable).
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-orgcbc3012" class="outline-3">
<h3 id="orgcbc3012">Referencias</h3>
<div class="outline-text-3" id="text-orgcbc3012">
<ul class="org-ul">
<li>Manning, Raghavan, Schütze: <i>Information Retrieval: Implementing and Evaluating Search Engines</i> (MIT Press).</li>
<li>Baeza-Yates, Ribeiro-Neto: <i>Modern Information Retrieval</i> (Addison Wesley).</li>
<li>TREC: <code>https://trec.nist.gov/</code> (benchmarks y métricas).</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org9c24806" class="outline-2">
<h2 id="org9c24806">Ejemplos IRS — Recuperación de información con feeds RSS</h2>
<div class="outline-text-2" id="text-org9c24806">
<p>
Un <b>Sistema de Recuperación de Información</b> (IRS, o IR en inglés) es un sistema
que permite almacenar, organizar y recuperar documentos (o ítems) relevantes
ante una <b>consulta</b> del usuario. Los componentes típicos son:
</p>

<ol class="org-ol">
<li><b>Colección</b>: conjunto de documentos (en nuestras actividades = ítems de feeds RSS).</li>
<li><b>Consulta</b>: necesidad de información expresada por el usuario (query).</li>
<li><b>Proceso de recuperación</b>: matching entre consulta y documentos (ranking, filtrado).</li>
<li><b>Interfaz</b>: forma en que el usuario formula consultas y ve resultados.</li>
</ol>

<p>
En estas actividades usaremos <b>feeds RSS</b> como colección de documentos: cada
entrada (item) es un “documento” con título, descripción, fecha y enlace.
Así practicamos extracción, limpieza e indexación como en un IRS real.
</p>
</div>
<div id="outline-container-org9bbfc76" class="outline-3">
<h3 id="org9bbfc76">Un buscador introductorio con feeds RSS</h3>
<div class="outline-text-3" id="text-org9bbfc76">
<p>
En este material construimos un <b>buscador muy sencillo</b> que usa <b>feeds RSS</b> como
fuente de documentos: tú escribes una consulta y el sistema te devuelve ítems
relevantes (título, enlace, fecha). Para que el buscador tenga algo que buscar,
primero hay que <b>encontrar URLs de feeds RSS</b>. Por eso la primera actividad es
usar <b>hacks de búsqueda</b> en Google (o DuckDuckGo, etc.) para descubrir esas
páginas; después extraemos, limpiamos e indexamos esos feeds y probamos la
búsqueda.
</p>
</div>
<div id="outline-container-org422f84c" class="outline-4">
<h4 id="org422f84c">Hacks de búsqueda: encontrar páginas y URLs de feeds RSS</h4>
<div class="outline-text-4" id="text-org422f84c">
<p>
El uso de operadores de búsqueda (también conocidos como hacks de
búsqueda) permite refinar las consultas en buscadores web con el
objetivo de localizar páginas que publican feeds RSS. Mediante estos
operadores es posible identificar de forma eficiente las URLs de
dichos feeds, los cuales constituyen la fuente primaria de documentos
para el sistema de recuperación de información. Sin una colección de
feeds RSS adecuadamente identificada, no es posible construir ni
alimentar el buscador de noticias propuesto.
</p>
</div>
<ul class="org-ul">
<li><a id="org796cce8"></a>Operadores útiles Google Search<br />
<div class="outline-text-5" id="text-org796cce8">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Operador</th>
<th scope="col" class="org-left">Ejemplo</th>
<th scope="col" class="org-left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">site:</td>
<td class="org-left">site:bbc.com rss</td>
<td class="org-left">Busca RSS dentro de un dominio</td>
</tr>

<tr>
<td class="org-left">inurl:</td>
<td class="org-left">inurl:rss noticias</td>
<td class="org-left">Busca URLs que contengan "rss"</td>
</tr>

<tr>
<td class="org-left">intitle:</td>
<td class="org-left">intitle:rss technology</td>
<td class="org-left">Busca páginas con "rss" en el título</td>
</tr>

<tr>
<td class="org-left">filetype:</td>
<td class="org-left">filetype:xml rss</td>
<td class="org-left">Localiza archivos XML (feeds)</td>
</tr>

<tr>
<td class="org-left">"frase exacta"</td>
<td class="org-left">"RSS feed" site:news</td>
<td class="org-left">Coincidencia exacta</td>
</tr>

<tr>
<td class="org-left">OR</td>
<td class="org-left">rss OR "xml feed"</td>
<td class="org-left">Búsqueda alternativa</td>
</tr>

<tr>
<td class="org-left">-</td>
<td class="org-left">rss -podcast</td>
<td class="org-left">Excluye términos</td>
</tr>

<tr>
<td class="org-left">allinurl:</td>
<td class="org-left">allinurl:rss feeds news</td>
<td class="org-left">Todas las palabras en la URL</td>
</tr>
</tbody>
</table>
</div>
</li>
<li><a id="org4f875ed"></a>Operadores útiles DuckDuckGo<br />
<div class="outline-text-5" id="text-org4f875ed">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Operador</th>
<th scope="col" class="org-left">Ejemplo</th>
<th scope="col" class="org-left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">site:</td>
<td class="org-left">site:reuters.com rss</td>
<td class="org-left">Limita búsqueda a un dominio</td>
</tr>

<tr>
<td class="org-left">inurl:</td>
<td class="org-left">inurl:rss</td>
<td class="org-left">Busca "rss" en la URL</td>
</tr>

<tr>
<td class="org-left">intitle:</td>
<td class="org-left">intitle:"rss feed"</td>
<td class="org-left">Busca en el título</td>
</tr>

<tr>
<td class="org-left">filetype:</td>
<td class="org-left">filetype:xml rss</td>
<td class="org-left">Archivos XML</td>
</tr>

<tr>
<td class="org-left">"frase exacta"</td>
<td class="org-left">"news rss feed"</td>
<td class="org-left">Coincidencia exacta</td>
</tr>

<tr>
<td class="org-left">-</td>
<td class="org-left">rss -video</td>
<td class="org-left">Excluir términos</td>
</tr>
</tbody>
</table>
</div>
</li>
<li><a id="org1e8f558"></a>Bing Search<br />
<div class="outline-text-5" id="text-org1e8f558">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Operador</th>
<th scope="col" class="org-left">Ejemplo</th>
<th scope="col" class="org-left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">site:</td>
<td class="org-left">site:elpais.com rss</td>
<td class="org-left">Buscar RSS por dominio</td>
</tr>

<tr>
<td class="org-left">inurl:</td>
<td class="org-left">inurl:feed</td>
<td class="org-left">URLs que contienen "feed"</td>
</tr>

<tr>
<td class="org-left">intitle:</td>
<td class="org-left">intitle:rss</td>
<td class="org-left">Buscar en títulos</td>
</tr>

<tr>
<td class="org-left">filetype:</td>
<td class="org-left">filetype:xml rss</td>
<td class="org-left">Feeds XML</td>
</tr>

<tr>
<td class="org-left">"frase exacta"</td>
<td class="org-left">"rss noticias"</td>
<td class="org-left">Coincidencia exacta</td>
</tr>

<tr>
<td class="org-left">-</td>
<td class="org-left">rss -audio</td>
<td class="org-left">Exclusión</td>
</tr>
</tbody>
</table>
</div>
</li>
<li><a id="orgd5edea0"></a>Hacks combinados (muy útiles para IRS)<br />
<div class="outline-text-5" id="text-orgd5edea0">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Consulta ejemplo</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">site:news "rss feed"</td>
</tr>

<tr>
<td class="org-left">inurl:rss filetype:xml</td>
</tr>

<tr>
<td class="org-left">site:.org intitle:rss</td>
</tr>

<tr>
<td class="org-left">site:gov filetype:xml rss</td>
</tr>

<tr>
<td class="org-left">"rss feed" "news"</td>
</tr>
</tbody>
</table>
</div>
</li>
</ul>
</div>
<div id="outline-container-org24b8801" class="outline-4">
<h4 id="org24b8801">Consultas de ejemplo para probar en el buscador</h4>
<div class="outline-text-4" id="text-org24b8801">
<pre class="example" id="org7fd4823">
inurl:rss noticias tecnología
inurl:feed blog educación
"rss" "suscribirse" site:elpais.com
filetype:xml rss
inurl:atom feed
</pre>

<p>
Desde el punto de vista del IRS, la <b>consulta</b> que se escribe en el buscador
(p. ej. <code>inurl:rss noticias</code>) es la “consulta” del sistema de recuperación; los
<b>resultados</b> que muestra Google (o DuckDuckGo, Bing) son la “interfaz de
búsqueda”: un listado de documentos (páginas) que el modelo de recuperación del
buscador consideró relevantes. Las URLs de feeds que el usuario anota pasan a
ser la <b>colección</b> que alimentará el pequeño buscador sobre RSS.
</p>
</div>
</div>
</div>
<div id="outline-container-org5e9a442" class="outline-3">
<h3 id="org5e9a442">Extraer datos de un feed RSS y guardarlos</h3>
<div class="outline-text-3" id="text-org5e9a442">
<p>
En un IRS la <b>colección</b> es el conjunto de documentos sobre el que el sistema
responde a las consultas. Sin colección no hay recuperación. En nuestro caso,
los “documentos” son los <b>ítems de un feed RSS</b>: cada entrada del feed (título,
enlace, fecha, resumen) equivale a un documento indexable. Extraer esos ítems
y representarlos en una estructura uniforme (p. ej. lista de diccionarios) es
el primer paso para que el IRS pueda comparar después la consulta del usuario
contra cada documento. Los feeds RSS son idóneos porque ya vienen estructurados
(XML con <code>&lt;item&gt;</code> o entradas Atom), con campos de texto (título, descripción)
que el IRS puede usar para búsqueda.
</p>

<ul class="org-ul">
<li><b>IRS — Colección</b>: la lista de ítems extraídos del feed <b>es</b> la colección del
sistema.</li>
<li><b>RSS</b>: el feed es la fuente externa; cada <code>entry</code> o <code>&lt;item&gt;</code> es un documento.</li>
<li><b>Código</b>: descargar el feed (HTTP), parsear el XML y mapear cada ítem a
campos (título, link, fecha, resumen) construye esa colección en memoria.</li>
</ul>

<p>
La función <code>fetch_rss(url, max_entries)</code> recibe la URL del feed y un límite de
entradas. <code>feedparser.parse(url)</code> descarga y parsea el feed (RSS o Atom) y
devuelve un objeto con <code>.entries</code>: lista de ítems. Para cada entrada se
extraen <code>title</code>, <code>link</code>, <code>published</code> (o <code>updated</code>) y <code>summary</code> (o <code>description</code>).
Esos campos son los que un IRS necesita para identificar el documento y para
indexar texto (título y resumen). El resultado es una lista de diccionarios:
cada uno representa <b>un documento de la colección</b>. Si hay error de red o XML
inválido, se devuelve un ítem con <code>error</code> para no romper el flujo. Al final,
<code>items</code> es la colección sobre la que más adelante se aplicará la consulta.
</p>

<div class="org-src-container">
<pre class="src src-python"><span style="color: #fb4934;">import</span> feedparser
<span style="color: #fb4934;">import</span> json

<span style="color: #fb4934;">def</span> <span style="color: #b8bb26;">fetch_rss</span><span style="color: #fe8019;">(</span>url, max_entries=20<span style="color: #fe8019;">)</span>:
<span style="background-color: #3c3836;"> </span>   <span style="color: #dfd2b8;">"""Extrae &#237;tems de un feed RSS/Atom. Devuelve lista de diccionarios."""</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">try</span>:
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">feed</span> = feedparser.parse<span style="color: #fe8019;">(</span>url<span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">items</span> = <span style="color: #fe8019;">[]</span>
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">for</span> e <span style="color: #fb4934;">in</span> feed.entries<span style="color: #fe8019;">[</span>:max_entries<span style="color: #fe8019;">]</span>:
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   items.append<span style="color: #fe8019;">(</span><span style="color: #b16286;">{</span>
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #b8bb26;">"title"</span>: e.get<span style="color: #b8bb26;">(</span><span style="color: #b8bb26;">"title"</span>, <span style="color: #b8bb26;">""</span><span style="color: #b8bb26;">)</span>,
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #b8bb26;">"link"</span>: e.get<span style="color: #b8bb26;">(</span><span style="color: #b8bb26;">"link"</span>, <span style="color: #b8bb26;">""</span><span style="color: #b8bb26;">)</span>,
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #b8bb26;">"published"</span>: e.get<span style="color: #b8bb26;">(</span><span style="color: #b8bb26;">"published"</span>, e.get<span style="color: #83a598;">(</span><span style="color: #b8bb26;">"updated"</span>, <span style="color: #b8bb26;">""</span><span style="color: #83a598;">)</span><span style="color: #b8bb26;">)</span>,
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #b8bb26;">"summary"</span>: e.get<span style="color: #b8bb26;">(</span><span style="color: #b8bb26;">"summary"</span>, e.get<span style="color: #83a598;">(</span><span style="color: #b8bb26;">"description"</span>, <span style="color: #b8bb26;">""</span><span style="color: #83a598;">)</span><span style="color: #b8bb26;">)</span>,
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #b16286;">}</span><span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">return</span> items
<span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">except</span> <span style="color: #fabd2f;">Exception</span> <span style="color: #fb4934;">as</span> err:
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">return</span> <span style="color: #fe8019;">[</span><span style="color: #b16286;">{</span><span style="color: #b8bb26;">"error"</span>: <span style="color: #fe8019;">str</span><span style="color: #b8bb26;">(</span>err<span style="color: #b8bb26;">)</span>, <span style="color: #b8bb26;">"url"</span>: url<span style="color: #b16286;">}</span><span style="color: #fe8019;">]</span>

<span style="color: #83a598;">url</span> = <span style="color: #b8bb26;">"https://feeds.elpais.com/mrss-s/pages/ep/site/elpais.com/section/mexico/portada"</span>
<span style="color: #83a598;">items</span> = fetch_rss<span style="color: #fe8019;">(</span>url, max_entries=15<span style="color: #fe8019;">)</span>
<span style="color: #fe8019;">print</span><span style="color: #fe8019;">(</span>json.dumps<span style="color: #b16286;">(</span>items, indent=2, ensure_ascii=<span style="color: #d3869b;">False</span><span style="color: #b16286;">)</span><span style="color: #fe8019;">)</span>
</pre>
</div>

<p>
Ejemplo con mas de una URL 
</p>

<div class="org-src-container">
<pre class="src src-python"><span style="color: #fb4934;">import</span> feedparser
<span style="color: #fb4934;">import</span> json

<span style="color: #fb4934;">def</span> <span style="color: #b8bb26;">fetch_rss</span><span style="color: #fe8019;">(</span>url, max_entries=20<span style="color: #fe8019;">)</span>:
<span style="background-color: #3c3836;"> </span>   <span style="color: #dfd2b8;">"""Extrae &#237;tems de un feed RSS/Atom."""</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">feed</span> = feedparser.parse<span style="color: #fe8019;">(</span>url<span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">items</span> = <span style="color: #fe8019;">[]</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">for</span> e <span style="color: #fb4934;">in</span> feed.entries<span style="color: #fe8019;">[</span>:max_entries<span style="color: #fe8019;">]</span>:
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   items.append<span style="color: #fe8019;">(</span><span style="color: #b16286;">{</span>
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #b8bb26;">"title"</span>: e.get<span style="color: #b8bb26;">(</span><span style="color: #b8bb26;">"title"</span>, <span style="color: #b8bb26;">""</span><span style="color: #b8bb26;">)</span>,
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #b8bb26;">"link"</span>: e.get<span style="color: #b8bb26;">(</span><span style="color: #b8bb26;">"link"</span>, <span style="color: #b8bb26;">""</span><span style="color: #b8bb26;">)</span>,
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #b8bb26;">"published"</span>: e.get<span style="color: #b8bb26;">(</span><span style="color: #b8bb26;">"published"</span>, e.get<span style="color: #83a598;">(</span><span style="color: #b8bb26;">"updated"</span>, <span style="color: #b8bb26;">""</span><span style="color: #83a598;">)</span><span style="color: #b8bb26;">)</span>,
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #b8bb26;">"summary"</span>: e.get<span style="color: #b8bb26;">(</span><span style="color: #b8bb26;">"summary"</span>, e.get<span style="color: #83a598;">(</span><span style="color: #b8bb26;">"description"</span>, <span style="color: #b8bb26;">""</span><span style="color: #83a598;">)</span><span style="color: #b8bb26;">)</span>,
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #b8bb26;">"source"</span>: url
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #b16286;">}</span><span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">return</span> items

<span style="color: #928374;"># </span><span style="color: #928374;">&#128313; Lista de feeds
</span><span style="color: #83a598;">urls</span> = <span style="color: #fe8019;">[</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #b8bb26;">"https://feeds.elpais.com/mrss-s/pages/ep/site/elpais.com/section/mexico/portada"</span>,
<span style="background-color: #3c3836;"> </span>   <span style="color: #b8bb26;">"https://www.reddit.com/r/python/.rss"</span>,
<span style="background-color: #3c3836;"> </span>   <span style="color: #b8bb26;">"https://hnrss.org/frontpage"</span>
<span style="color: #fe8019;">]</span>

<span style="color: #83a598;">all_items</span> = <span style="color: #fe8019;">[]</span>

<span style="color: #fb4934;">for</span> url <span style="color: #fb4934;">in</span> urls:
<span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">try</span>:
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   all_items.extend<span style="color: #fe8019;">(</span>fetch_rss<span style="color: #b16286;">(</span>url, max_entries=10<span style="color: #b16286;">)</span><span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">except</span> <span style="color: #fabd2f;">Exception</span> <span style="color: #fb4934;">as</span> err:
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   all_items.append<span style="color: #fe8019;">(</span><span style="color: #b16286;">{</span><span style="color: #b8bb26;">"error"</span>: <span style="color: #fe8019;">str</span><span style="color: #b8bb26;">(</span>err<span style="color: #b8bb26;">)</span>, <span style="color: #b8bb26;">"url"</span>: url<span style="color: #b16286;">}</span><span style="color: #fe8019;">)</span>

<span style="color: #fe8019;">print</span><span style="color: #fe8019;">(</span>json.dumps<span style="color: #b16286;">(</span>all_items, indent=2, ensure_ascii=<span style="color: #d3869b;">False</span><span style="color: #b16286;">)</span><span style="color: #fe8019;">)</span>
</pre>
</div>


<p>
Ejemplo clasificando la salida
</p>

<div class="org-src-container">
<pre class="src src-python"><span style="color: #fb4934;">import</span> feedparser
<span style="color: #fb4934;">import</span> json

<span style="color: #fb4934;">def</span> <span style="color: #b8bb26;">fetch_rss</span><span style="color: #fe8019;">(</span>url, max_entries=20<span style="color: #fe8019;">)</span>:
<span style="background-color: #3c3836;"> </span>   <span style="color: #dfd2b8;">"""Devuelve una lista de &#237;tems de un feed RSS/Atom."""</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">feed</span> = feedparser.parse<span style="color: #fe8019;">(</span>url<span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">items</span> = <span style="color: #fe8019;">[]</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">for</span> e <span style="color: #fb4934;">in</span> feed.entries<span style="color: #fe8019;">[</span>:max_entries<span style="color: #fe8019;">]</span>:
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   items.append<span style="color: #fe8019;">(</span><span style="color: #b16286;">{</span>
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #b8bb26;">"title"</span>: e.get<span style="color: #b8bb26;">(</span><span style="color: #b8bb26;">"title"</span>, <span style="color: #b8bb26;">""</span><span style="color: #b8bb26;">)</span>,
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #b8bb26;">"link"</span>: e.get<span style="color: #b8bb26;">(</span><span style="color: #b8bb26;">"link"</span>, <span style="color: #b8bb26;">""</span><span style="color: #b8bb26;">)</span>,
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #b8bb26;">"published"</span>: e.get<span style="color: #b8bb26;">(</span><span style="color: #b8bb26;">"published"</span>, e.get<span style="color: #83a598;">(</span><span style="color: #b8bb26;">"updated"</span>, <span style="color: #b8bb26;">""</span><span style="color: #83a598;">)</span><span style="color: #b8bb26;">)</span>,
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #b8bb26;">"summary"</span>: e.get<span style="color: #b8bb26;">(</span><span style="color: #b8bb26;">"summary"</span>, e.get<span style="color: #83a598;">(</span><span style="color: #b8bb26;">"description"</span>, <span style="color: #b8bb26;">""</span><span style="color: #83a598;">)</span><span style="color: #b8bb26;">)</span>,
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #b16286;">}</span><span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">return</span> items

<span style="color: #928374;"># </span><span style="color: #928374;">&#128313; Lista de feeds RSS / Atom
</span><span style="color: #83a598;">urls</span> = <span style="color: #fe8019;">[</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #b8bb26;">"https://feeds.elpais.com/mrss-s/pages/ep/site/elpais.com/section/mexico/portada"</span>,
<span style="background-color: #3c3836;"> </span>   <span style="color: #b8bb26;">"https://www.reddit.com/r/python/.rss"</span>,
<span style="background-color: #3c3836;"> </span>   <span style="color: #b8bb26;">"https://hnrss.org/frontpage"</span>
<span style="color: #fe8019;">]</span>

<span style="color: #928374;">#  </span><span style="color: #928374;">Diccionario: una clave por feed
</span><span style="color: #83a598;">feeds_data</span> = <span style="color: #fe8019;">{}</span>

<span style="color: #fb4934;">for</span> url <span style="color: #fb4934;">in</span> urls:
<span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">try</span>:
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">feeds_data</span><span style="color: #fe8019;">[</span>url<span style="color: #fe8019;">]</span> = fetch_rss<span style="color: #fe8019;">(</span>url, max_entries=10<span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">except</span> <span style="color: #fabd2f;">Exception</span> <span style="color: #fb4934;">as</span> err:
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">feeds_data</span><span style="color: #fe8019;">[</span>url<span style="color: #fe8019;">]</span> = <span style="color: #fe8019;">[</span><span style="color: #b16286;">{</span><span style="color: #b8bb26;">"error"</span>: <span style="color: #fe8019;">str</span><span style="color: #b8bb26;">(</span>err<span style="color: #b8bb26;">)</span><span style="color: #b16286;">}</span><span style="color: #fe8019;">]</span>

<span style="color: #928374;">#  </span><span style="color: #928374;">Salida legible en Org / consola
</span><span style="color: #fe8019;">print</span><span style="color: #fe8019;">(</span>json.dumps<span style="color: #b16286;">(</span>feeds_data, indent=2, ensure_ascii=<span style="color: #d3869b;">False</span><span style="color: #b16286;">)</span><span style="color: #fe8019;">)</span>
</pre>
</div>


<p>
Guardar en json
</p>

<div class="org-src-container">
<pre class="src src-python"><span style="color: #fb4934;">import</span> feedparser
<span style="color: #fb4934;">import</span> json

<span style="color: #fb4934;">def</span> <span style="color: #b8bb26;">fetch_rss</span><span style="color: #fe8019;">(</span>url, max_entries=20<span style="color: #fe8019;">)</span>:
<span style="background-color: #3c3836;"> </span>   <span style="color: #dfd2b8;">"""Devuelve una lista de &#237;tems de un feed RSS/Atom."""</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">feed</span> = feedparser.parse<span style="color: #fe8019;">(</span>url<span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">items</span> = <span style="color: #fe8019;">[]</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">for</span> e <span style="color: #fb4934;">in</span> feed.entries<span style="color: #fe8019;">[</span>:max_entries<span style="color: #fe8019;">]</span>:
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   items.append<span style="color: #fe8019;">(</span><span style="color: #b16286;">{</span>
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #b8bb26;">"title"</span>: e.get<span style="color: #b8bb26;">(</span><span style="color: #b8bb26;">"title"</span>, <span style="color: #b8bb26;">""</span><span style="color: #b8bb26;">)</span>,
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #b8bb26;">"link"</span>: e.get<span style="color: #b8bb26;">(</span><span style="color: #b8bb26;">"link"</span>, <span style="color: #b8bb26;">""</span><span style="color: #b8bb26;">)</span>,
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #b8bb26;">"published"</span>: e.get<span style="color: #b8bb26;">(</span><span style="color: #b8bb26;">"published"</span>, e.get<span style="color: #83a598;">(</span><span style="color: #b8bb26;">"updated"</span>, <span style="color: #b8bb26;">""</span><span style="color: #83a598;">)</span><span style="color: #b8bb26;">)</span>,
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #b8bb26;">"summary"</span>: e.get<span style="color: #b8bb26;">(</span><span style="color: #b8bb26;">"summary"</span>, e.get<span style="color: #83a598;">(</span><span style="color: #b8bb26;">"description"</span>, <span style="color: #b8bb26;">""</span><span style="color: #83a598;">)</span><span style="color: #b8bb26;">)</span>,
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #b16286;">}</span><span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">return</span> items

<span style="color: #928374;"># </span><span style="color: #928374;">&#128313; Lista de feeds RSS / Atom
</span><span style="color: #83a598;">urls</span> = <span style="color: #fe8019;">[</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #b8bb26;">"https://feeds.elpais.com/mrss-s/pages/ep/site/elpais.com/section/mexico/portada"</span>,
<span style="background-color: #3c3836;"> </span>   <span style="color: #b8bb26;">"https://www.reddit.com/r/python/.rss"</span>,
<span style="background-color: #3c3836;"> </span>   <span style="color: #b8bb26;">"https://hnrss.org/frontpage"</span>
<span style="color: #fe8019;">]</span>

<span style="color: #928374;">#  </span><span style="color: #928374;">Diccionario: una clave por feed
</span><span style="color: #83a598;">feeds_data</span> = <span style="color: #fe8019;">{}</span>

<span style="color: #fb4934;">for</span> url <span style="color: #fb4934;">in</span> urls:
<span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">try</span>:
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">feeds_data</span><span style="color: #fe8019;">[</span>url<span style="color: #fe8019;">]</span> = fetch_rss<span style="color: #fe8019;">(</span>url, max_entries=10<span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">except</span> <span style="color: #fabd2f;">Exception</span> <span style="color: #fb4934;">as</span> err:
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">feeds_data</span><span style="color: #fe8019;">[</span>url<span style="color: #fe8019;">]</span> = <span style="color: #fe8019;">[</span><span style="color: #b16286;">{</span><span style="color: #b8bb26;">"error"</span>: <span style="color: #fe8019;">str</span><span style="color: #b8bb26;">(</span>err<span style="color: #b8bb26;">)</span><span style="color: #b16286;">}</span><span style="color: #fe8019;">]</span>

<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   
<span style="color: #fb4934;">with</span> <span style="color: #fe8019;">open</span><span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"data.json"</span>, <span style="color: #b8bb26;">"w"</span>, encoding=<span style="color: #b8bb26;">"utf-8"</span><span style="color: #fe8019;">)</span> <span style="color: #fb4934;">as</span> f:
<span style="background-color: #3c3836;"> </span>   json.dump<span style="color: #fe8019;">(</span>feeds_data, f, indent=2, ensure_ascii=<span style="color: #d3869b;">False</span><span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   
<span style="color: #928374;">#  </span><span style="color: #928374;">Salida legible en Org / consola
</span><span style="color: #fe8019;">print</span><span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"Salida del JSON"</span><span style="color: #fe8019;">)</span>
</pre>
</div>

<pre class="example">
Salida del JSON
</pre>
</div>
</div>
<div id="outline-container-orgaf1bdef" class="outline-3">
<h3 id="orgaf1bdef">Limpieza de texto (normalización para el IRS)</h3>
<div class="outline-text-3" id="text-orgaf1bdef">
<p>
Los feeds RSS suelen incluir en título y resumen <b>HTML</b> (etiquetas <code>&lt;p&gt;</code>, <code>&lt;a&gt;</code>,
etc.), mayúsculas/minúsculas mezcladas y signos de puntuación. Si el IRS
busca la palabra “python” en el texto crudo, no encontrará “Python” ni
“&lt;em&gt;python&lt;/em&gt;”. La <b>normalización</b> (limpieza) hace que todos los documentos
y la consulta compartan el mismo “alfabeto”: minúsculas, sin HTML, sin
caracteres que no aporten para la búsqueda. Así la comparación consulta–documento
es consistente y el <b>modelo booleano</b> (palabras exactas) y el <b>vectorial</b> (conteo
de términos) pueden aplicarse sobre una representación uniforme del texto.
</p>


<ul class="org-ul">
<li><b>IRS</b>: la normalización es una etapa típica de <b>indexación</b>; el índice se
construye sobre el texto limpio, no sobre el raw.</li>
<li><b>RSS</b>: los campos <code>title</code> y <code>summary~/~description</code> suelen venir en HTML;
<code>text_clean</code> es la versión “indexable” de ese contenido.</li>
<li><b>Código</b>: <code>clean_text</code> transforma una cadena en texto normalizado;
<code>normalize_items</code> añade a cada documento de la colección el campo <code>text_clean</code>
(título + resumen concatenados y limpios).</li>
</ul>

<p>
clean<sub>text</sub>(text)~: (1) quita etiquetas HTML con <code>re.sub(r"&lt;[^&gt;]+&gt;", " ", text)</code>;
(2) deja solo letras, números y espacios con <code>re.sub(r"[^\w\s]", " ", text,
flags=re.UNICODE)</code>; (3) colapsa espacios y pasa a minúsculas con
<code>.strip().lower()</code>. El resultado es una sola cadena en minúsculas, sin HTML ni
puntuación, lista para comparar con la consulta. <code>normalize_items(items)</code>
recorre cada ítem de la colección, concatena título y resumen limpios en
<code>text_clean</code> y modifica el ítem in-place. A partir de aquí, la <b>recuperación</b>
(booleana o rankeada) usará <code>text_clean</code>, no el título/resumen originales.
Así se garantiza que la búsqueda “python” coincida con “Python” en el feed.
</p>

<div class="org-src-container">
<pre class="src src-python"><span style="color: #fb4934;">import</span> re

<span style="color: #fb4934;">def</span> <span style="color: #b8bb26;">clean_text</span><span style="color: #fe8019;">(</span>text<span style="color: #fe8019;">)</span>:
<span style="background-color: #3c3836;"> </span>   <span style="color: #dfd2b8;">"""Limpieza b&#225;sica: quitar tags HTML, solo letras y espacios, min&#250;sculas."""</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">if</span> <span style="color: #fb4934;">not</span> text:
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">return</span> <span style="color: #b8bb26;">""</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">text</span> = re.sub<span style="color: #fe8019;">(</span>r<span style="color: #b8bb26;">"&lt;[^&gt;]+&gt;"</span>, <span style="color: #b8bb26;">" "</span>, text<span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">text</span> = re.sub<span style="color: #fe8019;">(</span>r<span style="color: #b8bb26;">"[^\w\s]"</span>, <span style="color: #b8bb26;">" "</span>, text, flags=re.UNICODE<span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">text</span> = re.sub<span style="color: #fe8019;">(</span>r<span style="color: #b8bb26;">"\s+"</span>, <span style="color: #b8bb26;">" "</span>, text<span style="color: #fe8019;">)</span>.strip<span style="color: #fe8019;">()</span>.lower<span style="color: #fe8019;">()</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">return</span> text

<span style="color: #fb4934;">def</span> <span style="color: #b8bb26;">normalize_items</span><span style="color: #fe8019;">(</span>items<span style="color: #fe8019;">)</span>:
<span style="background-color: #3c3836;"> </span>   <span style="color: #dfd2b8;">"""A&#241;ade campo 'text_clean' a cada &#237;tem (t&#237;tulo + resumen limpios)."""</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">for</span> it <span style="color: #fb4934;">in</span> items:
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">if</span> <span style="color: #b8bb26;">"error"</span> <span style="color: #fb4934;">in</span> it:
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">continue</span>
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">title</span> = it.get<span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"title"</span>, <span style="color: #b8bb26;">""</span><span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">summary</span> = it.get<span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"summary"</span>, <span style="color: #b8bb26;">""</span><span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">it</span><span style="color: #fe8019;">[</span><span style="color: #b8bb26;">"text_clean"</span><span style="color: #fe8019;">]</span> = clean_text<span style="color: #fe8019;">(</span>title<span style="color: #fe8019;">)</span> + <span style="color: #b8bb26;">" "</span> + clean_text<span style="color: #fe8019;">(</span>summary<span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">return</span> items

<span style="color: #83a598;">items_norm</span> = normalize_items<span style="color: #fe8019;">(</span>items<span style="color: #fe8019;">)</span>
<span style="color: #fb4934;">for</span> i, it <span style="color: #fb4934;">in</span> <span style="color: #fe8019;">enumerate</span><span style="color: #fe8019;">(</span>items_norm<span style="color: #b16286;">[</span>:3<span style="color: #b16286;">]</span><span style="color: #fe8019;">)</span>:
<span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">if</span> <span style="color: #b8bb26;">"error"</span> <span style="color: #fb4934;">not</span> <span style="color: #fb4934;">in</span> it:
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #fe8019;">print</span><span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"--- &#205;tem"</span>, i+1, <span style="color: #b8bb26;">"---"</span><span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #fe8019;">print</span><span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"text_clean:"</span>, it.get<span style="color: #b16286;">(</span><span style="color: #b8bb26;">"text_clean"</span>, <span style="color: #b8bb26;">""</span><span style="color: #b16286;">)[</span>:200<span style="color: #b16286;">]</span>, <span style="color: #b8bb26;">"..."</span><span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #fe8019;">print</span><span style="color: #fe8019;">()</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org7091c86" class="outline-3">
<h3 id="org7091c86">Modelo booleano: búsqueda por palabras clave</h3>
<div class="outline-text-3" id="text-org7091c86">
<p>
En el <b>modelo booleano</b> de recuperación, cada documento es <b>relevante</b> o <b>no
relevante</b> según cumpla o no una expresión lógica sobre los términos (AND, OR,
NOT). No hay “más o menos relevante”: es un filtro. Es el modelo más directo
para consultas del tipo “quiero ítems que contengan <b>todas</b> estas palabras”.
Sobre la colección de ítems RSS normalizados (<code>text_clean</code>), una búsqueda AND
equivale a: “devolver solo los documentos cuyo <code>text_clean</code> contiene cada
palabra de la consulta”. Así el IRS aplica el <b>proceso de recuperación</b>:
comparar la <b>consulta</b> (query) con cada <b>documento</b> de la colección y decidir
sí/no según el criterio booleano.
</p>

<ul class="org-ul">
<li><b>IRS — Proceso de recuperación</b>: la función que compara consulta y documentos
implementa el <b>modelo booleano</b> (AND).</li>
<li><b>Consulta</b>: la cadena que escribe el usuario (p. ej. “python software”) se
normaliza igual que los documentos y se divide en palabras; cada palabra debe
aparecer en <code>text_clean</code>.</li>
<li><b>RSS</b>: cada ítem del feed es un documento; el campo <code>text_clean</code> (título +
resumen limpios) es el texto sobre el que se hace la comparación.</li>
</ul>

<p>
search<sub>boolean</sub><sub>and</sub>(items, query)~ recibe la colección (lista de ítems con
<code>text_clean</code>) y la consulta en lenguaje natural. Primero se <b>normaliza la
consulta</b> con <code>clean_text(query).split()</code>: mismas reglas que los documentos,
para que “Python Software” y “python software” den las mismas palabras. Luego
se recorre cada ítem: si <code>text_clean</code> contiene <b>todas</b> las palabras de la
consulta (<code>all(w in text for w in words)</code>), el documento se considera relevante
y se añade a <code>results</code>. La lista devuelta es el <b>conjunto recuperado</b>: documentos
que pasan el filtro booleano. No hay orden de relevancia; si se quisiera
ordenar, se usaría un modelo con score (p. ej. el ranking siguiente).
</p>

<div class="org-src-container">
<pre class="src src-python"><span style="color: #fb4934;">def</span> <span style="color: #b8bb26;">search_boolean_and</span><span style="color: #fe8019;">(</span>items, query<span style="color: #fe8019;">)</span>:
<span style="background-color: #3c3836;"> </span>   <span style="color: #dfd2b8;">"""Recupera &#237;tems donde text_clean contiene TODAS las palabras de query."""</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">words</span> = clean_text<span style="color: #fe8019;">(</span>query<span style="color: #fe8019;">)</span>.split<span style="color: #fe8019;">()</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">results</span> = <span style="color: #fe8019;">[]</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">for</span> it <span style="color: #fb4934;">in</span> items:
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">if</span> <span style="color: #b8bb26;">"error"</span> <span style="color: #fb4934;">in</span> it:
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">continue</span>
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">text</span> = it.get<span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"text_clean"</span>, <span style="color: #b8bb26;">""</span><span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">if</span> <span style="color: #fe8019;">all</span><span style="color: #fe8019;">(</span>w <span style="color: #fb4934;">in</span> text <span style="color: #fb4934;">for</span> w <span style="color: #fb4934;">in</span> words<span style="color: #fe8019;">)</span>:
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   results.append<span style="color: #fe8019;">(</span>it<span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">return</span> results

<span style="color: #83a598;">query</span> = <span style="color: #b8bb26;">"python software"</span>
<span style="color: #83a598;">found</span> = search_boolean_and<span style="color: #fe8019;">(</span>items_norm, query<span style="color: #fe8019;">)</span>
<span style="color: #fe8019;">print</span><span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"Consulta:"</span>, <span style="color: #fe8019;">repr</span><span style="color: #b16286;">(</span>query<span style="color: #b16286;">)</span><span style="color: #fe8019;">)</span>
<span style="color: #fe8019;">print</span><span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"Resultados:"</span>, <span style="color: #fe8019;">len</span><span style="color: #b16286;">(</span>found<span style="color: #b16286;">)</span><span style="color: #fe8019;">)</span>
<span style="color: #fb4934;">for</span> it <span style="color: #fb4934;">in</span> found<span style="color: #fe8019;">[</span>:5<span style="color: #fe8019;">]</span>:
<span style="background-color: #3c3836;"> </span>   <span style="color: #fe8019;">print</span><span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"-"</span>, it.get<span style="color: #b16286;">(</span><span style="color: #b8bb26;">"title"</span>, <span style="color: #b8bb26;">""</span><span style="color: #b16286;">)[</span>:60<span style="color: #b16286;">]</span><span style="color: #fe8019;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgd007395" class="outline-3">
<h3 id="orgd007395">Ranking simple (modelo tipo vectorial)</h3>
<div class="outline-text-3" id="text-orgd007395">
<p>
El modelo booleano devuelve un conjunto sin orden: todos los documentos
recuperados son “igual de relevantes”. En la práctica el usuario espera ver
<b>primero</b> los más relevantes. El <b>modelo vectorial</b> (y variantes) asigna a
cada documento un <b>score</b> de relevancia y ordena por ese score. Una
simplificación muy usada es contar cuántas veces aparecen los términos de la
consulta en el documento (<b>term frequency</b>, TF): más apariciones suelen indicar
mayor relevancia. Así el IRS no solo filtra (sí/no) sino que <b>rankea</b> los
resultados; la interfaz puede mostrar los <code>top_k</code> primeros. En feeds RSS, los
ítems con más menciones de las palabras buscadas en título y resumen aparecen
arriba.
</p>

<ul class="org-ul">
<li><b>IRS — Modelo de recuperación</b>: aquí se implementa un <b>ranking</b> inspirado en
el modelo vectorial (score por conteo de términos en <code>text_clean</code>).</li>
<li><b>Consulta</b>: se normaliza y se divide en palabras; cada palabra contribuye al
score del documento.</li>
<li><b>RSS</b>: cada ítem tiene <code>text_clean</code>; el score es la suma de las frecuencias
de los términos de la consulta en ese texto. Los ítems se ordenan por score
descendente.</li>
</ul>

<p>
search<sub>ranked</sub>(items, query, top<sub>k</sub>)~ recibe la colección normalizada, la
consulta y cuántos resultados devolver. Para cada ítem se calcula <code>score</code> como
<code>sum(text.split().count(w) for w in words)</code>: número total de apariciones de
cualquier término de la consulta en <code>text_clean</code>. Solo se consideran documentos
con score &gt; 0. Se ordena la lista <code>(score, ítem)</code> por score descendente
(<code>key=lambda x: -x[0]</code>) y se devuelven los primeros <code>top_k</code> ítems. Así la
salida es una <b>lista ordenada por relevancia</b>: el primer elemento es el que más
coincide con la consulta. Es una versión simplificada de TF (sin IDF ni
normalización por longitud); suficiente para ilustrar el concepto de ranking
en un IRS sobre feeds RSS.
</p>

<div class="org-src-container">
<pre class="src src-python"><span style="color: #fb4934;">def</span> <span style="color: #b8bb26;">search_ranked</span><span style="color: #fe8019;">(</span>items, query, top_k=10<span style="color: #fe8019;">)</span>:
<span style="background-color: #3c3836;"> </span>   <span style="color: #dfd2b8;">"""Recupera &#237;tems rankeados por n&#250;mero de apariciones de t&#233;rminos de la consulta."""</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">words</span> = clean_text<span style="color: #fe8019;">(</span>query<span style="color: #fe8019;">)</span>.split<span style="color: #fe8019;">()</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">if</span> <span style="color: #fb4934;">not</span> words:
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">return</span> <span style="color: #fe8019;">[]</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">scored</span> = <span style="color: #fe8019;">[]</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">for</span> it <span style="color: #fb4934;">in</span> items:
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">if</span> <span style="color: #b8bb26;">"error"</span> <span style="color: #fb4934;">in</span> it:
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">continue</span>
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">text</span> = it.get<span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"text_clean"</span>, <span style="color: #b8bb26;">""</span><span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">score</span> = <span style="color: #fe8019;">sum</span><span style="color: #fe8019;">(</span>text.split<span style="color: #b16286;">()</span>.count<span style="color: #b16286;">(</span>w<span style="color: #b16286;">)</span> <span style="color: #fb4934;">for</span> w <span style="color: #fb4934;">in</span> words<span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">if</span> score &gt; 0:
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   scored.append<span style="color: #fe8019;">(</span><span style="color: #b16286;">(</span>score, it<span style="color: #b16286;">)</span><span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   scored.sort<span style="color: #fe8019;">(</span>key=<span style="color: #fb4934;">lambda</span> x: -x<span style="color: #b16286;">[</span>0<span style="color: #b16286;">]</span><span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">return</span> <span style="color: #fe8019;">[</span>it <span style="color: #fb4934;">for</span> _, it <span style="color: #fb4934;">in</span> scored<span style="color: #b16286;">[</span>:top_k<span style="color: #b16286;">]</span><span style="color: #fe8019;">]</span>

<span style="color: #83a598;">query2</span> = <span style="color: #b8bb26;">"python release"</span>
<span style="color: #83a598;">ranked</span> = search_ranked<span style="color: #fe8019;">(</span>items_norm, query2, top_k=5<span style="color: #fe8019;">)</span>
<span style="color: #fe8019;">print</span><span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"Consulta:"</span>, <span style="color: #fe8019;">repr</span><span style="color: #b16286;">(</span>query2<span style="color: #b16286;">)</span><span style="color: #fe8019;">)</span>
<span style="color: #fb4934;">for</span> i, it <span style="color: #fb4934;">in</span> <span style="color: #fe8019;">enumerate</span><span style="color: #fe8019;">(</span>ranked, 1<span style="color: #fe8019;">)</span>:
<span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">title</span> = it.get<span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"title"</span>, <span style="color: #b8bb26;">""</span><span style="color: #fe8019;">)[</span>:55<span style="color: #fe8019;">]</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #fe8019;">print</span><span style="color: #fe8019;">(</span>i, <span style="color: #b8bb26;">"-"</span>, title<span style="color: #fe8019;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orga2e0324" class="outline-3">
<h3 id="orga2e0324">Interfaz de resultados</h3>
<div class="outline-text-3" id="text-orga2e0324">
<p>
En un IRS la <b>interfaz</b> es el medio por el que el usuario formula la consulta
y <b>ve los resultados</b>. Sin una presentación clara de los documentos recuperados,
el sistema no es usable. En un buscador web típico la interfaz muestra título,
enlace, fecha y a veces un snippet. En nuestro flujo con feeds RSS y Org-mode,
la “pantalla” de resultados puede ser una <b>tabla Org</b>: cada fila es un ítem
recuperado (por búsqueda booleana o rankeada), con columnas como número de
orden, título, URL y fecha. Así se cierra el ciclo IRS: colección → consulta →
recuperación → <b>presentación</b> al usuario.
</p>

<ul class="org-ul">
<li><b>IRS — Interfaz</b>: la tabla generada es la <b>vista de resultados</b> del sistema;
el usuario ve qué documentos se recuperaron y puede acceder al enlace (RSS
<code>link</code>) de cada ítem.</li>
<li><b>RSS</b>: los campos mostrados (título, enlace, fecha) vienen directamente del
feed; el orden de las filas viene del <b>modelo de recuperación</b> (ranking o
filtro booleano).</li>
<li><b>Código</b>: <code>results_to_org_table</code> transforma la lista de ítems (salida de
<code>search_ranked</code> o <code>search_boolean_and</code>) en líneas de tabla Org.</li>
</ul>

<p>
results<sub>to</sub><sub>org</sub><sub>table</sub>(items<sub>list</sub>)~ recibe la lista de ítems ya recuperados
(ordenados por score si vienen de <code>search_ranked</code>). Construye la cabecera de
la tabla Org (<code>| # | Título | Enlace | Fecha |</code>) y el separador (<code>|---+...</code>).
Para cada ítem añade una fila: posición (<code>i</code>), título truncado a 50 caracteres,
<code>link</code> (URL del ítem en el feed) y fecha truncada a 20 caracteres. El resultado
es una cadena con las líneas de la tabla; en Org-mode se puede insertar en el
buffer o exportar. Así el documento Org actúa como “pantalla” del IRS: el usuario
ve el listado rankeado de ítems RSS con enlaces clicables.
</p>

<div class="org-src-container">
<pre class="src src-python"><span style="color: #fb4934;">def</span> <span style="color: #b8bb26;">results_to_org_table</span><span style="color: #fe8019;">(</span>items_list<span style="color: #fe8019;">)</span>:
<span style="background-color: #3c3836;"> </span>   <span style="color: #dfd2b8;">"""Genera l&#237;neas de tabla Org (| col1 | col2 | col3 |)."""</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">lines</span> = <span style="color: #fe8019;">[</span><span style="color: #b8bb26;">"| # | T&#237;tulo | Enlace | Fecha |"</span>, <span style="color: #b8bb26;">"|---+--------+--------+-------|"</span><span style="color: #fe8019;">]</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">for</span> i, it <span style="color: #fb4934;">in</span> <span style="color: #fe8019;">enumerate</span><span style="color: #fe8019;">(</span>items_list, 1<span style="color: #fe8019;">)</span>:
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">if</span> <span style="color: #b8bb26;">"error"</span> <span style="color: #fb4934;">in</span> it:
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">continue</span>
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">title</span> = <span style="color: #fe8019;">(</span>it.get<span style="color: #b16286;">(</span><span style="color: #b8bb26;">"title"</span>, <span style="color: #b8bb26;">""</span><span style="color: #b16286;">)</span> <span style="color: #fb4934;">or</span> <span style="color: #b8bb26;">""</span><span style="color: #fe8019;">)[</span>:50<span style="color: #fe8019;">]</span>
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">link</span> = it.get<span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"link"</span>, <span style="color: #b8bb26;">""</span><span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">pub</span> = <span style="color: #fe8019;">(</span>it.get<span style="color: #b16286;">(</span><span style="color: #b8bb26;">"published"</span>, <span style="color: #b8bb26;">""</span><span style="color: #b16286;">)</span> <span style="color: #fb4934;">or</span> <span style="color: #b8bb26;">""</span><span style="color: #fe8019;">)[</span>:20<span style="color: #fe8019;">]</span>
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   lines.append<span style="color: #fe8019;">(</span>f<span style="color: #b8bb26;">"| </span>{i}<span style="color: #b8bb26;"> | </span>{title}<span style="color: #b8bb26;"> | </span>{link}<span style="color: #b8bb26;"> | </span>{pub}<span style="color: #b8bb26;"> |"</span><span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">return</span> <span style="color: #b8bb26;">"</span><span style="color: #d3869b;">\n</span><span style="color: #b8bb26;">"</span>.join<span style="color: #fe8019;">(</span>lines<span style="color: #fe8019;">)</span>

<span style="color: #83a598;">org_table</span> = results_to_org_table<span style="color: #fe8019;">(</span>ranked<span style="color: #fe8019;">)</span>
<span style="color: #fe8019;">print</span><span style="color: #fe8019;">(</span>org_table<span style="color: #fe8019;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org2418a05" class="outline-3">
<h3 id="org2418a05">Pipeline completo del IRS con RSS</h3>
<div class="outline-text-3" id="text-org2418a05">
<p>
Un IRS real encadena varias etapas: obtener la colección, indexar/normalizar,
recibir la consulta, aplicar el modelo de recuperación y presentar los
resultados. Integrar todo en un <b>pipeline</b> (una sola función o flujo) permite
ver de un vistazo cómo se relacionan los componentes del IRS con los feeds RSS:
URL del feed → colección; consulta del usuario → proceso de recuperación;
lista rankeada → interfaz (tabla). Así se evidencia que el IRS no es solo
“búsqueda”, sino <b>colección + consulta + modelo + interfaz</b>.
</p>
</div>
<div id="outline-container-org1d88353" class="outline-4">
<h4 id="org1d88353">Relación IRS ↔ feeds RSS en el pipeline</h4>
<div class="outline-text-4" id="text-org1d88353">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Componente IRS</th>
<th scope="col" class="org-left">En el pipeline con RSS</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Colección</td>
<td class="org-left"><code>fetch_rss(feed_url)</code> → ítems del feed</td>
</tr>

<tr>
<td class="org-left">Normalización</td>
<td class="org-left"><code>normalize_items(raw)</code> → <code>text_clean</code> por ítem</td>
</tr>

<tr>
<td class="org-left">Consulta</td>
<td class="org-left">Parámetro <code>query</code> (cadena del usuario)</td>
</tr>

<tr>
<td class="org-left">Modelo recuperación</td>
<td class="org-left"><code>search_ranked(normalized, query, top_k)</code></td>
</tr>

<tr>
<td class="org-left">Interfaz</td>
<td class="org-left"><code>results_to_org_table(resultados)</code> → tabla Org</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-orgf011bdf" class="outline-4">
<h4 id="orgf011bdf">Explicación del código</h4>
<div class="outline-text-4" id="text-orgf011bdf">
<p>
<code>irs_pipeline(feed_url, query, max_entries, top_k)</code> encadena: (1) <code>fetch_rss</code>
descarga y parsea el feed y devuelve la lista de ítems (colección en bruto);
(2) si hay error, se devuelve el mensaje; (3) <code>normalize_items</code> añade
<code>text_clean</code> a cada ítem; (4) <code>search_ranked</code> aplica el modelo de recuperación
(ranking por conteo de términos) y devuelve los <code>top_k</code> ítems más relevantes;
(5) opcionalmente se pasa esa lista a <code>results_to_org_table</code> para generar la
vista. Una sola llamada con URL de feed y consulta produce la tabla de
resultados que el usuario vería en la interfaz. Así queda explícito el flujo
completo: feed RSS → colección → normalización → consulta → ranking →
presentación.
</p>

<div class="org-src-container">
<pre class="src src-python"><span style="color: #fb4934;">def</span> <span style="color: #b8bb26;">irs_pipeline</span><span style="color: #fe8019;">(</span>feed_url, query, max_entries=20, top_k=5<span style="color: #fe8019;">)</span>:
<span style="background-color: #3c3836;"> </span>   <span style="color: #dfd2b8;">"""Pipeline: fetch &#8594; normalizar &#8594; b&#250;squeda rankeada &#8594; resultados."""</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">raw</span> = fetch_rss<span style="color: #fe8019;">(</span>feed_url, max_entries=max_entries<span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">if</span> raw <span style="color: #fb4934;">and</span> <span style="color: #b8bb26;">"error"</span> <span style="color: #fb4934;">in</span> raw<span style="color: #fe8019;">[</span>0<span style="color: #fe8019;">]</span>:
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">return</span> raw
<span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">normalized</span> = normalize_items<span style="color: #fe8019;">(</span>raw<span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">results</span> = search_ranked<span style="color: #fe8019;">(</span>normalized, query, top_k=top_k<span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">return</span> results

<span style="color: #83a598;">url_ejemplo</span> = <span style="color: #b8bb26;">"https://pyfound.blogspot.com/feeds/posts/default?alt=rss"</span>
<span style="color: #83a598;">consulta</span> = <span style="color: #b8bb26;">"python foundation"</span>
<span style="color: #83a598;">resultados</span> = irs_pipeline<span style="color: #fe8019;">(</span>url_ejemplo, consulta, max_entries=15, top_k=5<span style="color: #fe8019;">)</span>
<span style="color: #fe8019;">print</span><span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"Feed:"</span>, url_ejemplo<span style="color: #fe8019;">)</span>
<span style="color: #fe8019;">print</span><span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"Consulta:"</span>, consulta<span style="color: #fe8019;">)</span>
<span style="color: #fe8019;">print</span><span style="color: #fe8019;">(</span>results_to_org_table<span style="color: #b16286;">(</span>resultados<span style="color: #b16286;">)</span><span style="color: #fe8019;">)</span>
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-org49a6ca9" class="outline-2">
<h2 id="org49a6ca9">Introducción a XPath</h2>
<div class="outline-text-2" id="text-org49a6ca9">
<p>
<b>XPath</b> (XML Path Language) es un lenguaje para localizar nodos y extraer valores en
documentos XML y HTML. Se usa en transformaciones XSLT, scraping web, APIs y consultas
a documentos estructurados.
</p>
</div>
<div id="outline-container-org8c35551" class="outline-3">
<h3 id="org8c35551">¿Para qué sirve?</h3>
<div class="outline-text-3" id="text-org8c35551">
<ul class="org-ul">
<li>Navegar por la estructura de un árbol XML/HTML.</li>
<li>Seleccionar elementos por etiqueta, atributo, posición o relación jerárquica.</li>
<li>Extraer texto, atributos o fragmentos concretos.</li>
<li>Usarse desde Python (<code>lxml</code>, <code>BeautifulSoup</code>), JavaScript (<code>document.evaluate</code>), etc.</li>
</ul>
</div>
</div>
<div id="outline-container-org363d134" class="outline-3">
<h3 id="org363d134">Documento de ejemplo</h3>
<div class="outline-text-3" id="text-org363d134">
<p>
En esta parte usaremos este XML ficticio como referencia:
</p>

<div class="org-src-container">
<pre class="src src-xml"><span style="color: #ebdbb2; background-color: #282828;">&lt;?</span><span style="color: #fb4934;">xml</span> <span style="color: #dfd2b8;">version="1.0" encoding="UTF-8"</span><span style="color: #ebdbb2; background-color: #282828;">?&gt;</span>
<span style="color: #ebdbb2; background-color: #282828;">&lt;</span><span style="color: #b8bb26;">catalogo</span><span style="color: #ebdbb2; background-color: #282828;">&gt;</span>
  <span style="color: #ebdbb2; background-color: #282828;">&lt;</span><span style="color: #b8bb26;">libro</span> <span style="color: #83a598;">id</span>=<span style="color: #b8bb26;">"1"</span> <span style="color: #83a598;">categoria</span>=<span style="color: #b8bb26;">"ficcion"</span><span style="color: #ebdbb2; background-color: #282828;">&gt;</span>
    <span style="color: #ebdbb2; background-color: #282828;">&lt;</span><span style="color: #b8bb26;">titulo</span><span style="color: #ebdbb2; background-color: #282828;">&gt;</span><span style="color: #ebdbb2; background-color: #282828;">Don Quijote</span><span style="color: #ebdbb2; background-color: #282828;">&lt;</span><span style="color: #ebdbb2; background-color: #282828;">/</span><span style="color: #b8bb26;">titulo</span><span style="color: #ebdbb2; background-color: #282828;">&gt;</span>
    <span style="color: #ebdbb2; background-color: #282828;">&lt;</span><span style="color: #b8bb26;">autor</span><span style="color: #ebdbb2; background-color: #282828;">&gt;</span><span style="color: #ebdbb2; background-color: #282828;">Cervantes</span><span style="color: #ebdbb2; background-color: #282828;">&lt;</span><span style="color: #ebdbb2; background-color: #282828;">/</span><span style="color: #b8bb26;">autor</span><span style="color: #ebdbb2; background-color: #282828;">&gt;</span>
    <span style="color: #ebdbb2; background-color: #282828;">&lt;</span><span style="color: #b8bb26;">precio</span> <span style="color: #83a598;">moneda</span>=<span style="color: #b8bb26;">"EUR"</span><span style="color: #ebdbb2; background-color: #282828;">&gt;</span><span style="color: #ebdbb2; background-color: #282828;">12.50</span><span style="color: #ebdbb2; background-color: #282828;">&lt;</span><span style="color: #ebdbb2; background-color: #282828;">/</span><span style="color: #b8bb26;">precio</span><span style="color: #ebdbb2; background-color: #282828;">&gt;</span>
    <span style="color: #ebdbb2; background-color: #282828;">&lt;</span><span style="color: #b8bb26;">anio</span><span style="color: #ebdbb2; background-color: #282828;">&gt;</span><span style="color: #ebdbb2; background-color: #282828;">1605</span><span style="color: #ebdbb2; background-color: #282828;">&lt;</span><span style="color: #ebdbb2; background-color: #282828;">/</span><span style="color: #b8bb26;">anio</span><span style="color: #ebdbb2; background-color: #282828;">&gt;</span>
  <span style="color: #ebdbb2; background-color: #282828;">&lt;</span><span style="color: #ebdbb2; background-color: #282828;">/</span><span style="color: #b8bb26;">libro</span><span style="color: #ebdbb2; background-color: #282828;">&gt;</span>
  <span style="color: #ebdbb2; background-color: #282828;">&lt;</span><span style="color: #b8bb26;">libro</span> <span style="color: #83a598;">id</span>=<span style="color: #b8bb26;">"2"</span> <span style="color: #83a598;">categoria</span>=<span style="color: #b8bb26;">"tecnica"</span><span style="color: #ebdbb2; background-color: #282828;">&gt;</span>
    <span style="color: #ebdbb2; background-color: #282828;">&lt;</span><span style="color: #b8bb26;">titulo</span><span style="color: #ebdbb2; background-color: #282828;">&gt;</span><span style="color: #ebdbb2; background-color: #282828;">Introducci&#243;n a XPath</span><span style="color: #ebdbb2; background-color: #282828;">&lt;</span><span style="color: #ebdbb2; background-color: #282828;">/</span><span style="color: #b8bb26;">titulo</span><span style="color: #ebdbb2; background-color: #282828;">&gt;</span>
    <span style="color: #ebdbb2; background-color: #282828;">&lt;</span><span style="color: #b8bb26;">autor</span><span style="color: #ebdbb2; background-color: #282828;">&gt;</span><span style="color: #ebdbb2; background-color: #282828;">Ana Garc&#237;a</span><span style="color: #ebdbb2; background-color: #282828;">&lt;</span><span style="color: #ebdbb2; background-color: #282828;">/</span><span style="color: #b8bb26;">autor</span><span style="color: #ebdbb2; background-color: #282828;">&gt;</span>
    <span style="color: #ebdbb2; background-color: #282828;">&lt;</span><span style="color: #b8bb26;">precio</span> <span style="color: #83a598;">moneda</span>=<span style="color: #b8bb26;">"USD"</span><span style="color: #ebdbb2; background-color: #282828;">&gt;</span><span style="color: #ebdbb2; background-color: #282828;">25.00</span><span style="color: #ebdbb2; background-color: #282828;">&lt;</span><span style="color: #ebdbb2; background-color: #282828;">/</span><span style="color: #b8bb26;">precio</span><span style="color: #ebdbb2; background-color: #282828;">&gt;</span>
    <span style="color: #ebdbb2; background-color: #282828;">&lt;</span><span style="color: #b8bb26;">anio</span><span style="color: #ebdbb2; background-color: #282828;">&gt;</span><span style="color: #ebdbb2; background-color: #282828;">2023</span><span style="color: #ebdbb2; background-color: #282828;">&lt;</span><span style="color: #ebdbb2; background-color: #282828;">/</span><span style="color: #b8bb26;">anio</span><span style="color: #ebdbb2; background-color: #282828;">&gt;</span>
  <span style="color: #ebdbb2; background-color: #282828;">&lt;</span><span style="color: #ebdbb2; background-color: #282828;">/</span><span style="color: #b8bb26;">libro</span><span style="color: #ebdbb2; background-color: #282828;">&gt;</span>
  <span style="color: #ebdbb2; background-color: #282828;">&lt;</span><span style="color: #b8bb26;">libro</span> <span style="color: #83a598;">id</span>=<span style="color: #b8bb26;">"3"</span> <span style="color: #83a598;">categoria</span>=<span style="color: #b8bb26;">"ficcion"</span><span style="color: #ebdbb2; background-color: #282828;">&gt;</span>
    <span style="color: #ebdbb2; background-color: #282828;">&lt;</span><span style="color: #b8bb26;">titulo</span><span style="color: #ebdbb2; background-color: #282828;">&gt;</span><span style="color: #ebdbb2; background-color: #282828;">Cien a&#241;os de soledad</span><span style="color: #ebdbb2; background-color: #282828;">&lt;</span><span style="color: #ebdbb2; background-color: #282828;">/</span><span style="color: #b8bb26;">titulo</span><span style="color: #ebdbb2; background-color: #282828;">&gt;</span>
    <span style="color: #ebdbb2; background-color: #282828;">&lt;</span><span style="color: #b8bb26;">autor</span><span style="color: #ebdbb2; background-color: #282828;">&gt;</span><span style="color: #ebdbb2; background-color: #282828;">Garc&#237;a M&#225;rquez</span><span style="color: #ebdbb2; background-color: #282828;">&lt;</span><span style="color: #ebdbb2; background-color: #282828;">/</span><span style="color: #b8bb26;">autor</span><span style="color: #ebdbb2; background-color: #282828;">&gt;</span>
    <span style="color: #ebdbb2; background-color: #282828;">&lt;</span><span style="color: #b8bb26;">precio</span> <span style="color: #83a598;">moneda</span>=<span style="color: #b8bb26;">"EUR"</span><span style="color: #ebdbb2; background-color: #282828;">&gt;</span><span style="color: #ebdbb2; background-color: #282828;">14.00</span><span style="color: #ebdbb2; background-color: #282828;">&lt;</span><span style="color: #ebdbb2; background-color: #282828;">/</span><span style="color: #b8bb26;">precio</span><span style="color: #ebdbb2; background-color: #282828;">&gt;</span>
    <span style="color: #ebdbb2; background-color: #282828;">&lt;</span><span style="color: #b8bb26;">anio</span><span style="color: #ebdbb2; background-color: #282828;">&gt;</span><span style="color: #ebdbb2; background-color: #282828;">1967</span><span style="color: #ebdbb2; background-color: #282828;">&lt;</span><span style="color: #ebdbb2; background-color: #282828;">/</span><span style="color: #b8bb26;">anio</span><span style="color: #ebdbb2; background-color: #282828;">&gt;</span>
  <span style="color: #ebdbb2; background-color: #282828;">&lt;</span><span style="color: #ebdbb2; background-color: #282828;">/</span><span style="color: #b8bb26;">libro</span><span style="color: #ebdbb2; background-color: #282828;">&gt;</span>
<span style="color: #ebdbb2; background-color: #282828;">&lt;</span><span style="color: #ebdbb2; background-color: #282828;">/</span><span style="color: #b8bb26;">catalogo</span><span style="color: #ebdbb2; background-color: #282828;">&gt;</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org066189d" class="outline-3">
<h3 id="org066189d">Sintaxis básica</h3>
<div class="outline-text-3" id="text-org066189d">
</div>
<div id="outline-container-org335ba44" class="outline-4">
<h4 id="org335ba44">Rutas absolutas y relativas</h4>
<div class="outline-text-4" id="text-org335ba44">
</div>
<ul class="org-ul">
<li><a id="orgec41dd2"></a>Ruta absoluta<br />
<div class="outline-text-5" id="text-orgec41dd2">
<p>
Empieza en la raíz del documento con <code>/</code>:
</p>

<pre class="example" id="orgeb71bb3">
/catalogo/libro
</pre>

<p>
Selecciona todos los elementos <code>&lt;libro&gt;</code> que son hijos directos de <code>&lt;catalogo&gt;</code>.
</p>
</div>
</li>
<li><a id="orge07b43b"></a>Ruta relativa<br />
<div class="outline-text-5" id="text-orge07b43b">
<p>
Se evalúa desde el nodo actual (contexto):
</p>

<pre class="example" id="org89892b3">
libro/titulo
</pre>

<p>
Desde el contexto actual, selecciona <code>&lt;titulo&gt;</code> dentro de <code>&lt;libro&gt;</code>.
</p>
</div>
</li>
</ul>
</div>
<div id="outline-container-orgc08f197" class="outline-4">
<h4 id="orgc08f197">Seleccionar por etiqueta</h4>
<div class="outline-text-4" id="text-orgc08f197">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">XPath</th>
<th scope="col" class="org-left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>/catalogo</code></td>
<td class="org-left">Elemento raíz <code>catalogo</code></td>
</tr>

<tr>
<td class="org-left"><code>/catalogo/libro</code></td>
<td class="org-left">Todos los <code>libro</code> hijos de <code>catalogo</code></td>
</tr>

<tr>
<td class="org-left"><code>//libro</code></td>
<td class="org-left">Todos los <code>libro</code> en cualquier nivel</td>
</tr>

<tr>
<td class="org-left"><code>//titulo</code></td>
<td class="org-left">Todos los <code>titulo</code> en el documento</td>
</tr>
</tbody>
</table>
</div>
<ul class="org-ul">
<li><a id="orgd17fcee"></a>Diferencia entre <code>/</code> y <code>//</code><br />
<div class="outline-text-5" id="text-orgd17fcee">
<dl class="org-dl">
<dt><code>/</code></dt><dd>Solo hijos <b>directos</b> (un nivel).</dd>
<dt><code>//</code></dt><dd>Descendientes en <b>cualquier nivel</b>.</dd>
</dl>

<pre class="example" id="orga4eaece">
/catalogo/libro/titulo   → titulos que son nietos de catalogo (1 nivel)
//titulo                 → todos los titulos del documento
</pre>
</div>
</li>
</ul>
</div>
</div>
<div id="outline-container-orga29f27b" class="outline-3">
<h3 id="orga29f27b">Predicados</h3>
<div class="outline-text-3" id="text-orga29f27b">
<p>
Los <b>predicados</b> <code>[...]</code> filtran nodos según una condición.
</p>
</div>
<div id="outline-container-org0518e33" class="outline-4">
<h4 id="org0518e33">Por posición</h4>
<div class="outline-text-4" id="text-org0518e33">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">XPath</th>
<th scope="col" class="org-left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>/catalogo/libro[1]</code></td>
<td class="org-left">Primer <code>libro</code> (índice desde 1)</td>
</tr>

<tr>
<td class="org-left"><code>/catalogo/libro[last()]</code></td>
<td class="org-left">Último <code>libro</code></td>
</tr>

<tr>
<td class="org-left"><code>/catalogo/libro[position()&lt;=2]</code></td>
<td class="org-left">Los dos primeros</td>
</tr>
</tbody>
</table>
</div>
<ul class="org-ul">
<li><a id="org8a2f66b"></a>Nota sobre índices<br />
<div class="outline-text-5" id="text-org8a2f66b">
<p>
En XPath, los índices empiezan en <b>1</b>, no en 0.
</p>
</div>
</li>
</ul>
</div>
<div id="outline-container-orgd36ae5c" class="outline-4">
<h4 id="orgd36ae5c">Por atributo</h4>
<div class="outline-text-4" id="text-orgd36ae5c">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">XPath</th>
<th scope="col" class="org-left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>//libro[@id]</code></td>
<td class="org-left">Libros que tienen atributo <code>id</code></td>
</tr>

<tr>
<td class="org-left"><code>//libro[@id</code>"2"]=</td>
<td class="org-left">Libro con <code>id</code>"2"=</td>
</tr>

<tr>
<td class="org-left"><code>//libro[@categoria</code>"ficcion"]=</td>
<td class="org-left">Libros de categoría ficción</td>
</tr>

<tr>
<td class="org-left"><code>//precio[@moneda</code>"EUR"]=</td>
<td class="org-left">Precios en euros</td>
</tr>

<tr>
<td class="org-left"><code>//libro[@id&gt;1]</code></td>
<td class="org-left">Libros con id numérico mayor que 1</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-org9e71e97" class="outline-4">
<h4 id="org9e71e97">Por contenido de texto</h4>
<div class="outline-text-4" id="text-org9e71e97">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">XPath</th>
<th scope="col" class="org-left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>//titulo[text()</code>"Don Quijote"]=</td>
<td class="org-left">Título con ese texto exacto</td>
</tr>

<tr>
<td class="org-left"><code>//titulo[contains(., "años")]</code></td>
<td class="org-left">Títulos que contienen "años"</td>
</tr>

<tr>
<td class="org-left"><code>//autor[starts-with(., "Gar")]</code></td>
<td class="org-left">Autores que empiezan por "Gar"</td>
</tr>

<tr>
<td class="org-left"><code>//libro[precio&gt;13]</code></td>
<td class="org-left">Libros cuyo precio es mayor que 13</td>
</tr>
</tbody>
</table>

<p>
El punto <code>.</code> representa el nodo actual (el texto del elemento en muchos contextos).
</p>
</div>
</div>
</div>
<div id="outline-container-org9ae2815" class="outline-3">
<h3 id="org9ae2815">Ejes</h3>
<div class="outline-text-3" id="text-org9ae2815">
<p>
Los <b>ejes</b> definen la relación entre nodos. Sintaxis: <code>eje::paso</code>.
</p>
</div>
<div id="outline-container-orgc4ec090" class="outline-4">
<h4 id="orgc4ec090">Ejes más usados</h4>
<div class="outline-text-4" id="text-orgc4ec090">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Eje</th>
<th scope="col" class="org-left">Abreviatura</th>
<th scope="col" class="org-left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>child::</code></td>
<td class="org-left">(por defecto)</td>
<td class="org-left">Hijos directos</td>
</tr>

<tr>
<td class="org-left"><code>descendant::</code></td>
<td class="org-left"><code>//</code></td>
<td class="org-left">Descendientes (cualquier nivel)</td>
</tr>

<tr>
<td class="org-left"><code>parent::</code></td>
<td class="org-left"><code>../</code></td>
<td class="org-left">Padre</td>
</tr>

<tr>
<td class="org-left"><code>ancestor::</code></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Antepasados</td>
</tr>

<tr>
<td class="org-left"><code>following-sibling::</code></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Hermanos siguientes</td>
</tr>

<tr>
<td class="org-left"><code>preceding-sibling::</code></td>
<td class="org-left">&#xa0;</td>
<td class="org-left">Hermanos anteriores</td>
</tr>

<tr>
<td class="org-left"><code>attribute::</code></td>
<td class="org-left"><code>@</code></td>
<td class="org-left">Atributos</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-org524526a" class="outline-4">
<h4 id="org524526a">Ejemplos con ejes</h4>
<div class="outline-text-4" id="text-org524526a">
<pre class="example" id="orgb201844">
/catalogo/child::libro          → igual que /catalogo/libro
//titulo/parent::libro          → libros que contienen un titulo
//libro[1]/following-sibling::libro  → hermanos siguientes del primer libro
//libro/@id                     → atributo id de cada libro
</pre>
</div>
</div>
</div>
<div id="outline-container-org96742a5" class="outline-3">
<h3 id="org96742a5">Funciones útiles</h3>
<div class="outline-text-3" id="text-org96742a5">
</div>
<div id="outline-container-org721911a" class="outline-4">
<h4 id="org721911a">Funciones de texto</h4>
<div class="outline-text-4" id="text-org721911a">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Función</th>
<th scope="col" class="org-left">Uso</th>
<th scope="col" class="org-left">Ejemplo</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>text()</code></td>
<td class="org-left">Texto del nodo</td>
<td class="org-left"><code>//titulo/text()</code></td>
</tr>

<tr>
<td class="org-left"><code>normalize-space(s)</code></td>
<td class="org-left">Quita espacios extra</td>
<td class="org-left"><code>normalize-space(//titulo[1])</code></td>
</tr>

<tr>
<td class="org-left"><code>contains(s, sub)</code></td>
<td class="org-left">¿s contiene sub?</td>
<td class="org-left"><code>//titulo[contains(., "Quijote")]</code></td>
</tr>

<tr>
<td class="org-left"><code>starts-with(s, pre)</code></td>
<td class="org-left">¿s empieza por pre?</td>
<td class="org-left"><code>//autor[starts-with(., "C")]</code></td>
</tr>

<tr>
<td class="org-left"><code>substring(s, i, n)</code></td>
<td class="org-left">Subcadena desde i, n chars</td>
<td class="org-left"><code>substring(//titulo[1], 1, 3)</code></td>
</tr>

<tr>
<td class="org-left"><code>concat(s1, s2)</code></td>
<td class="org-left">Concatenar strings</td>
<td class="org-left"><code>concat(//titulo[1], " - ", //autor[1])</code></td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-org7160c2a" class="outline-4">
<h4 id="org7160c2a">Funciones numéricas</h4>
<div class="outline-text-4" id="text-org7160c2a">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Función</th>
<th scope="col" class="org-left">Uso</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>count(nodeset)</code></td>
<td class="org-left">Número de nodos</td>
</tr>

<tr>
<td class="org-left"><code>sum(nodeset)</code></td>
<td class="org-left">Suma de valores</td>
</tr>

<tr>
<td class="org-left"><code>position()</code></td>
<td class="org-left">Posición en el contexto</td>
</tr>

<tr>
<td class="org-left"><code>last()</code></td>
<td class="org-left">Última posición</td>
</tr>
</tbody>
</table>

<pre class="example" id="org13b0ff5">
count(//libro)           → 3
sum(//precio)            → 51.50 (si los precios son números)
//libro[position()=last()]
</pre>
</div>
</div>
<div id="outline-container-org87f3160" class="outline-4">
<h4 id="org87f3160">Funciones de tipo</h4>
<div class="outline-text-4" id="text-org87f3160">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Función</th>
<th scope="col" class="org-left">Uso</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>name()</code></td>
<td class="org-left">Nombre de la etiqueta</td>
</tr>

<tr>
<td class="org-left"><code>local-name()</code></td>
<td class="org-left">Nombre local (sin prefijo)</td>
</tr>

<tr>
<td class="org-left"><code>string-length(s)</code></td>
<td class="org-left">Longitud de la cadena</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="outline-container-org7dcaa9e" class="outline-3">
<h3 id="org7dcaa9e">Operadores y combinaciones</h3>
<div class="outline-text-3" id="text-org7dcaa9e">
</div>
<div id="outline-container-orgd11eb90" class="outline-4">
<h4 id="orgd11eb90">Operadores lógicos</h4>
<div class="outline-text-4" id="text-orgd11eb90">
<pre class="example" id="org7d2a0bd">
//libro[@categoria="ficcion" and precio&gt;12]
//libro[@categoria="ficcion" or @categoria="tecnica"]
//titulo[not(contains(., "años"))]
</pre>
</div>
</div>
<div id="outline-container-org9b919f8" class="outline-4">
<h4 id="org9b919f8">Unión de conjuntos (|)</h4>
<div class="outline-text-4" id="text-org9b919f8">
<pre class="example" id="orgd948d08">
//titulo | //autor
</pre>

<p>
Devuelve todos los elementos <code>titulo</code> y <code>autor</code>.
</p>
</div>
</div>
<div id="outline-container-org58ca3df" class="outline-4">
<h4 id="org58ca3df">Operadores de comparación</h4>
<div class="outline-text-4" id="text-org58ca3df">
<p>
= = <code>, =!</code> <code>, =&lt; =, =&lt;</code> <code>, =&gt; =, =&gt;</code> =
</p>
</div>
</div>
</div>
<div id="outline-container-orga2bae19" class="outline-3">
<h3 id="orga2bae19">XPath en HTML (scraping)</h3>
<div class="outline-text-3" id="text-orga2bae19">
<p>
HTML no siempre es XML bien formado. Herramientas como <code>lxml</code> en Python pueden parsear
HTML y aplicar XPath. Ejemplo:
</p>

<div class="org-src-container">
<pre class="src src-python"><span style="color: #fb4934;">from</span> lxml <span style="color: #fb4934;">import</span> etree

<span style="color: #83a598;">html</span> = <span style="color: #b8bb26;">"""
&lt;html&gt;
</span><span style="color: #b8bb26; background-color: #3c3836;"> </span><span style="color: #b8bb26;"> &lt;body&gt;
</span><span style="color: #b8bb26; background-color: #3c3836;"> </span><span style="color: #b8bb26;">   &lt;div class="articulo"&gt;
</span><span style="color: #b8bb26; background-color: #3c3836;"> </span><span style="color: #b8bb26;">   </span><span style="color: #b8bb26; background-color: #3c3836;"> </span><span style="color: #b8bb26;"> &lt;h1&gt;T&#237;tulo del art&#237;culo&lt;/h1&gt;
</span><span style="color: #b8bb26; background-color: #3c3836;"> </span><span style="color: #b8bb26;">   </span><span style="color: #b8bb26; background-color: #3c3836;"> </span><span style="color: #b8bb26;"> &lt;p&gt;P&#225;rrafo uno.&lt;/p&gt;
</span><span style="color: #b8bb26; background-color: #3c3836;"> </span><span style="color: #b8bb26;">   </span><span style="color: #b8bb26; background-color: #3c3836;"> </span><span style="color: #b8bb26;"> &lt;p&gt;P&#225;rrafo dos con &lt;a href="/enlace"&gt;enlace&lt;/a&gt;.&lt;/p&gt;
</span><span style="color: #b8bb26; background-color: #3c3836;"> </span><span style="color: #b8bb26;">   &lt;/div&gt;
</span><span style="color: #b8bb26; background-color: #3c3836;"> </span><span style="color: #b8bb26;">   &lt;div class="articulo"&gt;
</span><span style="color: #b8bb26; background-color: #3c3836;"> </span><span style="color: #b8bb26;">   </span><span style="color: #b8bb26; background-color: #3c3836;"> </span><span style="color: #b8bb26;"> &lt;h1&gt;Otro art&#237;culo&lt;/h1&gt;
</span><span style="color: #b8bb26; background-color: #3c3836;"> </span><span style="color: #b8bb26;">   </span><span style="color: #b8bb26; background-color: #3c3836;"> </span><span style="color: #b8bb26;"> &lt;p&gt;Contenido.&lt;/p&gt;
</span><span style="color: #b8bb26; background-color: #3c3836;"> </span><span style="color: #b8bb26;">   &lt;/div&gt;
</span><span style="color: #b8bb26; background-color: #3c3836;"> </span><span style="color: #b8bb26;"> &lt;/body&gt;
&lt;/html&gt;
"""</span>

<span style="color: #83a598;">tree</span> = etree.HTML<span style="color: #fe8019;">(</span>html<span style="color: #fe8019;">)</span>

<span style="color: #928374;"># </span><span style="color: #928374;">Todos los h1
</span><span style="color: #83a598;">titulos</span> = tree.xpath<span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"//h1/text()"</span><span style="color: #fe8019;">)</span>
<span style="color: #fe8019;">print</span><span style="color: #fe8019;">(</span>titulos<span style="color: #fe8019;">)</span>  <span style="color: #928374;"># </span><span style="color: #928374;">['T&#237;tulo del art&#237;culo', 'Otro art&#237;culo']
</span>
<span style="color: #928374;"># </span><span style="color: #928374;">h1 dentro de div con clase "articulo"
</span><span style="color: #83a598;">titulos_articulo</span> = tree.xpath<span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"//div[@class='articulo']/h1/text()"</span><span style="color: #fe8019;">)</span>

<span style="color: #928374;"># </span><span style="color: #928374;">Atributo href de enlaces
</span><span style="color: #83a598;">enlaces</span> = tree.xpath<span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"//a/@href"</span><span style="color: #fe8019;">)</span>
<span style="color: #fe8019;">print</span><span style="color: #fe8019;">(</span>enlaces<span style="color: #fe8019;">)</span>  <span style="color: #928374;"># </span><span style="color: #928374;">['/enlace']
</span>
<span style="color: #928374;"># </span><span style="color: #928374;">Segundo p&#225;rrafo del primer articulo
</span><span style="color: #83a598;">segundo_p</span> = tree.xpath<span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"//div[@class='articulo'][1]/p[2]/text()"</span><span style="color: #fe8019;">)</span>
</pre>
</div>
</div>
<div id="outline-container-org3a76b7a" class="outline-4">
<h4 id="org3a76b7a">XPath útiles para HTML común</h4>
<div class="outline-text-4" id="text-org3a76b7a">
<pre class="example" id="org2c881a2">
//a/@href                    → todos los enlaces (URL)
//img/@src                   → todas las imágenes
//div[@class='contenido']    → divs con esa clase
//table//tr                  → filas de tablas
//input[@name='email']       → input por nombre
//*[@id='principal']         → elemento con id
</pre>
</div>
</div>
</div>
<div id="outline-container-org64ef0ba" class="outline-3">
<h3 id="org64ef0ba">XPath en Python (lxml)</h3>
<div class="outline-text-3" id="text-org64ef0ba">
</div>
<div id="outline-container-org104ece2" class="outline-4">
<h4 id="org104ece2">Cargar XML desde archivo</h4>
<div class="outline-text-4" id="text-org104ece2">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #fb4934;">from</span> lxml <span style="color: #fb4934;">import</span> etree

<span style="color: #83a598;">tree</span> = etree.parse<span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"catalogo.xml"</span><span style="color: #fe8019;">)</span>
<span style="color: #83a598;">root</span> = tree.getroot<span style="color: #fe8019;">()</span>

<span style="color: #928374;"># </span><span style="color: #928374;">O desde string
</span><span style="color: #83a598;">xml_string</span> = <span style="color: #b8bb26;">"&lt;catalogo&gt;&lt;libro&gt;&lt;titulo&gt;X&lt;/titulo&gt;&lt;/libro&gt;&lt;/catalogo&gt;"</span>
<span style="color: #83a598;">root</span> = etree.fromstring<span style="color: #fe8019;">(</span>xml_string.encode<span style="color: #b16286;">(</span><span style="color: #b8bb26;">"utf-8"</span><span style="color: #b16286;">)</span><span style="color: #fe8019;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgc9b64af" class="outline-4">
<h4 id="orgc9b64af">Ejecutar XPath</h4>
<div class="outline-text-4" id="text-orgc9b64af">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #928374;"># </span><span style="color: #928374;">.xpath() devuelve lista de nodos o valores seg&#250;n la expresi&#243;n
</span><span style="color: #83a598;">libros</span> = root.xpath<span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"//libro"</span><span style="color: #fe8019;">)</span>
<span style="color: #83a598;">titulos</span> = root.xpath<span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"//titulo/text()"</span><span style="color: #fe8019;">)</span>
<span style="color: #83a598;">precio_eur</span> = root.xpath<span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"//precio[@moneda='EUR']/text()"</span><span style="color: #fe8019;">)</span>
<span style="color: #83a598;">primer_autor</span> = root.xpath<span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"//autor[1]/text()"</span><span style="color: #fe8019;">)[</span>0<span style="color: #fe8019;">]</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org378a98a" class="outline-4">
<h4 id="org378a98a">Namespaces (XML con prefijos)</h4>
<div class="outline-text-4" id="text-org378a98a">
<p>
Si el XML usa namespaces (p. ej. <code>xmlns</code>), hay que registrarlos:
</p>

<div class="org-src-container">
<pre class="src src-python"><span style="color: #83a598;">ns</span> = <span style="color: #fe8019;">{</span><span style="color: #b8bb26;">"rss"</span>: <span style="color: #b8bb26;">"http://purl.org/rss/1.0/"</span><span style="color: #fe8019;">}</span>
<span style="color: #83a598;">items</span> = root.xpath<span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"//rss:item/title/text()"</span>, namespaces=ns<span style="color: #fe8019;">)</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgba093a5" class="outline-3">
<h3 id="orgba093a5">Ejercicios prácticos</h3>
<div class="outline-text-3" id="text-orgba093a5">
<p>
Con el XML de ejemplo del catálogo, escribe el XPath que:
</p>
</div>
<ul class="org-ul">
<li><a id="org3a86bc0"></a>Ejercicio 1<br />
<div class="outline-text-5" id="text-org3a86bc0">
<p>
Obtenga el título del segundo libro.
</p>
<pre class="example" id="org7435996">
# Respuesta: /catalogo/libro[2]/titulo/text()
</pre>
</div>
</li>
<li><a id="org9d604e3"></a>Ejercicio 2<br />
<div class="outline-text-5" id="text-org9d604e3">
<p>
Obtenga todos los precios en euros.
</p>
<pre class="example" id="orgb1f4b43">
# Respuesta: //precio[@moneda='EUR']/text()
</pre>
</div>
</li>
<li><a id="org83d00e1"></a>Ejercicio 3<br />
<div class="outline-text-5" id="text-org83d00e1">
<p>
Obtenga los títulos de los libros de ficción.
</p>
<pre class="example" id="orgaa27369">
# Respuesta: //libro[@categoria='ficcion']/titulo/text()
</pre>
</div>
</li>
<li><a id="org37d74dd"></a>Ejercicio 4<br />
<div class="outline-text-5" id="text-org37d74dd">
<p>
Obtenga el autor del libro cuyo título contiene "años".
</p>
<pre class="example" id="orge54d4f3">
# Respuesta: //libro[titulo[contains(., 'años')]]/autor/text()
</pre>
</div>
</li>
<li><a id="orgf7fc61f"></a>Ejercicio 5<br />
<div class="outline-text-5" id="text-orgf7fc61f">
<p>
Cuente cuántos libros hay en el catálogo.
</p>
<pre class="example" id="org853f455">
# Respuesta: count(//libro)
</pre>
</div>
</li>
</ul>
</div>
<div id="outline-container-org745cc69" class="outline-3">
<h3 id="org745cc69">Referencia rápida</h3>
<div class="outline-text-3" id="text-org745cc69">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Símbolo / sintaxis</th>
<th scope="col" class="org-left">Significado</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left"><code>/</code></td>
<td class="org-left">Hijo directo / raíz</td>
</tr>

<tr>
<td class="org-left"><code>//</code></td>
<td class="org-left">Descendiente (cualquier nivel)</td>
</tr>

<tr>
<td class="org-left"><code>.</code></td>
<td class="org-left">Nodo actual</td>
</tr>

<tr>
<td class="org-left"><code>..</code></td>
<td class="org-left">Padre</td>
</tr>

<tr>
<td class="org-left"><code>@</code></td>
<td class="org-left">Atributo</td>
</tr>

<tr>
<td class="org-left"><code>[]</code></td>
<td class="org-left">Predicado (filtro)</td>
</tr>

<tr>
<td class="org-left">=</td>
<td class="org-left">=</td>
<td class="org-left">Unión de conjuntos</td>
</tr>

<tr>
<td class="org-left"><code>text()</code></td>
<td class="org-left">Contenido de texto</td>
</tr>

<tr>
<td class="org-left"><code>*</code></td>
<td class="org-left">Cualquier elemento</td>
</tr>

<tr>
<td class="org-left"><code>@*</code></td>
<td class="org-left">Cualquier atributo</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-org4523f00" class="outline-3">
<h3 id="org4523f00">Dependencias</h3>
<div class="outline-text-3" id="text-org4523f00">
<pre class="example" id="orge77bd21">
pip install lxml
</pre>

<p>
Para HTML "suelto": <code>lxml</code> con <code>etree.HTML()</code> o <code>BeautifulSoup</code> con soporte <code>lxml</code>.
</p>
</div>
</div>
</div>
<div id="outline-container-orgcfba0d2" class="outline-2">
<h2 id="orgcfba0d2">Ruta Crítica del Web Scraping y Aspectos de Seguridad</h2>
<div class="outline-text-2" id="text-orgcfba0d2">
</div>
<div id="outline-container-orgd6fdd49" class="outline-3">
<h3 id="orgd6fdd49">Introducción</h3>
<div class="outline-text-3" id="text-orgd6fdd49">
<p>
Este apartado describe la <b>ruta crítica</b> para realizar web scraping: los pasos imprescindibles,
orden lógico y las consideraciones de <b>seguridad</b> (tuyas y del sitio objetivo) que conlleva.
</p>
</div>
</div>
<div id="outline-container-orgda9f899" class="outline-3">
<h3 id="orgda9f899">La ruta crítica: fases del proyecto de scraping</h3>
<div class="outline-text-3" id="text-orgda9f899">
<p>
La ruta crítica es la secuencia de actividades que deben completarse en orden y cuyas
demoras afectan directamente el tiempo total del proyecto.
</p>
</div>
<div id="outline-container-org50cc13d" class="outline-4">
<h4 id="org50cc13d">Diagrama de flujo general</h4>
<div class="outline-text-4" id="text-org50cc13d">
<pre class="example" id="orgf7fedb6">
┌─────────────────┐
│ 1. LEGALIDAD    │ ¿Puedo hacerlo?
│ y ÉTICA         │
└────────┬────────┘
         │ Sí
         ▼
┌─────────────────┐
│ 2. ALTERNATIVAS │ ¿Existe API o descarga oficial?
│ (evitar scrape) │
└────────┬────────┘
         │ No hay alternativa adecuada
         ▼
┌─────────────────┐
│ 3. PLANIFICACIÓN│ ¿Qué datos? ¿Qué páginas? ¿Frecuencia?
│                 │
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ 4. ANÁLISIS     │ Inspeccionar HTML, estructura, paginación
│ TÉCNICO         │ ¿Contenido estático o dinámico?
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ 5. DESARROLLO   │ Código: requests/lxml/selenium, etc.
│                 │ Manejo de errores, reintentos
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ 6. SEGURIDAD    │ Headers, rate limiting, proxies (si aplica)
│ Y ROBUSTEZ      │ Validación de datos, sanitización
└────────┬────────┘
         │
         ▼
┌─────────────────┐
│ 7. EJECUCIÓN    │ Monitoreo, logs, alertas
│ Y MANTENIMIENTO │ Adaptación a cambios del sitio
└─────────────────┘
</pre>
</div>
</div>
</div>
<div id="outline-container-org5d83768" class="outline-3">
<h3 id="org5d83768">Fase 1: Legalidad y ética (puerta de entrada)</h3>
<div class="outline-text-3" id="text-org5d83768">
</div>
<div id="outline-container-org9ea664d" class="outline-4">
<h4 id="org9ea664d">Antes de escribir código</h4>
<div class="outline-text-4" id="text-org9ea664d">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Verificación</th>
<th scope="col" class="org-left">Pregunta</th>
<th scope="col" class="org-left">Acción si falla</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Términos de uso</td>
<td class="org-left">¿El sitio prohíbe explícitamente el scraping?</td>
<td class="org-left">No proceder</td>
</tr>

<tr>
<td class="org-left">robots.txt</td>
<td class="org-left">¿Hay directivas que bloqueen tu user-agent o rutas?</td>
<td class="org-left">Respetar o no proceder</td>
</tr>

<tr>
<td class="org-left">Propiedad intelectual</td>
<td class="org-left">¿El contenido está protegido por derechos de autor?</td>
<td class="org-left">Evaluar uso justo / licencia</td>
</tr>

<tr>
<td class="org-left">Datos personales</td>
<td class="org-left">¿Vas a extraer datos que identifiquen personas?</td>
<td class="org-left">Cumplir RGPD/LFPDPPP y normativa local</td>
</tr>

<tr>
<td class="org-left">robots.txt location</td>
<td class="org-left">¿Dónde está?</td>
<td class="org-left">Revisar <code>https://dominio.com/robots.txt</code></td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-orga4171d2" class="outline-4">
<h4 id="orga4171d2">Ejemplo de robots.txt</h4>
<div class="outline-text-4" id="text-orga4171d2">
<pre class="example" id="org4e86657">
User-agent: *
Disallow: /admin/
Disallow: /api/  # Puede indicar que hay API disponible
Allow: /public/

User-agent: BadBot
Disallow: /
</pre>
</div>
</div>
<div id="outline-container-orga2a6de7" class="outline-4">
<h4 id="orga2a6de7">Consecuencias de omitir esta fase</h4>
<div class="outline-text-4" id="text-orga2a6de7">
<ul class="org-ul">
<li>Demandas por violación de términos de servicio.</li>
<li>Bloqueo de IP o cuenta.</li>
<li>Responsabilidad por tratamiento indebido de datos personales.</li>
<li>Reputación y costes legales.</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org7c432e4" class="outline-3">
<h3 id="org7c432e4">Fase 2: Buscar alternativas al scraping</h3>
<div class="outline-text-3" id="text-org7c432e4">
</div>
<div id="outline-container-org6a6ac9b" class="outline-4">
<h4 id="org6a6ac9b">Jerarquía de preferencia (orden recomendado)</h4>
<div class="outline-text-4" id="text-org6a6ac9b">
<ol class="org-ol">
<li><b>API oficial</b> (Twitter, INEGI, Amazon Product Advertising API, etc.)</li>
<li><b>RSS / feed XML</b></li>
<li><b>JSON oculto en Network</b> (pestaña Network del navegador: peticiones XHR/Fetch que devuelven JSON)</li>
<li><b>HTML estático</b> (<code>requests</code> + lxml)</li>
<li><b>Contenido dinámico</b> (Selenium, Playwright)</li>
</ol>

<p>
Nunca empezar con Selenium si no es necesario: es más lento y pesado. Ejemplos: Twitter/X
→ API oficial (plan básico limitado); Amazon → Product Advertising API para afiliados.
</p>
</div>
</div>
<div id="outline-container-org410966c" class="outline-4">
<h4 id="org410966c">Antes de scrapear, preguntar</h4>
<div class="outline-text-4" id="text-org410966c">
<ol class="org-ol">
<li>¿Existe una <b>API oficial</b>? (Google, Twitter, INEGI, etc.)</li>
<li>¿Hay <b>datos abiertos</b> o descarga masiva? (datos.gob.mx, Kaggle)</li>
<li>¿Ofrecen <b>exportación</b> o <b>feed RSS/XML</b>?</li>
<li>¿El sitio carga datos por JSON interno? (revisar pestaña Network)</li>
<li>¿Se puede <b>contactar</b> al propietario para solicitar acceso formal?</li>
</ol>
</div>
</div>
<div id="outline-container-org734bda4" class="outline-4">
<h4 id="org734bda4">Motivos para preferir alternativas</h4>
<div class="outline-text-4" id="text-org734bda4">
<ul class="org-ul">
<li>Legalidad más clara.</li>
<li>Menor riesgo de bloqueo.</li>
<li>Datos más estructurados y estables.</li>
<li>Menos mantenimiento ante cambios del sitio.</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org4bc39c3" class="outline-3">
<h3 id="org4bc39c3">Fase 3: Planificación</h3>
<div class="outline-text-3" id="text-org4bc39c3">
</div>
<div id="outline-container-org7f1bb9b" class="outline-4">
<h4 id="org7f1bb9b">Definir alcance</h4>
<div class="outline-text-4" id="text-org7f1bb9b">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Aspecto</th>
<th scope="col" class="org-left">Preguntas</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Objetivo</td>
<td class="org-left">¿Qué datos exactos necesito?</td>
</tr>

<tr>
<td class="org-left">Volumen</td>
<td class="org-left">¿Cuántas páginas/registros?</td>
</tr>

<tr>
<td class="org-left">Frecuencia</td>
<td class="org-left">¿Una vez, diario, en tiempo real?</td>
</tr>

<tr>
<td class="org-left">Formato salida</td>
<td class="org-left">CSV, JSON, base de datos</td>
</tr>

<tr>
<td class="org-left">Tiempo estimado</td>
<td class="org-left">¿Cuánto tardará una ejecución completa?</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-orgd206bc8" class="outline-4">
<h4 id="orgd206bc8">Estimar carga al servidor</h4>
<div class="outline-text-4" id="text-orgd206bc8">
<p>
\[
\text{peticiones/hora} \approx \frac{\text{páginas totales}}{\text{tiempo deseado (h)}} \times (1 + \text{margen reintentos})
\]
</p>

<p>
Mantener un ritmo <b>razonable</b> evita saturar el servidor y ser detectado como bot.
</p>
</div>
</div>
</div>
<div id="outline-container-orge2e91c3" class="outline-3">
<h3 id="orge2e91c3">Fase 4: Análisis técnico</h3>
<div class="outline-text-3" id="text-orge2e91c3">
</div>
<div id="outline-container-org18aa0a4" class="outline-4">
<h4 id="org18aa0a4">Inspeccionar el sitio</h4>
<div class="outline-text-4" id="text-org18aa0a4">
<ul class="org-ul">
<li>Herramientas de desarrollador (F12): estructura HTML, clases, IDs.</li>
<li>Network tab: ver peticiones XHR/Fetch (contenido dinámico).</li>
<li>Probar si <code>requests</code> + <code>lxml</code> devuelven el contenido visible en el navegador.</li>
</ul>
</div>
</div>
<div id="outline-container-org54d1a25" class="outline-4">
<h4 id="org54d1a25">Contenido estático vs. dinámico</h4>
<div class="outline-text-4" id="text-org54d1a25">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Tipo</th>
<th scope="col" class="org-left">Cómo identificarlo</th>
<th scope="col" class="org-left">Herramienta típica</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Estático</td>
<td class="org-left">HTML completo en la respuesta GET</td>
<td class="org-left"><code>requests</code> + <code>lxml</code></td>
</tr>

<tr>
<td class="org-left">Dinámico</td>
<td class="org-left">Contenido cargado por JavaScript</td>
<td class="org-left">Selenium, Playwright</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-org10ed94a" class="outline-4">
<h4 id="org10ed94a">Mapear la estructura</h4>
<div class="outline-text-4" id="text-org10ed94a">
<ul class="org-ul">
<li>URLs base y patrones de paginación.</li>
<li>Selectores XPath o CSS estables.</li>
<li>Formularios, cookies o cabeceras requeridas.</li>
</ul>
</div>
</div>
<div id="outline-container-org39bd379" class="outline-4">
<h4 id="org39bd379">Detectando JSON oculto (Network)</h4>
<div class="outline-text-4" id="text-org39bd379">
<p>
Muchos sitios (incl. Amazon, tiendas, portales) cargan datos por peticiones internas a APIs
que devuelven JSON. En lugar de parsear HTML:
</p>

<ol class="org-ol">
<li>Abrir herramientas de desarrollador (F12) → pestaña <b>Network</b>.</li>
<li>Filtrar por XHR o Fetch.</li>
<li>Recargar la página y observar qué peticiones devuelven datos útiles.</li>
<li>Copiar la URL de la petición y sus parámetros; replicar con <code>requests</code>.</li>
</ol>

<p>
Ventaja: JSON estructurado, más fácil de parsear y más estable que el HTML.
</p>
</div>
</div>
</div>
<div id="outline-container-org4310cb2" class="outline-3">
<h3 id="org4310cb2">Fase 5: Desarrollo</h3>
<div class="outline-text-3" id="text-org4310cb2">
</div>
<div id="outline-container-org759cb87" class="outline-4">
<h4 id="org759cb87">Estructura recomendada del código</h4>
<div class="outline-text-4" id="text-org759cb87">
<pre class="example" id="org3633d07">
scraper/
├── config.py        # URLs, timeouts, headers
├── fetch.py         # Lógica de peticiones HTTP
├── parse.py         # Extracción con XPath/CSS
├── storage.py       # Guardar datos (CSV, DB)
├── main.py          # Orquestación
└── logs/            # Registro de ejecuciones
</pre>
</div>
</div>
<div id="outline-container-orgab51828" class="outline-4">
<h4 id="orgab51828">Manejo de errores</h4>
<div class="outline-text-4" id="text-orgab51828">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #fb4934;">import</span> time
<span style="color: #fb4934;">import</span> requests
<span style="color: #fb4934;">from</span> requests.adapters <span style="color: #fb4934;">import</span> HTTPAdapter
<span style="color: #fb4934;">from</span> urllib3.util.retry <span style="color: #fb4934;">import</span> Retry

<span style="color: #fb4934;">def</span> <span style="color: #b8bb26;">session_con_reintentos</span><span style="color: #fe8019;">()</span>:
<span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">session</span> = requests.Session<span style="color: #fe8019;">()</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">retries</span> = Retry<span style="color: #fe8019;">(</span>total=3, backoff_factor=1, status_forcelist=<span style="color: #b16286;">[</span>500, 502, 503<span style="color: #b16286;">]</span><span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   session.mount<span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"https://"</span>, HTTPAdapter<span style="color: #b16286;">(</span>max_retries=retries<span style="color: #b16286;">)</span><span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">return</span> session

<span style="color: #fb4934;">def</span> <span style="color: #b8bb26;">fetch_con_pausa</span><span style="color: #fe8019;">(</span>url, session, delay=1<span style="color: #fe8019;">)</span>:
<span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">try</span>:
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">r</span> = session.get<span style="color: #fe8019;">(</span>url, timeout=30<span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   r.raise_for_status<span style="color: #fe8019;">()</span>
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   time.sleep<span style="color: #fe8019;">(</span>delay<span style="color: #fe8019;">)</span>  <span style="color: #928374;"># </span><span style="color: #928374;">Rate limiting
</span><span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">return</span> r.content
<span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">except</span> requests.RequestException <span style="color: #fb4934;">as</span> e:
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #928374;"># </span><span style="color: #928374;">Registrar en log, no solo print
</span><span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">raise</span>
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-org27bcbd5" class="outline-3">
<h3 id="org27bcbd5">Fase 6: Seguridad y robustez</h3>
<div class="outline-text-3" id="text-org27bcbd5">
</div>
<div id="outline-container-org216d439" class="outline-4">
<h4 id="org216d439">Seguridad de las peticiones</h4>
<div class="outline-text-4" id="text-org216d439">
</div>
<ul class="org-ul">
<li><a id="org45b0878"></a>User-Agent e identificación<br />
<div class="outline-text-5" id="text-org45b0878">
<ul class="org-ul">
<li>Identificarse de forma clara (no hacerse pasar por Googlebot si no lo eres).</li>
<li>Incluir un correo de contacto si el sitio lo sugiere.</li>
<li>Evitar user-agents de navegadores muy antiguos (suelen ser bloqueados).</li>
</ul>

<div class="org-src-container">
<pre class="src src-python"><span style="color: #83a598;">HEADERS</span> = <span style="color: #fe8019;">{</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #b8bb26;">"User-Agent"</span>: <span style="color: #b8bb26;">"MiProyecto/1.0 (estudio acad&#233;mico; +mail@ejemplo.com)"</span>,
<span style="background-color: #3c3836;"> </span>   <span style="color: #b8bb26;">"Accept"</span>: <span style="color: #b8bb26;">"text/html,application/xhtml+xml"</span>,
<span style="background-color: #3c3836;"> </span>   <span style="color: #b8bb26;">"Accept-Language"</span>: <span style="color: #b8bb26;">"es-ES,es;q=0.9"</span>,
<span style="color: #fe8019;">}</span>
</pre>
</div>
</div>
</li>
<li><a id="orgf3b9ac1"></a>No exponer credenciales<br />
<div class="outline-text-5" id="text-orgf3b9ac1">
<ul class="org-ul">
<li>Nunca hardcodear API keys, contraseñas o tokens.</li>
<li>Usar variables de entorno o archivos de configuración excluidos de control de versiones.</li>
</ul>

<div class="org-src-container">
<pre class="src src-python"><span style="color: #fb4934;">import</span> os
<span style="color: #83a598;">API_KEY</span> = os.environ.get<span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"SCRAPER_API_KEY"</span><span style="color: #fe8019;">)</span>
<span style="color: #fb4934;">if</span> <span style="color: #fb4934;">not</span> API_KEY:
<span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">raise</span> <span style="color: #fabd2f;">ValueError</span><span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"Configurar SCRAPER_API_KEY"</span><span style="color: #fe8019;">)</span>
</pre>
</div>
</div>
</li>
<li><a id="org3311ad0"></a>Validar y sanitizar datos de entrada<br />
<div class="outline-text-5" id="text-org3311ad0">
<ul class="org-ul">
<li>URLs, parámetros y consultas pueden venir de fuentes externas.</li>
<li>Evitar inyección o URLs maliciosas (redirecciones a dominios desconocidos).</li>
</ul>

<div class="org-src-container">
<pre class="src src-python"><span style="color: #fb4934;">from</span> urllib.parse <span style="color: #fb4934;">import</span> urlparse

<span style="color: #fb4934;">def</span> <span style="color: #b8bb26;">url_permitida</span><span style="color: #fe8019;">(</span>url, dominios_permitidos<span style="color: #fe8019;">)</span>:
<span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">parsed</span> = urlparse<span style="color: #fe8019;">(</span>url<span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">return</span> parsed.netloc <span style="color: #fb4934;">in</span> dominios_permitidos
</pre>
</div>
</div>
</li>
</ul>
</div>
<div id="outline-container-org470b1b6" class="outline-4">
<h4 id="org470b1b6">Seguridad de los datos extraídos</h4>
<div class="outline-text-4" id="text-org470b1b6">
</div>
<ul class="org-ul">
<li><a id="orge00288e"></a>Sanitización de salida<br />
<div class="outline-text-5" id="text-orge00288e">
<ul class="org-ul">
<li>Limpiar HTML antes de guardar (evitar XSS si luego se muestran en una web).</li>
<li>Validar tipos y formatos (fechas, números, textos).</li>
</ul>

<div class="org-src-container">
<pre class="src src-python"><span style="color: #fb4934;">import</span> re
<span style="color: #fb4934;">def</span> <span style="color: #b8bb26;">limpiar_texto</span><span style="color: #fe8019;">(</span>texto<span style="color: #fe8019;">)</span>:
<span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">if</span> <span style="color: #fb4934;">not</span> <span style="color: #fe8019;">isinstance</span><span style="color: #fe8019;">(</span>texto, <span style="color: #fe8019;">str</span><span style="color: #fe8019;">)</span>:
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">return</span> <span style="color: #b8bb26;">""</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">return</span> re.sub<span style="color: #fe8019;">(</span>r<span style="color: #b8bb26;">"&lt;[^&gt;]+&gt;"</span>, <span style="color: #b8bb26;">""</span>, texto<span style="color: #fe8019;">)</span>.strip<span style="color: #fe8019;">()</span>
</pre>
</div>
</div>
</li>
<li><a id="org753881c"></a>Almacenamiento<br />
<div class="outline-text-5" id="text-org753881c">
<ul class="org-ul">
<li>No guardar datos personales innecesarios.</li>
<li>Cifrar almacenamiento si hay datos sensibles.</li>
<li>Respaldar solo lo necesario y cumplir normativa de retención.</li>
</ul>
</div>
</li>
</ul>
</div>
<div id="outline-container-org90644e4" class="outline-4">
<h4 id="org90644e4">Protección del sitio objetivo (ética técnica)</h4>
<div class="outline-text-4" id="text-org90644e4">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Práctica</th>
<th scope="col" class="org-left">Objetivo</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Rate limiting</td>
<td class="org-left">No saturar el servidor; pausas entre peticiones</td>
</tr>

<tr>
<td class="org-left">Horarios valle</td>
<td class="org-left">Ejecutar en horas de menor tráfico si es posible</td>
</tr>

<tr>
<td class="org-left">Cache</td>
<td class="org-left">Evitar repetir peticiones innecesarias</td>
</tr>

<tr>
<td class="org-left">Respetar 429/503</td>
<td class="org-left">Detener o ralentizar si el servidor pide esperar</td>
</tr>

<tr>
<td class="org-left">No evadir bloqueos</td>
<td class="org-left">Si te bloquean, revisar si tu uso es adecuado</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-org14eb2b1" class="outline-4">
<h4 id="org14eb2b1">Proxies y escalado (consideraciones)</h4>
<div class="outline-text-4" id="text-org14eb2b1">
<ul class="org-ul">
<li>Proxies rotativos: mayor complejidad y coste; puede violar términos de uso.</li>
<li>Antes de usarlos: confirmar legalidad y política del sitio.</li>
<li>Preferir optimizar el ritmo antes que multiplicar IPs.</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org74e27a0" class="outline-3">
<h3 id="org74e27a0">Fase 7: Ejecución y mantenimiento</h3>
<div class="outline-text-3" id="text-org74e27a0">
</div>
<div id="outline-container-orgf498f01" class="outline-4">
<h4 id="orgf498f01">Logging</h4>
<div class="outline-text-4" id="text-orgf498f01">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #fb4934;">import</span> logging
logging.basicConfig<span style="color: #fe8019;">(</span>level=logging.INFO, <span style="color: #fe8019;">format</span>=<span style="color: #b8bb26;">"%(asctime)s [%(levelname)s] %(message)s"</span><span style="color: #fe8019;">)</span>
<span style="color: #83a598;">logger</span> = logging.getLogger<span style="color: #fe8019;">(</span><span style="color: #fe8019;">__name__</span><span style="color: #fe8019;">)</span>
logger.info<span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"Iniciando scraping de %s"</span>, url<span style="color: #fe8019;">)</span>
logger.warning<span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"Reintento %d para %s"</span>, intento, url<span style="color: #fe8019;">)</span>
logger.error<span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"Error en %s: %s"</span>, url, <span style="color: #fe8019;">str</span><span style="color: #b16286;">(</span>e<span style="color: #b16286;">)</span><span style="color: #fe8019;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-orgea73fa0" class="outline-4">
<h4 id="orgea73fa0">Monitoreo básico</h4>
<div class="outline-text-4" id="text-orgea73fa0">
<ul class="org-ul">
<li>Tasa de éxito vs. errores.</li>
<li>Tiempo de respuesta y códigos HTTP.</li>
<li>Cambios en la estructura (parsers que dejan de funcionar).</li>
</ul>
</div>
</div>
<div id="outline-container-orgad8ed19" class="outline-4">
<h4 id="orgad8ed19">Adaptación a cambios</h4>
<div class="outline-text-4" id="text-orgad8ed19">
<ul class="org-ul">
<li>Los sitios modifican HTML, clases y rutas.</li>
<li>Diseñar selectores robustos (evitar dependencias frágiles).</li>
<li>Revisar periódicamente que el scraper sigue funcionando.</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org26f651f" class="outline-3">
<h3 id="org26f651f">Checklist de seguridad resumido</h3>
<div class="outline-text-3" id="text-org26f651f">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-right" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">#</th>
<th scope="col" class="org-left">Verificación</th>
<th scope="col" class="org-left">Estado</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">1</td>
<td class="org-left">Términos de uso y robots.txt revisados</td>
<td class="org-left">☐</td>
</tr>

<tr>
<td class="org-right">2</td>
<td class="org-left">Sin API/alternativa viable</td>
<td class="org-left">☐</td>
</tr>

<tr>
<td class="org-right">3</td>
<td class="org-left">Credenciales en variables de entorno</td>
<td class="org-left">☐</td>
</tr>

<tr>
<td class="org-right">4</td>
<td class="org-left">User-Agent identificable</td>
<td class="org-left">☐</td>
</tr>

<tr>
<td class="org-right">5</td>
<td class="org-left">Rate limiting / pausas implementados</td>
<td class="org-left">☐</td>
</tr>

<tr>
<td class="org-right">6</td>
<td class="org-left">Manejo de errores y reintentos</td>
<td class="org-left">☐</td>
</tr>

<tr>
<td class="org-right">7</td>
<td class="org-left">Validación de URLs y dominios permitidos</td>
<td class="org-left">☐</td>
</tr>

<tr>
<td class="org-right">8</td>
<td class="org-left">Sanitización de datos extraídos</td>
<td class="org-left">☐</td>
</tr>

<tr>
<td class="org-right">9</td>
<td class="org-left">Sin almacenar datos personales innecesarios</td>
<td class="org-left">☐</td>
</tr>

<tr>
<td class="org-right">10</td>
<td class="org-left">Logging y monitoreo básico</td>
<td class="org-left">☐</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-org4cf8ffb" class="outline-3">
<h3 id="org4cf8ffb">Riesgos y mitigaciones</h3>
<div class="outline-text-3" id="text-org4cf8ffb">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Riesgo</th>
<th scope="col" class="org-left">Mitigación</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Bloqueo de IP</td>
<td class="org-left">Rate limiting, horarios valle, User-Agent adecuado</td>
</tr>

<tr>
<td class="org-left">Cambio de estructura HTML</td>
<td class="org-left">Selectores resilientes, pruebas periódicas</td>
</tr>

<tr>
<td class="org-left">Exposición de credenciales</td>
<td class="org-left">Variables de entorno, .gitignore</td>
</tr>

<tr>
<td class="org-left">Datos personales</td>
<td class="org-left">Minimización, anonimización, cumplimiento legal</td>
</tr>

<tr>
<td class="org-left">Caída del servidor objetivo</td>
<td class="org-left">Reintentos con backoff, detección de 429/503</td>
</tr>

<tr>
<td class="org-left">Malware en respuestas</td>
<td class="org-left">Validar tipos MIME, no ejecutar código descargado</td>
</tr>

<tr>
<td class="org-left">Sanciones legales</td>
<td class="org-left">Cumplir ToS, robots.txt y normativa aplicable</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-org1d43fcc" class="outline-3">
<h3 id="org1d43fcc">Referencias</h3>
<div class="outline-text-3" id="text-org1d43fcc">
<ul class="org-ul">
<li><code>Tutorial_Webscraping_XPath_Blogs.org</code>: Técnicas de scraping con XPath, ejemplo likcos.</li>
<li><code>Fuentes_Datos_Gobierno_Abierto.org</code>: INEGI, datos.gob.mx, clima, alternativas legales.</li>
<li><code>Tutorial_XPath.org</code>: Sintaxis XPath y comparación XPath vs CSS.</li>
<li>robots.txt: <code>https://dominio.com/robots.txt</code></li>
<li>RGPD / LFPDPPP: normativa aplicable a datos personales según jurisdicción.</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orga9ba0fa" class="outline-2">
<h2 id="orga9ba0fa">Web Scraping con XPath para Blogs Estáticos</h2>
<div class="outline-text-2" id="text-orga9ba0fa">
</div>
<div id="outline-container-org8e53ea9" class="outline-3">
<h3 id="org8e53ea9">Introducción</h3>
<div class="outline-text-3" id="text-org8e53ea9">
<p>
Este apartado explica cómo hacer <b>web scraping</b> con XPath sobre <b>blogs estáticos</b> (HTML
pre-renderizado en el servidor), qué consideraciones técnicas y éticas tener, y por qué
<b>sitios como Amazon</b> no son adecuados para este enfoque.
</p>
</div>
<div id="outline-container-org1725ae5" class="outline-4">
<h4 id="org1725ae5">Prerrequisitos</h4>
<div class="outline-text-4" id="text-org1725ae5">
<ul class="org-ul">
<li>Python 3 con <code>requests</code>, <code>lxml</code> (o <code>BeautifulSoup</code> con parser lxml).</li>
<li>Conocimientos básicos de XPath (ver <code>Tutorial_XPath.org</code>).</li>
<li>Comprensión de la estructura HTML (etiquetas, clases, ids).</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org5c17893" class="outline-3">
<h3 id="org5c17893">Blogs estáticos vs. sitios dinámicos</h3>
<div class="outline-text-3" id="text-org5c17893">
</div>
<div id="outline-container-orgaaa4d20" class="outline-4">
<h4 id="orgaaa4d20">¿Qué es un blog estático?</h4>
<div class="outline-text-4" id="text-orgaaa4d20">
<p>
Un blog estático sirve HTML ya generado por el servidor. Al hacer una petición GET,
recibes el contenido completo en la respuesta. No necesitas ejecutar JavaScript para
ver los artículos.
</p>
</div>
<ul class="org-ul">
<li><a id="orge534db9"></a>Características típicas<br />
<div class="outline-text-5" id="text-orge534db9">
<ul class="org-ul">
<li>HTML con estructura predecible (artículos en <code>&lt;article&gt;</code>, <code>&lt;div class</code>"post"&gt;=, etc.).</li>
<li>Paginación mediante URLs distintas (<code>/page/2/</code>, <code>?p=2</code>).</li>
<li>Contenido público y pensado para ser indexado por buscadores.</li>
<li>Sin capchas agresivos ni medidas anti-bot fuertes (en muchos casos).</li>
</ul>
</div>
</li>
</ul>
</div>
<div id="outline-container-org2d2ffa5" class="outline-4">
<h4 id="org2d2ffa5">¿Por qué son adecuados para scraping?</h4>
<div class="outline-text-4" id="text-org2d2ffa5">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Aspecto</th>
<th scope="col" class="org-left">Blogs estáticos</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Contenido</td>
<td class="org-left">HTML completo en la respuesta</td>
</tr>

<tr>
<td class="org-left">Herramientas</td>
<td class="org-left"><code>requests</code> + <code>lxml</code> suficientes</td>
</tr>

<tr>
<td class="org-left">Estructura</td>
<td class="org-left">Generalmente clara y consistente</td>
</tr>

<tr>
<td class="org-left">Legalidad</td>
<td class="org-left">Más predecible si es uso personal</td>
</tr>

<tr>
<td class="org-left">robots.txt</td>
<td class="org-left">Suele permitir acceso a contenido</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="outline-container-orgb319767" class="outline-3">
<h3 id="orgb319767">Técnicas de scraping para blogs con XPath</h3>
<div class="outline-text-3" id="text-orgb319767">
</div>
<div id="outline-container-org7dcb90f" class="outline-4">
<h4 id="org7dcb90f">Paso 1: Inspeccionar la estructura HTML</h4>
<div class="outline-text-4" id="text-org7dcb90f">
<p>
Antes de escribir XPath, abre el blog en el navegador y usa las herramientas de
desarrollador (F12) para ver:
</p>

<ul class="org-ul">
<li>Contenedor de artículos: <code>&lt;article&gt;</code>, <code>&lt;div class</code>"post"&gt;=, <code>&lt;div class</code>"entry"&gt;=.</li>
<li>Título: <code>&lt;h1&gt;</code>, <code>&lt;h2&gt;</code>, <code>&lt;a class</code>"title"&gt;=.</li>
<li>Autor, fecha, categorías.</li>
<li>Enlace al artículo completo: <code>&lt;a href</code>"&#x2026;"&gt;=.</li>
<li>Snippet o extracto: <code>&lt;p class</code>"excerpt"&gt;=, <code>&lt;div class</code>"summary"&gt;=.</li>
</ul>
</div>
</div>
<div id="outline-container-org872cbcd" class="outline-4">
<h4 id="org872cbcd">Paso 2: Obtener el HTML</h4>
<div class="outline-text-4" id="text-org872cbcd">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #fb4934;">import</span> requests
<span style="color: #fb4934;">from</span> lxml <span style="color: #fb4934;">import</span> etree

<span style="color: #83a598;">url</span> = <span style="color: #b8bb26;">"https://ejemplo-blog.com/"</span>
<span style="color: #83a598;">headers</span> = <span style="color: #fe8019;">{</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #b8bb26;">"User-Agent"</span>: <span style="color: #b8bb26;">"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36"</span>
<span style="color: #fe8019;">}</span>
<span style="color: #83a598;">response</span> = requests.get<span style="color: #fe8019;">(</span>url, headers=headers<span style="color: #fe8019;">)</span>
response.raise_for_status<span style="color: #fe8019;">()</span>
<span style="color: #83a598;">html</span> = response.content
</pre>
</div>
</div>
</div>
<div id="outline-container-org849bdca" class="outline-4">
<h4 id="org849bdca">Paso 3: Parsear y aplicar XPath</h4>
<div class="outline-text-4" id="text-org849bdca">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #83a598;">tree</span> = etree.HTML<span style="color: #fe8019;">(</span>html<span style="color: #fe8019;">)</span>

<span style="color: #928374;"># </span><span style="color: #928374;">Ejemplos t&#237;picos para blogs (ajustar selectores seg&#250;n el sitio):
</span><span style="color: #928374;"># </span><span style="color: #928374;">Todos los art&#237;culos
</span><span style="color: #83a598;">articulos</span> = tree.xpath<span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"//article"</span><span style="color: #fe8019;">)</span>
<span style="color: #928374;"># </span><span style="color: #928374;">o
</span><span style="color: #83a598;">articulos</span> = tree.xpath<span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"//div[contains(@class, 'post')]"</span><span style="color: #fe8019;">)</span>

<span style="color: #928374;"># </span><span style="color: #928374;">T&#237;tulo del primer art&#237;culo
</span><span style="color: #83a598;">titulo</span> = tree.xpath<span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"//article[1]//h2/a/text()"</span><span style="color: #fe8019;">)[</span>0<span style="color: #fe8019;">]</span>.strip<span style="color: #fe8019;">()</span>

<span style="color: #928374;"># </span><span style="color: #928374;">Enlace al art&#237;culo
</span><span style="color: #83a598;">enlace</span> = tree.xpath<span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"//article[1]//h2/a/@href"</span><span style="color: #fe8019;">)[</span>0<span style="color: #fe8019;">]</span>

<span style="color: #928374;"># </span><span style="color: #928374;">Fecha (si est&#225; en un elemento con clase 'date')
</span><span style="color: #83a598;">fecha</span> = tree.xpath<span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"//article[1]//time/@datetime"</span><span style="color: #fe8019;">)</span>
<span style="color: #83a598;">fecha</span> = fecha<span style="color: #fe8019;">[</span>0<span style="color: #fe8019;">]</span> <span style="color: #fb4934;">if</span> fecha <span style="color: #fb4934;">else</span> tree.xpath<span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"//article[1]//*[contains(@class,'date')]/text()"</span><span style="color: #fe8019;">)</span>

<span style="color: #928374;"># </span><span style="color: #928374;">Extracto o resumen
</span><span style="color: #83a598;">extracto</span> = tree.xpath<span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"//article[1]//div[contains(@class,'excerpt')]//text()"</span><span style="color: #fe8019;">)</span>
<span style="color: #83a598;">extracto</span> = <span style="color: #b8bb26;">" "</span>.join<span style="color: #fe8019;">(</span>t.strip<span style="color: #b16286;">()</span> <span style="color: #fb4934;">for</span> t <span style="color: #fb4934;">in</span> extracto <span style="color: #fb4934;">if</span> t.strip<span style="color: #b16286;">()</span><span style="color: #fe8019;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org0f9755d" class="outline-4">
<h4 id="org0f9755d">Paso 4: Extraer todos los artículos de una página</h4>
<div class="outline-text-4" id="text-org0f9755d">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #fb4934;">def</span> <span style="color: #b8bb26;">extraer_articulos_pagina</span><span style="color: #fe8019;">(</span>html<span style="color: #fe8019;">)</span>:
<span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">tree</span> = etree.HTML<span style="color: #fe8019;">(</span>html<span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">articulos</span> = tree.xpath<span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"//article"</span><span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">resultado</span> = <span style="color: #fe8019;">[]</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">for</span> art <span style="color: #fb4934;">in</span> articulos:
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">titulo</span> = art.xpath<span style="color: #fe8019;">(</span><span style="color: #b8bb26;">".//h2/a/text() | .//h1/a/text() | .//.//a[contains(@class,'title')]/text()"</span><span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">enlace</span> = art.xpath<span style="color: #fe8019;">(</span><span style="color: #b8bb26;">".//h2/a/@href | .//h1/a/@href | .//a[contains(@class,'title')]/@href"</span><span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">extracto</span> = art.xpath<span style="color: #fe8019;">(</span><span style="color: #b8bb26;">".//div[contains(@class,'excerpt')]//text() | .//p[contains(@class,'summary')]//text()"</span><span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   resultado.append<span style="color: #fe8019;">(</span><span style="color: #b16286;">{</span>
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #b8bb26;">"titulo"</span>: titulo<span style="color: #b8bb26;">[</span>0<span style="color: #b8bb26;">]</span>.strip<span style="color: #b8bb26;">()</span> <span style="color: #fb4934;">if</span> titulo <span style="color: #fb4934;">else</span> <span style="color: #b8bb26;">""</span>,
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #b8bb26;">"enlace"</span>: enlace<span style="color: #b8bb26;">[</span>0<span style="color: #b8bb26;">]</span> <span style="color: #fb4934;">if</span> enlace <span style="color: #fb4934;">else</span> <span style="color: #b8bb26;">""</span>,
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #b8bb26;">"extracto"</span>: <span style="color: #b8bb26;">" "</span>.join<span style="color: #b8bb26;">(</span>t.strip<span style="color: #83a598;">()</span> <span style="color: #fb4934;">for</span> t <span style="color: #fb4934;">in</span> extracto <span style="color: #fb4934;">if</span> t.strip<span style="color: #83a598;">()</span><span style="color: #b8bb26;">)[</span>:200<span style="color: #b8bb26;">]</span>
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #b16286;">}</span><span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">return</span> resultado
</pre>
</div>
</div>
</div>
<div id="outline-container-org2e9c397" class="outline-4">
<h4 id="org2e9c397">Paso 5: Paginación</h4>
<div class="outline-text-4" id="text-org2e9c397">
<p>
Muchos blogs usan URLs como <code>/page/2/</code>, <code>/?paged=2</code>, <code>/blog?page=2</code>:
</p>

<div class="org-src-container">
<pre class="src src-python"><span style="color: #fb4934;">import</span> time

<span style="color: #83a598;">base_url</span> = <span style="color: #b8bb26;">"https://ejemplo-blog.com/page/{}/"</span>
<span style="color: #fb4934;">for</span> pagina <span style="color: #fb4934;">in</span> <span style="color: #fe8019;">range</span><span style="color: #fe8019;">(</span>1, 6<span style="color: #fe8019;">)</span>:  <span style="color: #928374;"># </span><span style="color: #928374;">p&#225;ginas 1 a 5
</span><span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">url</span> = base_url.<span style="color: #fe8019;">format</span><span style="color: #fe8019;">(</span>pagina<span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">response</span> = requests.get<span style="color: #fe8019;">(</span>url, headers=headers<span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">articulos</span> = extraer_articulos_pagina<span style="color: #fe8019;">(</span>response.content<span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">for</span> a <span style="color: #fb4934;">in</span> articulos:
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #fe8019;">print</span><span style="color: #fe8019;">(</span>a<span style="color: #b16286;">[</span><span style="color: #b8bb26;">"titulo"</span><span style="color: #b16286;">]</span>, a<span style="color: #b16286;">[</span><span style="color: #b8bb26;">"enlace"</span><span style="color: #b16286;">]</span><span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   time.sleep<span style="color: #fe8019;">(</span>1<span style="color: #fe8019;">)</span>  <span style="color: #928374;"># </span><span style="color: #928374;">respetar el servidor: pausa entre peticiones</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org63ff749" class="outline-4">
<h4 id="org63ff749">XPath útiles para blogs (resumen)</h4>
<div class="outline-text-4" id="text-org63ff749">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Objetivo</th>
<th scope="col" class="org-left">XPath típico</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Contenedor posts</td>
<td class="org-left"><code>//article</code>, <code>//div[contains(@class,'post')]</code></td>
</tr>

<tr>
<td class="org-left">Título</td>
<td class="org-left"><code>.//h1/a/text()</code>, <code>.//h2/a/text()</code></td>
</tr>

<tr>
<td class="org-left">Enlace</td>
<td class="org-left"><code>.//h1/a/@href</code>, <code>.//a[contains(@class,'entry-link')]/@href</code></td>
</tr>

<tr>
<td class="org-left">Fecha</td>
<td class="org-left"><code>.//time/@datetime</code>, <code>.//*[contains(@class,'date')]/text()</code></td>
</tr>

<tr>
<td class="org-left">Autor</td>
<td class="org-left"><code>.//*[contains(@class,'author')]/text()</code></td>
</tr>

<tr>
<td class="org-left">Categorías</td>
<td class="org-left"><code>.//a[contains(@class,'category')]/text()</code></td>
</tr>

<tr>
<td class="org-left">Extracto</td>
<td class="org-left"><code>.//div[contains(@class,'excerpt')]//text()</code></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="outline-container-org28179e5" class="outline-3">
<h3 id="org28179e5">Consideraciones éticas y legales</h3>
<div class="outline-text-3" id="text-org28179e5">
</div>
<div id="outline-container-org6f493f3" class="outline-4">
<h4 id="org6f493f3">Buenas prácticas</h4>
<div class="outline-text-4" id="text-org6f493f3">
<ol class="org-ol">
<li><b>robots.txt</b>: Revisar si el sitio prohíbe o limita el scraping.</li>
<li><b>User-Agent</b>: Identificarse de forma razonable (no hacerse pasar por bot de Google).</li>
<li><b>Rate limiting</b>: Hacer pausas entre peticiones (<code>time.sleep(1)</code> o más).</li>
<li><b>Uso razonable</b>: Evitar sobrecargar el servidor; respetar términos de uso.</li>
<li><b>Atribución</b>: Si redistribuyes contenido, cita la fuente.</li>
</ol>
</div>
</div>
<div id="outline-container-org9823bdd" class="outline-4">
<h4 id="org9823bdd">Cuándo es más aceptable</h4>
<div class="outline-text-4" id="text-org9823bdd">
<ul class="org-ul">
<li>Blogs personales o pequeños con contenido público.</li>
<li>Uso educativo o de investigación.</li>
<li>Agregadores de noticias que respetan robots.txt y términos de uso.</li>
<li>Contenido bajo licencias abiertas (CC, etc.).</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-org6dea390" class="outline-3">
<h3 id="org6dea390">Por qué NO es adecuado hacer scraping en Amazon (y similares)</h3>
<div class="outline-text-3" id="text-org6dea390">
</div>
<div id="outline-container-org6ebd629" class="outline-4">
<h4 id="org6ebd629">1. Términos de uso y condiciones</h4>
<div class="outline-text-4" id="text-org6ebd629">
<p>
Amazon (y la mayoría de grandes plataformas) <b>prohíben explícitamente</b> el scraping en
sus condiciones de servicio. Hacerlo puede suponer:
</p>

<ul class="org-ul">
<li>Suspensión o cierre de cuenta.</li>
<li>Acciones legales.</li>
<li>Bloqueo de IP.</li>
</ul>

<p>
No es una limitación técnica, sino contractual y legal.
</p>
</div>
</div>
<div id="outline-container-orgc275917" class="outline-4">
<h4 id="orgc275917">2. Contenido dinámico (JavaScript)</h4>
<div class="outline-text-4" id="text-orgc275917">
<p>
Amazon carga gran parte del contenido mediante JavaScript:
</p>

<ul class="org-ul">
<li>Listados de productos se actualizan con peticiones AJAX.</li>
<li>Precios, disponibilidad y valoraciones se insertan después del HTML inicial.</li>
<li>Una petición con <code>requests</code> devuelve HTML casi vacío respecto a lo que ves en el navegador.</li>
</ul>

<p>
Para scraping efectivo haría falta un navegador headless (Selenium, Playwright), lo que:
</p>

<ul class="org-ul">
<li>Es más complejo y pesado.</li>
<li>Genera más carga para el servidor.</li>
<li>Suele detectarse más fácilmente como bot.</li>
</ul>
</div>
</div>
<div id="outline-container-org6586829" class="outline-4">
<h4 id="org6586829">3. Medidas anti-bot</h4>
<div class="outline-text-4" id="text-org6586829">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Medida</th>
<th scope="col" class="org-left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Rate limiting</td>
<td class="org-left">Bloqueo temporal tras muchas peticiones</td>
</tr>

<tr>
<td class="org-left">CAPTCHAs</td>
<td class="org-left">Verificaciones que rompen automatización</td>
</tr>

<tr>
<td class="org-left">Fingerprinting</td>
<td class="org-left">Detección de patrones de navegación</td>
</tr>

<tr>
<td class="org-left">IP blocking</td>
<td class="org-left">Bloqueo de IPs sospechosas</td>
</tr>

<tr>
<td class="org-left">Contenido ofuscado</td>
<td class="org-left">Clases/ids aleatorios que cambian</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-org64ac299" class="outline-4">
<h4 id="org64ac299">4. Estructura cambiante</h4>
<div class="outline-text-4" id="text-org64ac299">
<ul class="org-ul">
<li>El HTML de Amazon cambia con frecuencia (A/B tests, rediseños).</li>
<li>Selectores XPath que funcionan hoy pueden dejar de hacerlo en semanas.</li>
<li>Mantener un scraper estable es costoso y frágil.</li>
</ul>
</div>
</div>
<div id="outline-container-orgd8076ad" class="outline-4">
<h4 id="orgd8076ad">5. Alternativas legales y recomendadas</h4>
<div class="outline-text-4" id="text-orgd8076ad">
<ul class="org-ul">
<li><b>Amazon Product Advertising API</b>: Para afiliados y partners autorizados.</li>
<li><b>Otros APIs oficiales</b>: Muchas tiendas ofrecen APIs para precios, inventario, etc.</li>
<li><b>Bases de datos de terceros</b>: Datasets académicos o comerciales de productos.</li>
</ul>
</div>
</div>
<div id="outline-container-org54a539c" class="outline-4">
<h4 id="org54a539c">Resumen: Amazon vs. blog estático</h4>
<div class="outline-text-4" id="text-org54a539c">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Aspecto</th>
<th scope="col" class="org-left">Blog estático</th>
<th scope="col" class="org-left">Amazon (y similares)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Términos de uso</td>
<td class="org-left">Suele ser tolerable</td>
<td class="org-left">Prohibido explícitamente</td>
</tr>

<tr>
<td class="org-left">Contenido</td>
<td class="org-left">HTML estático completo</td>
<td class="org-left">Mucho contenido dinámico</td>
</tr>

<tr>
<td class="org-left">Anti-bot</td>
<td class="org-left">Escaso o inexistente</td>
<td class="org-left">Muy presente</td>
</tr>

<tr>
<td class="org-left">Estructura</td>
<td class="org-left">Estable y predecible</td>
<td class="org-left">Cambia con frecuencia</td>
</tr>

<tr>
<td class="org-left">Alternativas</td>
<td class="org-left">Scraping razonable</td>
<td class="org-left">Usar API oficial</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="outline-container-org0e299ab" class="outline-3">
<h3 id="org0e299ab">Ejemplo completo: scraper para un blog estático</h3>
<div class="outline-text-3" id="text-org0e299ab">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #fb4934;">import</span> requests
<span style="color: #fb4934;">from</span> lxml <span style="color: #fb4934;">import</span> etree
<span style="color: #fb4934;">import</span> time
<span style="color: #fb4934;">import</span> csv

<span style="color: #fb4934;">def</span> <span style="color: #b8bb26;">scrape_blog</span><span style="color: #fe8019;">(</span>base_url, num_paginas=3<span style="color: #fe8019;">)</span>:
<span style="background-color: #3c3836;"> </span>   <span style="color: #dfd2b8;">"""Extrae art&#237;culos de un blog est&#225;tico con paginaci&#243;n /page/N/."""</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">headers</span> = <span style="color: #fe8019;">{</span><span style="color: #b8bb26;">"User-Agent"</span>: <span style="color: #b8bb26;">"Mozilla/5.0 (compatible; BlogStudyBot/1.0)"</span><span style="color: #fe8019;">}</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">articulos</span> = <span style="color: #fe8019;">[]</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">for</span> p <span style="color: #fb4934;">in</span> <span style="color: #fe8019;">range</span><span style="color: #fe8019;">(</span>1, num_paginas + 1<span style="color: #fe8019;">)</span>:
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">url</span> = f<span style="color: #b8bb26;">"</span>{base_url.rstrip('/')}<span style="color: #b8bb26;">/page/</span>{p}<span style="color: #b8bb26;">/"</span> <span style="color: #fb4934;">if</span> p &gt; 1 <span style="color: #fb4934;">else</span> base_url
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">try</span>:
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">r</span> = requests.get<span style="color: #fe8019;">(</span>url, headers=headers, timeout=10<span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   r.raise_for_status<span style="color: #fe8019;">()</span>
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">tree</span> = etree.HTML<span style="color: #fe8019;">(</span>r.content<span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">for</span> art <span style="color: #fb4934;">in</span> tree.xpath<span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"//article"</span><span style="color: #fe8019;">)</span>:
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">tit</span> = art.xpath<span style="color: #fe8019;">(</span><span style="color: #b8bb26;">".//h2/a/text() | .//h1/a/text()"</span><span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">lnk</span> = art.xpath<span style="color: #fe8019;">(</span><span style="color: #b8bb26;">".//h2/a/@href | .//h1/a/@href"</span><span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">ext</span> = art.xpath<span style="color: #fe8019;">(</span><span style="color: #b8bb26;">".//div[contains(@class,'excerpt')]//text()"</span><span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   articulos.append<span style="color: #fe8019;">(</span><span style="color: #b16286;">{</span>
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #b8bb26;">"titulo"</span>: tit<span style="color: #b8bb26;">[</span>0<span style="color: #b8bb26;">]</span>.strip<span style="color: #b8bb26;">()</span> <span style="color: #fb4934;">if</span> tit <span style="color: #fb4934;">else</span> <span style="color: #b8bb26;">""</span>,
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #b8bb26;">"enlace"</span>: lnk<span style="color: #b8bb26;">[</span>0<span style="color: #b8bb26;">]</span> <span style="color: #fb4934;">if</span> lnk <span style="color: #fb4934;">else</span> <span style="color: #b8bb26;">""</span>,
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #b8bb26;">"extracto"</span>: <span style="color: #b8bb26;">" "</span>.join<span style="color: #b8bb26;">(</span>t.strip<span style="color: #83a598;">()</span> <span style="color: #fb4934;">for</span> t <span style="color: #fb4934;">in</span> ext <span style="color: #fb4934;">if</span> t.strip<span style="color: #83a598;">()</span><span style="color: #b8bb26;">)[</span>:300<span style="color: #b8bb26;">]</span>
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #b16286;">}</span><span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">except</span> <span style="color: #fabd2f;">Exception</span> <span style="color: #fb4934;">as</span> e:
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #fe8019;">print</span><span style="color: #fe8019;">(</span>f<span style="color: #b8bb26;">"Error en </span>{url}<span style="color: #b8bb26;">: </span>{e}<span style="color: #b8bb26;">"</span><span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   time.sleep<span style="color: #fe8019;">(</span>1<span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">return</span> articulos

<span style="color: #928374;"># </span><span style="color: #928374;">Uso (sustituir por un blog real que permita scraping):
</span><span style="color: #928374;"># </span><span style="color: #928374;">datos = scrape_blog("https://ejemplo-blog.com/", num_paginas=3)
</span><span style="color: #928374;"># </span><span style="color: #928374;">for a in datos:
</span><span style="color: #928374;">#     </span><span style="color: #928374;">print(a["titulo"], "-&gt;", a["enlace"])</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org9834725" class="outline-3">
<h3 id="org9834725">Dependencias</h3>
<div class="outline-text-3" id="text-org9834725">
<pre class="example" id="orgadc8ac2">
pip install requests lxml
</pre>
</div>
</div>
<div id="outline-container-orgba16d45" class="outline-3">
<h3 id="orgba16d45">Referencias</h3>
<div class="outline-text-3" id="text-orgba16d45">
<ul class="org-ul">
<li><code>Tutorial_XPath.org</code>: Sintaxis y ejemplos de XPath.</li>
<li><code>robots.txt</code>: Revisar <code>https://dominio.com/robots.txt</code> antes de scrapear.</li>
<li>APIs: Buscar si el sitio ofrece una API oficial antes de automatizar.</li>
</ul>
</div>
</div>
</div>
<div id="outline-container-orgdb06e3a" class="outline-2">
<h2 id="orgdb06e3a">Fuentes de Datos Gubernamentales y Abiertos: INEGI, datos.gob.mx y más</h2>
<div class="outline-text-2" id="text-orgdb06e3a">
</div>
<div id="outline-container-org0680a56" class="outline-3">
<h3 id="org0680a56">Introducción</h3>
<div class="outline-text-3" id="text-org0680a56">
<p>
Instituciones gubernamentales publican <b>datos abiertos</b> bajo marcos legales que permiten
su reutilización. Es preferible usar <b>APIs oficiales</b> o <b>descargas directas</b> en lugar de
scraping cuando están disponibles: son legales, estables y eficientes.
</p>

<p>
Este apartado recopila fuentes como <b>INEGI</b>, <b>datos.gob.mx</b> y otras donde sí podemos
obtener información de forma adecuada.
</p>
</div>
</div>
<div id="outline-container-orge69dabb" class="outline-3">
<h3 id="orge69dabb">INEGI (México)</h3>
<div class="outline-text-3" id="text-orge69dabb">
</div>
<div id="outline-container-orgffd6579" class="outline-4">
<h4 id="orgffd6579">Qué es INEGI</h4>
<div class="outline-text-4" id="text-orgffd6579">
<p>
El <b>Instituto Nacional de Estadística y Geografía</b> (INEGI) produce estadísticas y
geografía de México. Ofrece varias formas de acceso programático a sus datos.
</p>
</div>
</div>
<div id="outline-container-org9591e4c" class="outline-4">
<h4 id="org9591e4c">API del Banco de Indicadores</h4>
<div class="outline-text-4" id="text-org9591e4c">
</div>
<ul class="org-ul">
<li><a id="orgfc5fffa"></a>Registro y token<br />
<div class="outline-text-5" id="text-orgfc5fffa">
<ul class="org-ul">
<li>URL: <code>https://www.inegi.org.mx/servicios/api_indicadores.html</code></li>
<li>Requiere <b>registro</b> para obtener un <b>token</b>.</li>
<li>Registro: <code>https://www.inegi.org.mx/app/desarrolladores/registro/default.html</code></li>
</ul>
</div>
</li>
<li><a id="orgd1a26ae"></a>Parámetros típicos<br />
<div class="outline-text-5" id="text-orgd1a26ae">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Parámetro</th>
<th scope="col" class="org-left">Descripción</th>
<th scope="col" class="org-left">Ejemplo</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">IdIndicador</td>
<td class="org-left">Clave del indicador</td>
<td class="org-left">1002000001 (Población total)</td>
</tr>

<tr>
<td class="org-left">Idioma</td>
<td class="org-left">es / en</td>
<td class="org-left">es</td>
</tr>

<tr>
<td class="org-left">Área geográfica</td>
<td class="org-left">00=nacional, 99=entidad, 999=municipio</td>
<td class="org-left">00</td>
</tr>

<tr>
<td class="org-left">Dato más reciente</td>
<td class="org-left">true / false</td>
<td class="org-left">false (serie histórica)</td>
</tr>

<tr>
<td class="org-left">Fuente</td>
<td class="org-left">BISE, etc.</td>
<td class="org-left">BISE</td>
</tr>

<tr>
<td class="org-left">Token</td>
<td class="org-left">Token de registro</td>
<td class="org-left">[tu token]</td>
</tr>

<tr>
<td class="org-left">Formato</td>
<td class="org-left">json, jsonp, xml</td>
<td class="org-left">json</td>
</tr>
</tbody>
</table>
</div>
</li>
<li><a id="org097b55c"></a>Ejemplo en Python (API Indicadores)<br />
<div class="outline-text-5" id="text-org097b55c">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #fb4934;">import</span> requests

<span style="color: #83a598;">TOKEN</span> = <span style="color: #b8bb26;">"TU_TOKEN_AQUI"</span>  <span style="color: #928374;"># </span><span style="color: #928374;">Obtener en inegi.org.mx/app/desarrolladores/registro
</span><span style="color: #928374;"># </span><span style="color: #928374;">Indicador 1002000001 = Poblaci&#243;n total
</span><span style="color: #83a598;">url</span> = <span style="color: #fe8019;">(</span>
<span style="background-color: #3c3836;"> </span>   f<span style="color: #b8bb26;">"https://www.inegi.org.mx/app/api/indicadores/desarrolladores/jsonxml/"</span>
<span style="background-color: #3c3836;"> </span>   f<span style="color: #b8bb26;">"INDICATOR/1002000001/es/00/false/BISE/2.0/</span>{TOKEN}<span style="color: #b8bb26;">?type=json"</span>
<span style="color: #fe8019;">)</span>
<span style="color: #83a598;">response</span> = requests.get<span style="color: #fe8019;">(</span>url<span style="color: #fe8019;">)</span>
<span style="color: #83a598;">data</span> = response.json<span style="color: #fe8019;">()</span>
<span style="color: #928374;"># </span><span style="color: #928374;">Estructura: data["Series"][0]["OBSERVATIONS"]
</span><span style="color: #fb4934;">for</span> obs <span style="color: #fb4934;">in</span> data.get<span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"Series"</span>, <span style="color: #b16286;">[</span><span style="color: #b8bb26;">{}</span><span style="color: #b16286;">]</span><span style="color: #fe8019;">)[</span>0<span style="color: #fe8019;">]</span>.get<span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"OBSERVATIONS"</span>, <span style="color: #b16286;">[]</span><span style="color: #fe8019;">)</span>:
<span style="background-color: #3c3836;"> </span>   <span style="color: #fe8019;">print</span><span style="color: #fe8019;">(</span>obs<span style="color: #b16286;">[</span><span style="color: #b8bb26;">"TIME_PERIOD"</span><span style="color: #b16286;">]</span>, obs<span style="color: #b16286;">[</span><span style="color: #b8bb26;">"OBS_VALUE"</span><span style="color: #b16286;">]</span><span style="color: #fe8019;">)</span>
</pre>
</div>
</div>
</li>
</ul>
</div>
<div id="outline-container-orgf7969a6" class="outline-4">
<h4 id="orgf7969a6">API DENUE (Directorio Estadístico Nacional de Unidades Económicas)</h4>
<div class="outline-text-4" id="text-orgf7969a6">
<ul class="org-ul">
<li>URL: <code>https://www.inegi.org.mx/servicios/api_denue.html</code></li>
<li>Busca establecimientos por palabra, actividad económica, ubicación, etc.</li>
<li>Requiere token.</li>
<li>Devuelve JSON con unidades económicas.</li>
</ul>
</div>
<ul class="org-ul">
<li><a id="org362d69f"></a>Ejemplo de consulta DENUE<br />
<div class="outline-text-5" id="text-org362d69f">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #83a598;">TOKEN</span> = <span style="color: #b8bb26;">"TU_TOKEN"</span>
<span style="color: #83a598;">busqueda</span> = <span style="color: #b8bb26;">"restaurante"</span>
<span style="color: #83a598;">entidad</span> = <span style="color: #b8bb26;">"19"</span>  <span style="color: #928374;"># </span><span style="color: #928374;">Nuevo Le&#243;n
</span><span style="color: #83a598;">url</span> = f<span style="color: #b8bb26;">"https://www.inegi.org.mx/app/api/denue/v1/consulta/buscar/</span>{busqueda}<span style="color: #b8bb26;">/</span>{entidad}<span style="color: #b8bb26;">/</span>{TOKEN}<span style="color: #b8bb26;">"</span>
<span style="color: #83a598;">response</span> = requests.get<span style="color: #fe8019;">(</span>url<span style="color: #fe8019;">)</span>
<span style="color: #83a598;">establecimientos</span> = response.json<span style="color: #fe8019;">()</span>
</pre>
</div>
</div>
</li>
</ul>
</div>
<div id="outline-container-org9af15e6" class="outline-4">
<h4 id="org9af15e6">Datos Abiertos INEGI</h4>
<div class="outline-text-4" id="text-org9af15e6">
<ul class="org-ul">
<li>URL: <code>https://www.inegi.org.mx/datosabiertos/</code></li>
<li>Archivos en formatos estándar (CSV, Excel, etc.).</li>
<li>Descarga directa sin API; suele usarse para conjuntos grandes.</li>
</ul>
</div>
</div>
<div id="outline-container-orgdd395bb" class="outline-4">
<h4 id="orgdd395bb">Descarga Masiva INEGI</h4>
<div class="outline-text-4" id="text-orgdd395bb">
<ul class="org-ul">
<li>URL: <code>https://www.inegi.org.mx/app/descarga/</code></li>
<li>Permite seleccionar DENUE, Banco de Indicadores, Inventario Nacional de Viviendas,
microdatos y tabulados por área geográfica, tema, período y formato.</li>
</ul>
</div>
</div>
<div id="outline-container-org2548060" class="outline-4">
<h4 id="org2548060">Librería inegipy (Python)</h4>
<div class="outline-text-4" id="text-org2548060">
<pre class="example" id="org76e3026">
pip install inegipy
</pre>

<p>
Facilita el acceso al Banco de Indicadores, DENUE y Marco Geoestadístico.
Documentación: <code>https://pypi.org/project/inegipy/</code>
</p>
</div>
</div>
</div>
<div id="outline-container-org6679242" class="outline-3">
<h3 id="org6679242">datos.gob.mx (Plataforma Nacional de Datos Abiertos)</h3>
<div class="outline-text-3" id="text-org6679242">
</div>
<div id="outline-container-orgf997731" class="outline-4">
<h4 id="orgf997731">Qué es datos.gob.mx</h4>
<div class="outline-text-4" id="text-orgf997731">
<p>
Plataforma centralizada de <b>datos abiertos</b> del Gobierno de México. Incluye miles de
bases de datos de dependencias federales, estatales y organismos autónomos.
</p>

<ul class="org-ul">
<li>URL: <code>https://datos.gob.mx/</code></li>
<li>Más de 5 000 bases de datos.</li>
<li>Categorías: Economía, Educación, Salud, Cultura, Ciencia y Tecnología, etc.</li>
</ul>
</div>
</div>
<div id="outline-container-org888e160" class="outline-4">
<h4 id="org888e160">API CKAN</h4>
<div class="outline-text-4" id="text-org888e160">
<p>
La plataforma usa <b>CKAN</b>. Su API permite listar conjuntos, buscar y obtener URLs de
descarga de recursos (CSV, Excel, etc.).
</p>
</div>
<ul class="org-ul">
<li><a id="org53f4f85"></a>Endpoints útiles<br />
<div class="outline-text-5" id="text-org53f4f85">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Acción</th>
<th scope="col" class="org-left">URL</th>
<th scope="col" class="org-left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Listar datasets</td>
<td class="org-left"><code>/api/3/action/package_list</code></td>
<td class="org-left">IDs de todos los conjuntos</td>
</tr>

<tr>
<td class="org-left">Ver dataset</td>
<td class="org-left"><code>/api/3/action/package_show?id=ID</code></td>
<td class="org-left">Metadatos y recursos</td>
</tr>

<tr>
<td class="org-left">Buscar</td>
<td class="org-left"><code>/api/3/action/package_search?q=TERMINO</code></td>
<td class="org-left">Búsqueda por término</td>
</tr>

<tr>
<td class="org-left">Ver recurso</td>
<td class="org-left"><code>/api/3/action/resource_show?id=ID</code></td>
<td class="org-left">Detalles de un recurso</td>
</tr>
</tbody>
</table>
</div>
</li>
<li><a id="orgc17854a"></a>Ejemplo: listar y buscar conjuntos de datos<br />
<div class="outline-text-5" id="text-orgc17854a">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #fb4934;">import</span> requests

<span style="color: #83a598;">BASE</span> = <span style="color: #b8bb26;">"https://datos.gob.mx/api/3/action"</span>

<span style="color: #928374;"># </span><span style="color: #928374;">Listar todos los IDs de conjuntos
</span><span style="color: #83a598;">r</span> = requests.get<span style="color: #fe8019;">(</span>f<span style="color: #b8bb26;">"</span>{BASE}<span style="color: #b8bb26;">/package_list"</span><span style="color: #fe8019;">)</span>
<span style="color: #83a598;">datasets</span> = r.json<span style="color: #fe8019;">()</span>.get<span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"result"</span>, <span style="color: #b16286;">[]</span><span style="color: #fe8019;">)</span>

<span style="color: #928374;"># </span><span style="color: #928374;">Buscar por t&#233;rmino
</span><span style="color: #83a598;">r</span> = requests.get<span style="color: #fe8019;">(</span>f<span style="color: #b8bb26;">"</span>{BASE}<span style="color: #b8bb26;">/package_search"</span>, params=<span style="color: #b16286;">{</span><span style="color: #b8bb26;">"q"</span>: <span style="color: #b8bb26;">"educaci&#243;n"</span><span style="color: #b16286;">}</span><span style="color: #fe8019;">)</span>
<span style="color: #83a598;">resultados</span> = r.json<span style="color: #fe8019;">()</span>.get<span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"result"</span>, <span style="color: #b16286;">{}</span><span style="color: #fe8019;">)</span>.get<span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"results"</span>, <span style="color: #b16286;">[]</span><span style="color: #fe8019;">)</span>
<span style="color: #fb4934;">for</span> d <span style="color: #fb4934;">in</span> resultados<span style="color: #fe8019;">[</span>:5<span style="color: #fe8019;">]</span>:
<span style="background-color: #3c3836;"> </span>   <span style="color: #fe8019;">print</span><span style="color: #fe8019;">(</span>d<span style="color: #b16286;">[</span><span style="color: #b8bb26;">"title"</span><span style="color: #b16286;">]</span>, <span style="color: #b8bb26;">"-"</span>, d.get<span style="color: #b16286;">(</span><span style="color: #b8bb26;">"organization"</span>, <span style="color: #b8bb26;">{}</span><span style="color: #b16286;">)</span>.get<span style="color: #b16286;">(</span><span style="color: #b8bb26;">"title"</span><span style="color: #b16286;">)</span><span style="color: #fe8019;">)</span>
</pre>
</div>
</div>
</li>
<li><a id="org2c1a285"></a>Ejemplo: obtener URL de descarga de un recurso<br />
<div class="outline-text-5" id="text-org2c1a285">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #928374;"># </span><span style="color: #928374;">Supongamos que tenemos el id del dataset (ej. "catalogo-escuelas")
</span><span style="color: #83a598;">dataset_id</span> = <span style="color: #b8bb26;">"catalogo-escuelas"</span>
<span style="color: #83a598;">r</span> = requests.get<span style="color: #fe8019;">(</span>f<span style="color: #b8bb26;">"</span>{BASE}<span style="color: #b8bb26;">/package_show"</span>, params=<span style="color: #b16286;">{</span><span style="color: #b8bb26;">"id"</span>: dataset_id<span style="color: #b16286;">}</span><span style="color: #fe8019;">)</span>
<span style="color: #83a598;">pkg</span> = r.json<span style="color: #fe8019;">()</span>.get<span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"result"</span>, <span style="color: #b16286;">{}</span><span style="color: #fe8019;">)</span>
<span style="color: #fb4934;">for</span> res <span style="color: #fb4934;">in</span> pkg.get<span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"resources"</span>, <span style="color: #b16286;">[]</span><span style="color: #fe8019;">)</span>:
<span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">if</span> res.get<span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"format"</span>, <span style="color: #b8bb26;">""</span><span style="color: #fe8019;">)</span>.upper<span style="color: #fe8019;">()</span> == <span style="color: #b8bb26;">"CSV"</span>:
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">url_descarga</span> = res<span style="color: #fe8019;">[</span><span style="color: #b8bb26;">"url"</span><span style="color: #fe8019;">]</span>
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #fe8019;">print</span><span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"Descargar CSV:"</span>, url_descarga<span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #928374;"># </span><span style="color: #928374;">response = requests.get(url_descarga)
</span><span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #928374;"># </span><span style="color: #928374;">with open("datos.csv", "wb") as f:
</span><span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #928374;">#     </span><span style="color: #928374;">f.write(response.content)
</span><span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">break</span>
</pre>
</div>
</div>
</li>
</ul>
</div>
<div id="outline-container-org392deac" class="outline-4">
<h4 id="org392deac">Descarga directa de archivos</h4>
<div class="outline-text-4" id="text-org392deac">
<p>
En la web de datos.gob.mx cada dataset tiene recursos con enlaces de descarga directa.
Se puede usar la API para obtener esas URLs y luego <code>requests.get()</code> para descargar.
</p>
</div>
</div>
</div>
<div id="outline-container-orgac69747" class="outline-3">
<h3 id="orgac69747">Otras fuentes gubernamentales de datos abiertos</h3>
<div class="outline-text-3" id="text-orgac69747">
</div>
<div id="outline-container-org517942e" class="outline-4">
<h4 id="org517942e">México</h4>
<div class="outline-text-4" id="text-org517942e">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Fuente</th>
<th scope="col" class="org-left">URL</th>
<th scope="col" class="org-left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">INEGI</td>
<td class="org-left">inegi.org.mx</td>
<td class="org-left">Estadísticas, indicadores, DENUE, geografía</td>
</tr>

<tr>
<td class="org-left">datos.gob.mx</td>
<td class="org-left">datos.gob.mx</td>
<td class="org-left">Catálogo nacional de datos abiertos</td>
</tr>

<tr>
<td class="org-left">SAT datos abiertos</td>
<td class="org-left">gob.mx/sat</td>
<td class="org-left">Información fiscal y aduanal</td>
</tr>

<tr>
<td class="org-left">SEPOMEX</td>
<td class="org-left">sepomex.gob.mx</td>
<td class="org-left">Códigos postales (consultar términos de uso)</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-org68f348b" class="outline-4">
<h4 id="org68f348b">España</h4>
<div class="outline-text-4" id="text-org68f348b">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Fuente</th>
<th scope="col" class="org-left">URL</th>
<th scope="col" class="org-left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">datos.gob.es</td>
<td class="org-left">datos.gob.es</td>
<td class="org-left">Portal de datos abiertos de España</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-org2e756f2" class="outline-4">
<h4 id="org2e756f2">Internacional</h4>
<div class="outline-text-4" id="text-org2e756f2">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Fuente</th>
<th scope="col" class="org-left">URL</th>
<th scope="col" class="org-left">Descripción</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">World Bank Open Data</td>
<td class="org-left">data.worldbank.org</td>
<td class="org-left">Indicadores mundiales</td>
</tr>

<tr>
<td class="org-left">UN Data</td>
<td class="org-left">data.un.org</td>
<td class="org-left">Estadísticas de Naciones Unidas</td>
</tr>

<tr>
<td class="org-left">Eurostat</td>
<td class="org-left">ec.europa.eu/eurostat</td>
<td class="org-left">Estadísticas europeas</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="outline-container-orgb2cdf28" class="outline-3">
<h3 id="orgb2cdf28">Cuándo usar cada método</h3>
<div class="outline-text-3" id="text-orgb2cdf28">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Método</th>
<th scope="col" class="org-left">Cuándo usarlo</th>
<th scope="col" class="org-left">Ejemplo</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">API oficial</td>
<td class="org-left">Existe y cubre tus necesidades</td>
<td class="org-left">INEGI Indicadores, DENUE</td>
</tr>

<tr>
<td class="org-left">Descarga directa</td>
<td class="org-left">Archivos CSV/Excel en el portal</td>
<td class="org-left">datos.gob.mx, INEGI Datos Abiertos</td>
</tr>

<tr>
<td class="org-left">API CKAN</td>
<td class="org-left">Listar, buscar, obtener URLs de recursos</td>
<td class="org-left">datos.gob.mx</td>
</tr>

<tr>
<td class="org-left">Scraping</td>
<td class="org-left">Solo si no hay API ni descarga y el sitio lo permite</td>
<td class="org-left">Evitar en gobierno; preferir alternativas</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="outline-container-org944ac17" class="outline-3">
<h3 id="org944ac17">Buenas prácticas</h3>
<div class="outline-text-3" id="text-org944ac17">
<ol class="org-ol">
<li><b>Priorizar API y descargas oficiales</b>: Son legales, estables y están pensadas para uso programático.</li>
<li><b>Revisar términos de uso y licencias</b>: Aunque sean datos abiertos, pueden haber condiciones.</li>
<li><b>Identificarse</b>: Usar un User-Agent razonable si haces peticiones HTTP.</li>
<li><b>No saturar servidores</b>: Respetar rate limits; hacer pausas entre peticiones masivas.</li>
<li><b>Atribuir la fuente</b>: Citar INEGI, datos.gob.mx, etc., al publicar o reutilizar datos.</li>
<li><b>Protección de datos</b>: Evitar extraer o combinar datos que permitan identificar personas sin base legal.</li>
</ol>
</div>
</div>
<div id="outline-container-org4f77077" class="outline-3">
<h3 id="org4f77077">Ejemplo completo: indicador INEGI + guardar CSV</h3>
<div class="outline-text-3" id="text-org4f77077">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #fb4934;">import</span> requests
<span style="color: #fb4934;">import</span> csv

<span style="color: #83a598;">TOKEN</span> = <span style="color: #b8bb26;">"TU_TOKEN"</span>
<span style="color: #928374;"># </span><span style="color: #928374;">INPC - &#205;ndice Nacional de Precios al Consumidor (ejemplo)
</span><span style="color: #83a598;">indicador</span> = <span style="color: #b8bb26;">"628193"</span>  <span style="color: #928374;"># </span><span style="color: #928374;">Ajustar al indicador deseado
</span><span style="color: #83a598;">url</span> = <span style="color: #fe8019;">(</span>
<span style="background-color: #3c3836;"> </span>   f<span style="color: #b8bb26;">"https://www.inegi.org.mx/app/api/indicadores/desarrolladores/jsonxml/"</span>
<span style="background-color: #3c3836;"> </span>   f<span style="color: #b8bb26;">"INDICATOR/</span>{indicador}<span style="color: #b8bb26;">/es/00/false/BISE/2.0/</span>{TOKEN}<span style="color: #b8bb26;">?type=json"</span>
<span style="color: #fe8019;">)</span>
<span style="color: #83a598;">r</span> = requests.get<span style="color: #fe8019;">(</span>url<span style="color: #fe8019;">)</span>
<span style="color: #83a598;">data</span> = r.json<span style="color: #fe8019;">()</span>

<span style="color: #83a598;">observaciones</span> = data.get<span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"Series"</span>, <span style="color: #b16286;">[</span><span style="color: #b8bb26;">{}</span><span style="color: #b16286;">]</span><span style="color: #fe8019;">)[</span>0<span style="color: #fe8019;">]</span>.get<span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"OBSERVATIONS"</span>, <span style="color: #b16286;">[]</span><span style="color: #fe8019;">)</span>
<span style="color: #fb4934;">with</span> <span style="color: #fe8019;">open</span><span style="color: #fe8019;">(</span><span style="color: #b8bb26;">"indicador_inegi.csv"</span>, <span style="color: #b8bb26;">"w"</span>, newline=<span style="color: #b8bb26;">""</span>, encoding=<span style="color: #b8bb26;">"utf-8"</span><span style="color: #fe8019;">)</span> <span style="color: #fb4934;">as</span> f:
<span style="background-color: #3c3836;"> </span>   <span style="color: #83a598;">w</span> = csv.writer<span style="color: #fe8019;">(</span>f<span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   w.writerow<span style="color: #fe8019;">(</span><span style="color: #b16286;">[</span><span style="color: #b8bb26;">"periodo"</span>, <span style="color: #b8bb26;">"valor"</span><span style="color: #b16286;">]</span><span style="color: #fe8019;">)</span>
<span style="background-color: #3c3836;"> </span>   <span style="color: #fb4934;">for</span> obs <span style="color: #fb4934;">in</span> observaciones:
<span style="background-color: #3c3836;"> </span>   <span style="background-color: #3c3836;"> </span>   w.writerow<span style="color: #fe8019;">(</span><span style="color: #b16286;">[</span>obs<span style="color: #b8bb26;">[</span><span style="color: #b8bb26;">"TIME_PERIOD"</span><span style="color: #b8bb26;">]</span>, obs<span style="color: #b8bb26;">[</span><span style="color: #b8bb26;">"OBS_VALUE"</span><span style="color: #b8bb26;">]</span><span style="color: #b16286;">]</span><span style="color: #fe8019;">)</span>
<span style="color: #fe8019;">print</span><span style="color: #fe8019;">(</span>f<span style="color: #b8bb26;">"Guardados </span>{<span style="color: #fe8019;">len</span>(observaciones)}<span style="color: #b8bb26;"> registros"</span><span style="color: #fe8019;">)</span>
</pre>
</div>
</div>
</div>
<div id="outline-container-org499947a" class="outline-3">
<h3 id="org499947a">Resumen de enlaces</h3>
<div class="outline-text-3" id="text-org499947a">
<ul class="org-ul">
<li>INEGI API Indicadores: <code>https://www.inegi.org.mx/servicios/api_indicadores.html</code></li>
<li>INEGI API DENUE: <code>https://www.inegi.org.mx/servicios/api_denue.html</code></li>
<li>INEGI Datos Abiertos: <code>https://www.inegi.org.mx/datosabiertos/</code></li>
<li>INEGI Descarga Masiva: <code>https://www.inegi.org.mx/app/descarga/</code></li>
<li>Registro token INEGI: <code>https://www.inegi.org.mx/app/desarrolladores/registro/default.html</code></li>
<li>datos.gob.mx: <code>https://datos.gob.mx/</code></li>
<li>Constructor de Consultas INEGI: <code>https://www.inegi.org.mx/app/querybuilder/</code></li>
</ul>
</div>
</div>
<div id="outline-container-orgf5a28d3" class="outline-3">
<h3 id="orgf5a28d3">Dependencias</h3>
<div class="outline-text-3" id="text-orgf5a28d3">
<pre class="example" id="org919fa51">
pip install requests inegipy
</pre>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Autor: Eduardo Alcaraz</p>
<p class="date">Created: 2026-02-16 lun 08:15</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
